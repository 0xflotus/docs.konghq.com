<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/Article">
  

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Kong Brain &amp; Kong Immunity Installation and Configuration Guide - v1.3-x | Kong - Open-Source API Management and Microservice Management</title>
  <meta name="description" content="Secure, Manage &amp; Extend your APIs or Microservices with plugins for authentication, logging, rate-limiting, transformations and more." />
  <meta name="author" content="KongHQ" />
  <meta property="og:title" content="Open-Source API Management and Microservice Management" />
  <meta property="og:site_name" content="Kong" />
  <!-- use share link for facebook -->
  <meta property="og:url" content="https://docs.konghq.com" />
  <meta property="og:description" content="Secure, Manage &amp; Extend your APIs or Microservices with plugins for authentication, logging, rate-limiting, transformations and more." />
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="en_US" />
  <meta
    property="og:image"
    content="https://docs.konghq.com/assets/images/share.png"
  />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@thekonginc" />
  <meta name="twitter:creator" content="@thekonginc" />
  <meta name="twitter:url" content="https://docs.konghq.com" />
  <meta name="twitter:description" content="Secure, Manage &amp; Extend your APIs or Microservices with plugins for authentication, logging, rate-limiting, transformations and more." />
  <meta
    name="twitter:image"
    content="https://docs.konghq.com/assets/images/share.png"
  />
  <meta property="fb:admins" content="227304446" />
  <meta property="fb:admins" content="576641408" />
  <meta
    name="google-site-verification"
    content="CrU3zp02dNKTe8NSAipL4NCPkrIjDXG8fViTZ-MIzP4"
  />
  <link
    rel="stylesheet"
    href="https://use.fontawesome.com/releases/v5.4.1/css/all.css"
    integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz"
    crossorigin="anonymous"
  />

  <!-- New Relic -->
  <script type="text/javascript">
/* eslint-disable */
window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var o=e[n]={exports:{}};t[n][0].call(o.exports,function(e){var o=t[n][1][e];return r(o||e)},o,o.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,n){function r(t){try{c.console&&console.log(t)}catch(e){}}var o,i=t("ee"),a=t(20),c={};try{o=localStorage.getItem("__nr_flags").split(","),console&&"function"==typeof console.log&&(c.console=!0,o.indexOf("dev")!==-1&&(c.dev=!0),o.indexOf("nr_dev")!==-1&&(c.nrDev=!0))}catch(s){}c.nrDev&&i.on("internal-error",function(t){r(t.stack)}),c.dev&&i.on("fn-err",function(t,e,n){r(n.stack)}),c.dev&&(r("NR AGENT IN DEVELOPMENT MODE"),r("flags: "+a(c,function(t,e){return t}).join(", ")))},{}],2:[function(t,e,n){function r(t,e,n,r,c){try{h?h-=1:o(c||new UncaughtException(t,e,n),!0)}catch(f){try{i("ierr",[f,s.now(),!0])}catch(d){}}return"function"==typeof u&&u.apply(this,a(arguments))}function UncaughtException(t,e,n){this.message=t||"Uncaught error with no additional information",this.sourceURL=e,this.line=n}function o(t,e){var n=e?null:s.now();i("err",[t,n])}var i=t("handle"),a=t(21),c=t("ee"),s=t("loader"),f=t("gos"),u=window.onerror,d=!1,p="nr@seenError",h=0;s.features.err=!0,t(1),window.onerror=r;try{throw new Error}catch(l){"stack"in l&&(t(13),t(12),"addEventListener"in window&&t(6),s.xhrWrappable&&t(14),d=!0)}c.on("fn-start",function(t,e,n){d&&(h+=1)}),c.on("fn-err",function(t,e,n){d&&!n[p]&&(f(n,p,function(){return!0}),this.thrown=!0,o(n))}),c.on("fn-end",function(){d&&!this.thrown&&h>0&&(h-=1)}),c.on("internal-error",function(t){i("ierr",[t,s.now(),!0])})},{}],3:[function(t,e,n){t("loader").features.ins=!0},{}],4:[function(t,e,n){function r(){M++,S=y.hash,this[u]=b.now()}function o(){M--,y.hash!==S&&i(0,!0);var t=b.now();this[l]=~~this[l]+t-this[u],this[d]=t}function i(t,e){E.emit("newURL",[""+y,e])}function a(t,e){t.on(e,function(){this[e]=b.now()})}var c="-start",s="-end",f="-body",u="fn"+c,d="fn"+s,p="cb"+c,h="cb"+s,l="jsTime",m="fetch",v="addEventListener",w=window,y=w.location,b=t("loader");if(w[v]&&b.xhrWrappable){var g=t(10),x=t(11),E=t(8),P=t(6),O=t(13),R=t(7),T=t(14),L=t(9),j=t("ee"),N=j.get("tracer");t(15),b.features.spa=!0;var S,M=0;j.on(u,r),j.on(p,r),j.on(d,o),j.on(h,o),j.buffer([u,d,"xhr-done","xhr-resolved"]),P.buffer([u]),O.buffer(["setTimeout"+s,"clearTimeout"+c,u]),T.buffer([u,"new-xhr","send-xhr"+c]),R.buffer([m+c,m+"-done",m+f+c,m+f+s]),E.buffer(["newURL"]),g.buffer([u]),x.buffer(["propagate",p,h,"executor-err","resolve"+c]),N.buffer([u,"no-"+u]),L.buffer(["new-jsonp","cb-start","jsonp-error","jsonp-end"]),a(T,"send-xhr"+c),a(j,"xhr-resolved"),a(j,"xhr-done"),a(R,m+c),a(R,m+"-done"),a(L,"new-jsonp"),a(L,"jsonp-end"),a(L,"cb-start"),E.on("pushState-end",i),E.on("replaceState-end",i),w[v]("hashchange",i,!0),w[v]("load",i,!0),w[v]("popstate",function(){i(0,M>1)},!0)}},{}],5:[function(t,e,n){function r(t){}if(window.performance&&window.performance.timing&&window.performance.getEntriesByType){var o=t("ee"),i=t("handle"),a=t(13),c=t(12),s="learResourceTimings",f="addEventListener",u="resourcetimingbufferfull",d="bstResource",p="resource",h="-start",l="-end",m="fn"+h,v="fn"+l,w="bstTimer",y="pushState",b=t("loader");b.features.stn=!0,t(8);var g=NREUM.o.EV;o.on(m,function(t,e){var n=t[0];n instanceof g&&(this.bstStart=b.now())}),o.on(v,function(t,e){var n=t[0];n instanceof g&&i("bst",[n,e,this.bstStart,b.now()])}),a.on(m,function(t,e,n){this.bstStart=b.now(),this.bstType=n}),a.on(v,function(t,e){i(w,[e,this.bstStart,b.now(),this.bstType])}),c.on(m,function(){this.bstStart=b.now()}),c.on(v,function(t,e){i(w,[e,this.bstStart,b.now(),"requestAnimationFrame"])}),o.on(y+h,function(t){this.time=b.now(),this.startPath=location.pathname+location.hash}),o.on(y+l,function(t){i("bstHist",[location.pathname+location.hash,this.startPath,this.time])}),f in window.performance&&(window.performance["c"+s]?window.performance[f](u,function(t){i(d,[window.performance.getEntriesByType(p)]),window.performance["c"+s]()},!1):window.performance[f]("webkit"+u,function(t){i(d,[window.performance.getEntriesByType(p)]),window.performance["webkitC"+s]()},!1)),document[f]("scroll",r,{passive:!0}),document[f]("keypress",r,!1),document[f]("click",r,!1)}},{}],6:[function(t,e,n){function r(t){for(var e=t;e&&!e.hasOwnProperty(u);)e=Object.getPrototypeOf(e);e&&o(e)}function o(t){c.inPlace(t,[u,d],"-",i)}function i(t,e){return t[1]}var a=t("ee").get("events"),c=t(23)(a,!0),s=t("gos"),f=XMLHttpRequest,u="addEventListener",d="removeEventListener";e.exports=a,"getPrototypeOf"in Object?(r(document),r(window),r(f.prototype)):f.prototype.hasOwnProperty(u)&&(o(window),o(f.prototype)),a.on(u+"-start",function(t,e){var n=t[1],r=s(n,"nr@wrapped",function(){function t(){if("function"==typeof n.handleEvent)return n.handleEvent.apply(n,arguments)}var e={object:t,"function":n}[typeof n];return e?c(e,"fn-",null,e.name||"anonymous"):n});this.wrapped=t[1]=r}),a.on(d+"-start",function(t){t[1]=this.wrapped||t[1]})},{}],7:[function(t,e,n){function r(t,e,n){var r=t[e];"function"==typeof r&&(t[e]=function(){var t=r.apply(this,arguments);return o.emit(n+"start",arguments,t),t.then(function(e){return o.emit(n+"end",[null,e],t),e},function(e){throw o.emit(n+"end",[e],t),e})})}var o=t("ee").get("fetch"),i=t(20);e.exports=o;var a=window,c="fetch-",s=c+"body-",f=["arrayBuffer","blob","json","text","formData"],u=a.Request,d=a.Response,p=a.fetch,h="prototype";u&&d&&p&&(i(f,function(t,e){r(u[h],e,s),r(d[h],e,s)}),r(a,"fetch",c),o.on(c+"end",function(t,e){var n=this;e?e.clone().arrayBuffer().then(function(t){n.rxSize=t.byteLength,o.emit(c+"done",[null,e],n)}):o.emit(c+"done",[t],n)}))},{}],8:[function(t,e,n){var r=t("ee").get("history"),o=t(23)(r);e.exports=r,o.inPlace(window.history,["pushState","replaceState"],"-")},{}],9:[function(t,e,n){function r(t){function e(){s.emit("jsonp-end",[],p),t.removeEventListener("load",e,!1),t.removeEventListener("error",n,!1)}function n(){s.emit("jsonp-error",[],p),s.emit("jsonp-end",[],p),t.removeEventListener("load",e,!1),t.removeEventListener("error",n,!1)}var r=t&&"string"==typeof t.nodeName&&"script"===t.nodeName.toLowerCase();if(r){var o="function"==typeof t.addEventListener;if(o){var a=i(t.src);if(a){var u=c(a),d="function"==typeof u.parent[u.key];if(d){var p={};f.inPlace(u.parent,[u.key],"cb-",p),t.addEventListener("load",e,!1),t.addEventListener("error",n,!1),s.emit("new-jsonp",[t.src],p)}}}}}function o(){return"addEventListener"in window}function i(t){var e=t.match(u);return e?e[1]:null}function a(t,e){var n=t.match(p),r=n[1],o=n[3];return o?a(o,e[r]):e[r]}function c(t){var e=t.match(d);return e&&e.length>=3?{key:e[2],parent:a(e[1],window)}:{key:t,parent:window}}var s=t("ee").get("jsonp"),f=t(23)(s);if(e.exports=s,o()){var u=/[?&](?:callback|cb)=([^&#]+)/,d=/(.*)\.([^.]+)/,p=/^(\w+)(\.|$)(.*)$/,h=["appendChild","insertBefore","replaceChild"];f.inPlace(HTMLElement.prototype,h,"dom-"),f.inPlace(HTMLHeadElement.prototype,h,"dom-"),f.inPlace(HTMLBodyElement.prototype,h,"dom-"),s.on("dom-start",function(t){r(t[0])})}},{}],10:[function(t,e,n){var r=t("ee").get("mutation"),o=t(23)(r),i=NREUM.o.MO;e.exports=r,i&&(window.MutationObserver=function(t){return this instanceof i?new i(o(t,"fn-")):i.apply(this,arguments)},MutationObserver.prototype=i.prototype)},{}],11:[function(t,e,n){function r(t){var e=a.context(),n=c(t,"executor-",e),r=new f(n);return a.context(r).getCtx=function(){return e},a.emit("new-promise",[r,e],e),r}function o(t,e){return e}var i=t(23),a=t("ee").get("promise"),c=i(a),s=t(20),f=NREUM.o.PR;e.exports=a,f&&(window.Promise=r,["all","race"].forEach(function(t){var e=f[t];f[t]=function(n){function r(t){return function(){a.emit("propagate",[null,!o],i),o=o||!t}}var o=!1;s(n,function(e,n){Promise.resolve(n).then(r("all"===t),r(!1))});var i=e.apply(f,arguments),c=f.resolve(i);return c}}),["resolve","reject"].forEach(function(t){var e=f[t];f[t]=function(t){var n=e.apply(f,arguments);return t!==n&&a.emit("propagate",[t,!0],n),n}}),f.prototype["catch"]=function(t){return this.then(null,t)},f.prototype=Object.create(f.prototype,{constructor:{value:r}}),s(Object.getOwnPropertyNames(f),function(t,e){try{r[e]=f[e]}catch(n){}}),a.on("executor-start",function(t){t[0]=c(t[0],"resolve-",this),t[1]=c(t[1],"resolve-",this)}),a.on("executor-err",function(t,e,n){t[1](n)}),c.inPlace(f.prototype,["then"],"then-",o),a.on("then-start",function(t,e){this.promise=e,t[0]=c(t[0],"cb-",this),t[1]=c(t[1],"cb-",this)}),a.on("then-end",function(t,e,n){this.nextPromise=n;var r=this.promise;a.emit("propagate",[r,!0],n)}),a.on("cb-end",function(t,e,n){a.emit("propagate",[n,!0],this.nextPromise)}),a.on("propagate",function(t,e,n){this.getCtx&&!e||(this.getCtx=function(){if(t instanceof Promise)var e=a.context(t);return e&&e.getCtx?e.getCtx():this})}),r.toString=function(){return""+f})},{}],12:[function(t,e,n){var r=t("ee").get("raf"),o=t(23)(r),i="equestAnimationFrame";e.exports=r,o.inPlace(window,["r"+i,"mozR"+i,"webkitR"+i,"msR"+i],"raf-"),r.on("raf-start",function(t){t[0]=o(t[0],"fn-")})},{}],13:[function(t,e,n){function r(t,e,n){t[0]=a(t[0],"fn-",null,n)}function o(t,e,n){this.method=n,this.timerDuration=isNaN(t[1])?0:+t[1],t[0]=a(t[0],"fn-",this,n)}var i=t("ee").get("timer"),a=t(23)(i),c="setTimeout",s="setInterval",f="clearTimeout",u="-start",d="-";e.exports=i,a.inPlace(window,[c,"setImmediate"],c+d),a.inPlace(window,[s],s+d),a.inPlace(window,[f,"clearImmediate"],f+d),i.on(s+u,r),i.on(c+u,o)},{}],14:[function(t,e,n){function r(t,e){d.inPlace(e,["onreadystatechange"],"fn-",c)}function o(){var t=this,e=u.context(t);t.readyState>3&&!e.resolved&&(e.resolved=!0,u.emit("xhr-resolved",[],t)),d.inPlace(t,y,"fn-",c)}function i(t){b.push(t),l&&(x?x.then(a):v?v(a):(E=-E,P.data=E))}function a(){for(var t=0;t<b.length;t++)r([],b[t]);b.length&&(b=[])}function c(t,e){return e}function s(t,e){for(var n in t)e[n]=t[n];return e}t(6);var f=t("ee"),u=f.get("xhr"),d=t(23)(u),p=NREUM.o,h=p.XHR,l=p.MO,m=p.PR,v=p.SI,w="readystatechange",y=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"],b=[];e.exports=u;var g=window.XMLHttpRequest=function(t){var e=new h(t);try{u.emit("new-xhr",[e],e),e.addEventListener(w,o,!1)}catch(n){try{u.emit("internal-error",[n])}catch(r){}}return e};if(s(h,g),g.prototype=h.prototype,d.inPlace(g.prototype,["open","send"],"-xhr-",c),u.on("send-xhr-start",function(t,e){r(t,e),i(e)}),u.on("open-xhr-start",r),l){var x=m&&m.resolve();if(!v&&!m){var E=1,P=document.createTextNode(E);new l(a).observe(P,{characterData:!0})}}else f.on("fn-end",function(t){t[0]&&t[0].type===w||a()})},{}],15:[function(t,e,n){function r(t){var e=this.params,n=this.metrics;if(!this.ended){this.ended=!0;for(var r=0;r<d;r++)t.removeEventListener(u[r],this.listener,!1);if(!e.aborted){if(n.duration=a.now()-this.startTime,4===t.readyState){e.status=t.status;var i=o(t,this.lastSize);if(i&&(n.rxSize=i),this.sameOrigin){var s=t.getResponseHeader("X-NewRelic-App-Data");s&&(e.cat=s.split(", ").pop())}}else e.status=0;n.cbTime=this.cbTime,f.emit("xhr-done",[t],t),c("xhr",[e,n,this.startTime])}}}function o(t,e){var n=t.responseType;if("json"===n&&null!==e)return e;var r="arraybuffer"===n||"blob"===n||"json"===n?t.response:t.responseText;return l(r)}function i(t,e){var n=s(e),r=t.params;r.host=n.hostname+":"+n.port,r.pathname=n.pathname,t.sameOrigin=n.sameOrigin}var a=t("loader");if(a.xhrWrappable){var c=t("handle"),s=t(16),f=t("ee"),u=["load","error","abort","timeout"],d=u.length,p=t("id"),h=t(19),l=t(18),m=window.XMLHttpRequest;a.features.xhr=!0,t(14),f.on("new-xhr",function(t){var e=this;e.totalCbs=0,e.called=0,e.cbTime=0,e.end=r,e.ended=!1,e.xhrGuids={},e.lastSize=null,h&&(h>34||h<10)||window.opera||t.addEventListener("progress",function(t){e.lastSize=t.loaded},!1)}),f.on("open-xhr-start",function(t){this.params={method:t[0]},i(this,t[1]),this.metrics={}}),f.on("open-xhr-end",function(t,e){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&e.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),f.on("send-xhr-start",function(t,e){var n=this.metrics,r=t[0],o=this;if(n&&r){var i=l(r);i&&(n.txSize=i)}this.startTime=a.now(),this.listener=function(t){try{"abort"===t.type&&(o.params.aborted=!0),("load"!==t.type||o.called===o.totalCbs&&(o.onloadCalled||"function"!=typeof e.onload))&&o.end(e)}catch(n){try{f.emit("internal-error",[n])}catch(r){}}};for(var c=0;c<d;c++)e.addEventListener(u[c],this.listener,!1)}),f.on("xhr-cb-time",function(t,e,n){this.cbTime+=t,e?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof n.onload||this.end(n)}),f.on("xhr-load-added",function(t,e){var n=""+p(t)+!!e;this.xhrGuids&&!this.xhrGuids[n]&&(this.xhrGuids[n]=!0,this.totalCbs+=1)}),f.on("xhr-load-removed",function(t,e){var n=""+p(t)+!!e;this.xhrGuids&&this.xhrGuids[n]&&(delete this.xhrGuids[n],this.totalCbs-=1)}),f.on("addEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-added",[t[1],t[2]],e)}),f.on("removeEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-removed",[t[1],t[2]],e)}),f.on("fn-start",function(t,e,n){e instanceof m&&("onload"===n&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=a.now()))}),f.on("fn-end",function(t,e){this.xhrCbStart&&f.emit("xhr-cb-time",[a.now()-this.xhrCbStart,this.onload,e],e)})}},{}],16:[function(t,e,n){e.exports=function(t){var e=document.createElement("a"),n=window.location,r={};e.href=t,r.port=e.port;var o=e.href.split("://");!r.port&&o[1]&&(r.port=o[1].split("/")[0].split("@").pop().split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=e.hostname||n.hostname,r.pathname=e.pathname,r.protocol=o[0],"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname);var i=!e.protocol||":"===e.protocol||e.protocol===n.protocol,a=e.hostname===document.domain&&e.port===n.port;return r.sameOrigin=i&&(!e.hostname||a),r}},{}],17:[function(t,e,n){function r(){}function o(t,e,n){return function(){return i(t,[f.now()].concat(c(arguments)),e?null:this,n),e?void 0:this}}var i=t("handle"),a=t(20),c=t(21),s=t("ee").get("tracer"),f=t("loader"),u=NREUM;"undefined"==typeof window.newrelic&&(newrelic=u);var d=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],p="api-",h=p+"ixn-";a(d,function(t,e){u[e]=o(p+e,!0,"api")}),u.addPageAction=o(p+"addPageAction",!0),u.setCurrentRouteName=o(p+"routeName",!0),e.exports=newrelic,u.interaction=function(){return(new r).get()};var l=r.prototype={createTracer:function(t,e){var n={},r=this,o="function"==typeof e;return i(h+"tracer",[f.now(),t,n],r),function(){if(s.emit((o?"":"no-")+"fn-start",[f.now(),r,o],n),o)try{return e.apply(this,arguments)}catch(t){throw s.emit("fn-err",[arguments,this,t],n),t}finally{s.emit("fn-end",[f.now()],n)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(t,e){l[e]=o(h+e)}),newrelic.noticeError=function(t){"string"==typeof t&&(t=new Error(t)),i("err",[t,f.now()])}},{}],18:[function(t,e,n){e.exports=function(t){if("string"==typeof t&&t.length)return t.length;if("object"==typeof t){if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if(!("undefined"!=typeof FormData&&t instanceof FormData))try{return JSON.stringify(t).length}catch(e){return}}}},{}],19:[function(t,e,n){var r=0,o=navigator.userAgent.match(/Firefox[\/\s](\d+\.\d+)/);o&&(r=+o[1]),e.exports=r},{}],20:[function(t,e,n){function r(t,e){var n=[],r="",i=0;for(r in t)o.call(t,r)&&(n[i]=e(r,t[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],21:[function(t,e,n){function r(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,o=n-e||0,i=Array(o<0?0:o);++r<o;)i[r]=t[e+r];return i}e.exports=r},{}],22:[function(t,e,n){e.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],23:[function(t,e,n){function r(t){return!(t&&t instanceof Function&&t.apply&&!t[a])}var o=t("ee"),i=t(21),a="nr@original",c=Object.prototype.hasOwnProperty,s=!1;e.exports=function(t,e){function n(t,e,n,o){function nrWrapper(){var r,a,c,s;try{a=this,r=i(arguments),c="function"==typeof n?n(r,a):n||{}}catch(f){p([f,"",[r,a,o],c])}u(e+"start",[r,a,o],c);try{return s=t.apply(a,r)}catch(d){throw u(e+"err",[r,a,d],c),d}finally{u(e+"end",[r,a,s],c)}}return r(t)?t:(e||(e=""),nrWrapper[a]=t,d(t,nrWrapper),nrWrapper)}function f(t,e,o,i){o||(o="");var a,c,s,f="-"===o.charAt(0);for(s=0;s<e.length;s++)c=e[s],a=t[c],r(a)||(t[c]=n(a,f?c+o:o,i,c))}function u(n,r,o){if(!s||e){var i=s;s=!0;try{t.emit(n,r,o,e)}catch(a){p([a,n,r,o])}s=i}}function d(t,e){if(Object.defineProperty&&Object.keys)try{var n=Object.keys(t);return n.forEach(function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){return t[n]=e,e}})}),e}catch(r){p([r])}for(var o in t)c.call(t,o)&&(e[o]=t[o]);return e}function p(e){try{t.emit("internal-error",e)}catch(n){}}return t||(t=o),n.inPlace=f,n.flag=a,n}},{}],ee:[function(t,e,n){function r(){}function o(t){function e(t){return t&&t instanceof r?t:t?s(t,c,i):i()}function n(n,r,o,i){if(!p.aborted||i){t&&t(n,r,o);for(var a=e(o),c=l(n),s=c.length,f=0;f<s;f++)c[f].apply(a,r);var d=u[y[n]];return d&&d.push([b,n,r,a]),a}}function h(t,e){w[t]=l(t).concat(e)}function l(t){return w[t]||[]}function m(t){return d[t]=d[t]||o(n)}function v(t,e){f(t,function(t,n){e=e||"feature",y[n]=e,e in u||(u[e]=[])})}var w={},y={},b={on:h,emit:n,get:m,listeners:l,context:e,buffer:v,abort:a,aborted:!1};return b}function i(){return new r}function a(){(u.api||u.feature)&&(p.aborted=!0,u=p.backlog={})}var c="nr@context",s=t("gos"),f=t(20),u={},d={},p=e.exports=o();p.backlog=u},{}],gos:[function(t,e,n){function r(t,e,n){if(o.call(t,e))return t[e];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return t[e]=r,r}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],handle:[function(t,e,n){function r(t,e,n,r){o.buffer([t],r),o.emit(t,e,n)}var o=t("ee").get("handle");e.exports=r,r.ee=o},{}],id:[function(t,e,n){function r(t){var e=typeof t;return!t||"object"!==e&&"function"!==e?-1:t===window?0:a(t,i,function(){return o++})}var o=1,i="nr@id",a=t("gos");e.exports=r},{}],loader:[function(t,e,n){function r(){if(!x++){var t=g.info=NREUM.info,e=p.getElementsByTagName("script")[0];if(setTimeout(u.abort,3e4),!(t&&t.licenseKey&&t.applicationID&&e))return u.abort();f(y,function(e,n){t[e]||(t[e]=n)}),s("mark",["onload",a()+g.offset],null,"api");var n=p.createElement("script");n.src="https://"+t.agent,e.parentNode.insertBefore(n,e)}}function o(){"complete"===p.readyState&&i()}function i(){s("mark",["domContent",a()+g.offset],null,"api")}function a(){return E.exists&&performance.now?Math.round(performance.now()):(c=Math.max((new Date).getTime(),c))-g.offset}var c=(new Date).getTime(),s=t("handle"),f=t(20),u=t("ee"),d=window,p=d.document,h="addEventListener",l="attachEvent",m=d.XMLHttpRequest,v=m&&m.prototype;NREUM.o={ST:setTimeout,SI:d.setImmediate,CT:clearTimeout,XHR:m,REQ:d.Request,EV:d.Event,PR:d.Promise,MO:d.MutationObserver};var w=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-spa-1071.min.js"},b=m&&v&&v[h]&&!/CriOS/.test(navigator.userAgent),g=e.exports={offset:c,now:a,origin:w,features:{},xhrWrappable:b};t(17),p[h]?(p[h]("DOMContentLoaded",i,!1),d[h]("load",r,!1)):(p[l]("onreadystatechange",o),d[l]("onload",r)),s("mark",["firstbyte",c],null,"api");var x=0,E=t(22)},{}]},{},["loader",2,15,5,3,4]);
;NREUM.info={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",licenseKey:"13e44ec848",applicationID:"187820761",sa:1}
</script>


  <!-- FullStory -->
  <!-- <script>
/* eslint-disable */
window['_fs_debug'] = false;
window['_fs_host'] = 'fullstory.com';
window['_fs_org'] = '7JS2S';
window['_fs_namespace'] = 'FS';
(function(m,n,e,t,l,o,g,y){
    if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;}
    g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];
    o=n.createElement(t);o.async=1;o.src='https://'+_fs_host+'/s/fs.js';
    y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);
    g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){g(l,v)};g.event=function(i,v){g('event',{n:i,p:v})};
    g.shutdown=function(){g("rec",!1)};g.restart=function(){g("rec",!0)};
    g.consent=function(a){g("consent",!arguments.length||a)};
    g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};
    g.clearUserCookie=function(){};
})(window,document,window['_fs_namespace'],'script','user');
</script>
 -->

  <!-- Delighted -->
  <script type="text/javascript">
/* eslint-disable */
  !function(e,t,r,n,a){if(!e[a]){for(var i=e[a]=[],s=0;s<r.length;s++){var c=r[s];i[c]=i[c]||function(e){return function(){var t=Array.prototype.slice.call(arguments);i.push([e,t])}}(c)}i.SNIPPET_VERSION="1.0.1";var o=t.createElement("script");o.type="text/javascript",o.async=!0,o.src="https://d2yyd1h5u9mauk.cloudfront.net/integrations/web/v1/library/"+n+"/"+a+".js";var u=t.getElementsByTagName("script")[0];u.parentNode.insertBefore(o,u)}}(window,document,["survey","reset","config","init","set","get","event","identify","track","page","screen","group","alias"],"Mvwmq6n6DhInaFYu","delighted");

  delighted.survey();
</script>


  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "name": "KongHQ",
      "url": "https://docs.konghq.com",
      "logo": "https://docs.konghq.com/assets/images/logo.png",
      "sameAs": [
        "https://www.facebook.com/konginc",
        "https://twitter.com/thekonginc",
        "https://plus.google.com/+mashape"
      ]
    }
  </script>

  <!-- Preload assets -->
  <link rel="dns-prefetch" href="//cloud.typography.com" />
  <link
    href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700"
    rel="stylesheet"
  />
  <link rel="dns-prefetch" href="//dev.visualwebsiteoptimizer.com" />
  <link rel="dns-prefetch" href="//cdn.segment.com" />

  <!-- Recaptcha -->
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>

  <!-- ##gulp-resource-hints## -->

  <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico" />
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"
  />
  <link
    rel="stylesheet"
    href="/assets/styles.css?v=1574126739"
  />
  
</head>

<!-- Kong Cookie Policy -->
<div class="cookie-policy-container">
  <p>In order to give you better service we use cookies. By continuing to use our website, you agree to the use of cookies as described in our <a href=" https://konghq.com/cookie-policy/">Cookie Policy</a>
  <button class="cookie-policy-accept btn button" type="submit">I Agree</button>
</div>



  <body
    id=""
    
    data-spy="scroll"
    data-target="#scroll-sidebar"
    data-offset="350"
  >
    <header class="navbar navbar-inverse navbar-toggleable-lg kong-navbar flex-row align-items-center fixed-top lower_nav expand">
    <div class="container d-flex">
      <a href="https://konghq.com/" class="navbar-brand col col-xl-auto">
      <img src="https://2tjosk2rxzc21medji3nfn1g-wpengine.netdna-ssl.com/wp-content/themes/konghq/assets/img/gradient-logo.svg" alt="Kong Logo">
      </a>
      <button class="navbar-toggler align-self-center" type="button" data-toggle="kong-expand" data-target="#pagesNav" aria-controls="pagesNav" aria-expanded="false" aria-label="Toggle navigation">
        <div></div>
        <div></div>
        <div></div>
      </button>
      <nav class="navbar full-width">
        <div class="collapse navbar-collapse col justify-content-md-end kong-navbar_nav">
          <ul id="menu-primary-nav" class="menu">
            <li class="btn menu-item menu-item-type-custom menu-item-object-custom menu-item-12447 navbar-item"><a href="https://konghq.com/request-demo" class="nav-link">Request Demo</a></li>
            <li class="btn menu-item menu-item-type-custom menu-item-object-custom menu-item-12448 navbar-item"><a href="https://konghq.com/install" class="nav-link">Install</a></li>
            <li class="two-row nav1 menu-item menu-item-type-custom menu-item-object-custom current-menu-ancestor menu-item-has-children menu-item-12449 navbar-item">
              <a href="#" class="nav-link">Products</a>
              <ul class="sub-menu">
                <li class="nav2 menu-item menu-item-type-custom menu-item-object-custom current-menu-ancestor current-menu-parent menu-item-has-children menu-item-12450 navbar-item">
                  <a href="https://konghq.com/kong" class="nav-link">Kong Gateway</a>
                  <div class="nav-btns"><a class="navbtn" href="https://konghq.com/install">Install Kong Open Source</a></div>
                  <ul class="sub-menu">
                    <li class="mobile-nav menu-item menu-item-type-custom menu-item-object-custom menu-item-12451 navbar-item"><a href="https://konghq.com/kong" class="nav-link">Overview</a></li>
                    <li class="stacked menu-item menu-item-type-custom menu-item-object-custom current-menu-item menu-item-12452 navbar-item">
                      <a href="https://konghq.com/products/kong-gateway/control-api" aria-current="page" class="nav-link">
                        <img src="/assets/images/nav/control.svg"> Control API
                        <p class="description">Own your Kong experience to customize your API and microservices workflows.</p>
                      </a>
                    </li>
                    <li id="menu-item-12453" class="nav3 menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-12453 navbar-item">
                      <a href="https://konghq.com/products/kong-gateway/kong-proxy" class="nav-link">
                        <img src="/assets/images/nav/proxy.svg"> Kong Proxy
                        <p class="description">Deliver performance needed for microservices, service mesh, and cloud native deployments.</p>
                      </a>
                      <ul class="sub-menu">
                        <li class="mobile-nav menu-item menu-item-type-custom menu-item-object-custom menu-item-12466 navbar-item"><a href="https://konghq.com/products/kong-gateway/kong-proxy" class="nav-link">Overview</a></li>
                        <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12467 navbar-item"><a href="https://konghq.com/products/kong-enterprise/multi-protocol" class="nav-link">Multi-protocol</a></li>
                      </ul>
                    </li>
                    <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12454 navbar-item">
                      <a href="https://konghq.com/products/kong-gateway/kong-plugins" class="nav-link">
                        <img src="/assets/images/nav/plugins.svg"> Kong Plugins
                        <p class="description">Unleash the full power of Kong with a robust ecosystem of plugins.</p>
                      </a>
                    </li>
                  </ul>
                </li>
                <li class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-12455 navbar-item">
                  <a href="https://konghq.com/products/kong-enterprise" class="nav-link">Kong Enterprise</a>
                  <div class="nav-btns"><a class="navbtn" href="https://konghq.com/request-demo">Demo</a><a class="navbtn" href="https://konghq.com/kong-cloud">Free Trial</a></div>
                  <ul class="sub-menu">
                    <li class="mobile-nav menu-item menu-item-type-custom menu-item-object-custom menu-item-12456 navbar-item"><a href="https://konghq.com/products/kong-enterprise" class="nav-link">Overview</a></li>
                    <li class="nav3 menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-12457 navbar-item">
                      <a href="https://konghq.com/products/kong-enterprise/kong-manager" class="nav-link">
                        <img src="/assets/images/nav/manager.svg"> Kong Manager
                        <p class="description">Monitor and manage all your services with a consumer-grade interface.</p>
                      </a>
                      <ul class="sub-menu">
                        <li class="mobile-nav menu-item menu-item-type-custom menu-item-object-custom menu-item-12458 navbar-item"><a href="https://konghq.com/products/kong-enterprise/kong-manager" class="nav-link">Overview</a></li>
                        <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12459 navbar-item"><a href="https://konghq.com/products/kong-enterprise/enterprise-plugins/" class="nav-link">Enterprise Plugins</a></li>
                        <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12460 navbar-item"><a href="https://konghq.com/products/kong-enterprise/vitals/" class="nav-link">Vitals</a></li>
                      </ul>
                    </li>
                    <li class="nav3 menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-12461 navbar-item">
                      <a href="https://konghq.com/products/kong-enterprise/teams" class="nav-link">
                        <img src="/assets/images/nav/teams.svg"> Teams
                        <p class="description">Organize developers and assign permissions to improve efficiency and compliance.</p>
                      </a>
                      <ul class="sub-menu">
                        <li class="mobile-nav menu-item menu-item-type-custom menu-item-object-custom menu-item-12462 navbar-item"><a href="https://konghq.com/products/kong-enterprise/teams" class="nav-link">Overview</a></li>
                        <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12463 navbar-item"><a href="https://konghq.com/products/kong-enterprise/role-based-access-control/" class="nav-link">RBAC</a></li>
                        <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12464 navbar-item"><a href="https://konghq.com/products/kong-enterprise/workspaces/" class="nav-link">Workspaces</a></li>
                      </ul>
                    </li>
                    <li class="nav3 menu-item menu-item-type-custom menu-item-object-custom menu-item-12465 navbar-item">
                      <a href="https://konghq.com/products/kong-enterprise/kong-studio" class="nav-link">
                        <img src="/assets/images/nav/studio.svg"> Kong Studio
                        <p class="description">Empower your developers with the Kong Studio Integrated Development Environment.</p>
                      </a>
                    </li>
                    <li class="border-top menu-item menu-item-type-custom menu-item-object-custom menu-item-12468 navbar-item">
                      <a href="https://konghq.com/products/kong-enterprise/dev-portal" class="nav-link">
                        <img src="/assets/images/nav/dev-portal.svg"> Dev Portal
                        <p class="description">Accelerate innovation across your organization with the Kong Developer Portal.</p>
                      </a>
                    </li>
                    <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12469 navbar-item">
                      <a href="https://konghq.com/products/kong-enterprise/kong-brain" class="nav-link">
                        <img src="/assets/images/nav/brain-updated.svg"> Brain
                        <p class="description">Automatically standardize documentation and create a visual map of your services.</p>
                      </a>
                    </li>
                    <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12470 navbar-item">
                      <a href="https://konghq.com/products/kong-enterprise/kong-immunity" class="nav-link">
                        <img src="/assets/images/nav/immunity.svg"> Immunity
                        <p class="description">Autonomously identify service issues with machine learning-powered anomaly detection.</p>
                      </a>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li class="one-col nav1 menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-12471 navbar-item">
              <a href="#" class="nav-link">Solutions</a>
              <ul class="sub-menu">
                <li class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-12472 navbar-item">
                  <a href="https://konghq.com/kong" class="nav-link">
                    <img src="/assets/images/nav/api-gateway.svg"> API Gateway
                    <p class="description">Take control of your microservices traffic with the world’s most popular API gateway.</p>
                  </a>
                </li>
                <li id="menu-item-12473" class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-12473 navbar-item">
                  <a href="https://konghq.com/solutions/kubernetes-ingress" class="nav-link">
                    <img src="/assets/images/nav/kubernetes.svg"> Kubernetes
                    <p class="description">Own your Kubernetes cluster by extending Kong functionality as an ingress controller.</p>
                  </a>
                </li>
                <li id="menu-item-12474" class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-12474 navbar-item">
                  <a href="https://konghq.com/solutions/service-mesh/" class="nav-link">
                    <img src="/assets/images/nav/service-mesh.svg"> Service Mesh
                    <p class="description">Inject Kong as a sidecar for your services to go from mess to mesh.</p>
                  </a>
                </li>
              </ul>
            </li>
            <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12471 navbar-item">
                <a href="/hub" class="nav-link">Plugins</a>
            </li>
            <li class="one-col nav1 menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-12475 navbar-item">
              <a href="#" class="nav-link">Open Source</a>
              <ul class="sub-menu">
                <li class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-12476 navbar-item"><a href="https://konghq.com/install" class="nav-link"><img src="/assets/images/nav/install.svg"> Install Kong Gateway</a></li>
                <li class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-12477 navbar-item"><a href="https://konghq.com/community/" class="nav-link"><img src="/assets/images/nav/community.svg"> Kong Community</a></li>
                <li class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-12478 navbar-item"><a target="_blank" href="https://github.com/Kong/kubernetes-ingress-controller" class="nav-link"><img src="/assets/images/nav/kubernetes.svg"> Kubernetes Ingress</a></li>
                <li class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-12479 navbar-item"><a target="_blank" href="https://kuma.io" class="nav-link"><img src="/assets/images/nav/kuma.svg"> Kuma</a></li>
                <li class="nav2 hidden menu-item menu-item-type-custom menu-item-object-custom menu-item-12480 navbar-item"><a target="_blank" href="https://insomnia.rest/" class="nav-link"><img src="/assets/images/nav/insomnia.svg"> Insomnia</a></li>
              </ul>
            </li>
            <li class="multicol wide nav1 menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-12481 navbar-item">
              <a target="_blank" href="https://docs.konghq.com" class="nav-link">Docs</a>
              <ul class="sub-menu">
                <li class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-12482 navbar-item">
                  <a class="nav-link">Get Started</a>
                  <ul class="sub-menu">
                    <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12484 navbar-item"><a href="https://konghq.com/install" class="nav-link"><img src="/assets/images/nav/install-thick.svg"> Install</a></li>
                    <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12485 navbar-item"><a target="_blank" href="https://docs.konghq.com/?_ga=2.154852088.1919773651.1569859116-132287075.1554308608" class="nav-link"><img src="/assets/images/nav/getting-started-thick.svg"> Kong Docs + Getting Started</a></li>
                  </ul>
                </li>
                <li id="menu-item-12483" class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-12483 navbar-item">
                  <a class="nav-link">Learn</a>
                  <ul class="sub-menu">
                    <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12486 navbar-item"><a target="_blank" href="https://docs.konghq.com/enterprise/?_ga=2.154852088.1919773651.1569859116-132287075.1554308608" class="nav-link"><img src="/assets/images/nav/deploy-plugins-master-launch.svg"> Deploy Kong Enterprise</a></li>
                    <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12487 navbar-item"><a target="_blank" href="https://docs.konghq.com/hub/" class="nav-link"><img src="/assets/images/nav/deploy-plugins-master-launch.svg"> Plugins</a></li>
                    <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12488 navbar-item"><a target="_blank" href="https://docs.konghq.com/enterprise/latest/admin-api/vitals/" class="nav-link"><img src="/assets/images/nav/deploy-plugins-master-launch.svg"> Master Kong Vitals</a></li>
                    <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12489 navbar-item"><a target="_blank" href="https://docs.konghq.com/enterprise/0.36-x/developer-portal/introduction/" class="nav-link"><img src="/assets/images/nav/deploy-plugins-master-launch.svg"> Launch Your Dev Portal</a></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li class="multicol nav1 menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-12490 navbar-item">
              <a href="#" class="nav-link">Resources</a>
              <ul class="sub-menu">
                <li class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-12491 navbar-item">
                  <a class="nav-link">Downloads</a>
                  <ul class="sub-menu">
                    <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12495 navbar-item"><a href="https://konghq.com/ebooks/" class="nav-link"><img src="/assets/images/nav/ebooks.svg"> eBooks</a></li>
                    <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12496 navbar-item"><a href="https://konghq.com/webinars/" class="nav-link"><img src="/assets/images/nav/webinars.svg"> Webinars</a></li>
                    <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12497 navbar-item"><a href="https://konghq.com/briefs" class="nav-link"><img src="/assets/images/nav/briefs.svg"> Briefs</a></li>
                    <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12494 navbar-item"><a href="https://konghq.com/blog/" class="nav-link"><img src="/assets/images/nav/blog.svg"> Blog</a></li>
                  </ul>
                </li>
                <li class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-12492 navbar-item">
                  <a class="nav-link">Community</a>
                  <ul class="sub-menu">
                    <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12500 navbar-item"><a href="https://konghq.com/community/" class="nav-link"><img src="/assets/images/nav/meetups.svg"> Community</a></li>
                    <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12498 navbar-item"><a target="_blank" href="https://discuss.konghq.com/?_ga=2.147363831.1919773651.1569859116-132287075.1554308608" class="nav-link"><img src="/assets/images/nav/kong-nation.svg"> Kong Nation</a></li>
                    <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12501 navbar-item"><a href="https://konghq.com/kong-summit" class="nav-link"><img src="/assets/images/nav/summit.svg"> Kong Summit</a></li>
                    <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12499 navbar-item"><a target="_blank" href="https://github.com/Kong/" class="nav-link"><img src="/assets/images/nav/github.svg"> GitHub</a></li>
                  </ul>
                </li>
                <li class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-12493 navbar-item">
                  <a class="nav-link">Support</a>
                  <ul class="sub-menu">
                    <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12502 navbar-item"><a target="_blank" href="https://support.konghq.com/s/" class="nav-link"><img src="/assets/images/nav/support-faqs.svg"> Enterprise Support Portal</a></li>
                    <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12503 navbar-item"><a href="https://konghq.com/faqs" class="nav-link"><img src="/assets/images/nav/support-faqs.svg"> FAQS</a></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li id="menu-item-12504" class="one-col icn-sm nav1 menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-12504 navbar-item">
              <a href="#" class="nav-link">Company</a>
              <ul class="sub-menu">
                <li class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-12505 navbar-item"><a href="https://konghq.com/about-kong-inc" class="nav-link"><img src="/assets/images/nav/about.svg"> About</a></li>
                <li class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-12505 navbar-item"><a href="https://konghq.com/customers/" class="nav-link"><img src="/assets/images/nav/meetups.svg"> Customers</a></li>
                <li class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-12506 navbar-item"><a href="https://konghq.com/investors" class="nav-link"><img src="/assets/images/nav/investors.svg"> Investors</a></li>
                <li class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-12507 navbar-item"><a href="https://konghq.com/careers/" class="nav-link"><img src="/assets/images/nav/careers.svg"> Careers</a></li>
                <li class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-12508 navbar-item"><a href="https://konghq.com/partners" class="nav-link"><img src="/assets/images/nav/partners.svg"> Partners</a></li>
                <li class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-12509 navbar-item"><a href="https://konghq.com/press-room" class="nav-link"><img src="/assets/images/nav/press.svg"> Press</a></li>
                <li class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-12510 navbar-item"><a href="https://konghq.com/contact" class="nav-link"><img src="/assets/images/nav/contact.svg"> Contact</a></li>
              </ul>
            </li>
            <li class="demo-btn menu-item menu-item-type-custom menu-item-object-custom menu-item-12511 navbar-item"><a href="https://konghq.com/request-demo" class="nav-link">Request Demo</a></li>
          </ul>
        </div>
      </nav>
    </div>
  </header>


    <div class="page ">
  <header class="page-header">
    <div class="container">
      <div class="edit-this-page">
        <a target="_blank" href="https://github.com/Kong/docs.konghq.com/tree/master/app/enterprise/1.3-x/brain-immunity/install-configure.md"><i class="fa fa-github"></i>
          Edit this Page</a>
      </div>
      <nav class="docs-navigation">
        <a href="/" >Kong</a>
        <a href="/enterprise"  class="active" >Kong Enterprise</a>
        <a href="/studio" >Kong Studio</a>
        <span class="sidebar-toggle">Open Sidebar</span>
      </nav>
      <div class="page-header-icon">
          
          
          <img src="/assets/images/icons/icn-documentation-ee.svg" alt="Documentation" />
          
          
      </div>
      <div class="page-header-title">
        <h1>Kong Brain & Kong Immunity Installation and Configuration Guide</h1>
      </div>

      <div class="versions-dropdown dropdown page-header-right  page-header-right-enterprise ">
        <button class="page-header-btn" id="version-dropdown" type="button" data-toggle="dropdown" aria-haspopup="true"
          aria-expanded="false">
          Version 1.3-x
          <em>(latest)</em>
          <span class="caret"></span>
        </button>
        <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="version-dropdown">
          
          <li  class="active" >
            <a href="/enterprise/1.3-x"  class="active" >
              1.3-x <em>(latest)</em>
            </a>
          </li>
          
          <li >
            <a href="/enterprise/0.36-x" >
              0.36-x 
            </a>
          </li>
          
          <li >
            <a href="/enterprise/0.35-x" >
              0.35-x 
            </a>
          </li>
          
          <li >
            <a href="/enterprise/0.34-x" >
              0.34-x 
            </a>
          </li>
          
          <li >
            <a href="/enterprise/0.33-x" >
              0.33-x 
            </a>
          </li>
          
          <li >
            <a href="/enterprise/0.32-x" >
              0.32-x 
            </a>
          </li>
          
          <li >
            <a href="/enterprise/0.31-x" >
              0.31-x 
            </a>
          </li>
          
        </ul>
        <div id="getkong-algolia-search" class="search-input">
          <i class="fa fa-search"></i>
          <input type="text" placeholder="Search" id="getkong-algolia-search-input" />
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <aside class="page-navigation">
      <span class="close-sidebar"></span>
      
      
      

      
      <nav>
        
        <h5>Deployment</h5>
        
        <ul>
          
          
          <li>
            <a href="/enterprise/1.3-x/deployment/licensing"  >
              Licensing
            </a>
            
            <ul>
              
              
              <li>
                <a href="/enterprise/1.3-x/deployment/licensing" >Overview</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/deployment/access-license" >How to Access Your License</a>
                
              </li>
              
            </ul>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/deployment/installation/overview"  >
              Installation
            </a>
            
            <ul>
              
              
              <li>
                <a href="/enterprise/1.3-x/deployment/installation/docker" >Docker</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/deployment/installation/ubuntu" >Ubuntu</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/deployment/installation/centos" >CentOS</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/deployment/installation/amazon-linux" >Amazon Linux</a>
                
              </li>
              
            </ul>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/kong-cloud"  >
              Kong Cloud
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/changelog"  >
              Changelog
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/deployment/migrations"  >
              Migrating to 1.3
            </a>
            
          </li>
          
        </ul>
      </nav>
      
      <nav>
        
        <a href="/enterprise/1.3-x/getting-started/">
          <h5>Getting Started</h5>
        </a>
        
        <ul>
          
          
          <li>
            <a href="/enterprise/1.3-x/getting-started/"  >
              Overview
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/getting-started/start-kong"  >
              How to Start Kong Enterprise
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/getting-started/add-workspace"  >
              How to Add a Workspace
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/getting-started/add-role"  >
              How to Add a Role and Permissions
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/getting-started/add-admin"  >
              How to Add an Admin
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/getting-started/add-service"  >
              How to Add a Service and Route
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/getting-started/enable-plugin"  >
              How to Enable a Plugin
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/getting-started/add-consumer"  >
              How to Add a Consumer
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/getting-started/enable-dev-portal"  >
              How to Enable the Dev Portal
            </a>
            
          </li>
          
        </ul>
      </nav>
      
      <nav>
        
        <a href="/enterprise/1.3-x/property-reference">
          <h5>Guides & References</h5>
        </a>
        
        <ul>
          
          
          <li>
            <a href="/enterprise/1.3-x/property-reference"  >
              Configuration Property Reference
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/cli"  >
              CLI Reference
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/references/rate-limiting"  >
              Rate Limiting Library
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/proxy"  >
              Proxy reference
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/auth"  >
              Authentication reference
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/loadbalancing"  >
              Load balancing reference
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/health-checks-circuit-breakers"  >
              Health checks and circuit breakers reference
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/clustering"  >
              Clustering reference
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/logging"  >
              Logging reference
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/network"  >
              Network &amp; Firewall
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/secure-admin-api"  >
              Securing the Admin API
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/plugin-development"  >
              Plugin Development Guide
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/pdk"  >
              Plugin Development Kit
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/oasconfig"  >
              OpenAPI Spec to Kong Entities
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/systemd"  >
              Control Kong through systemd
            </a>
            
          </li>
          
        </ul>
      </nav>
      
      <nav>
        
        <a href="/enterprise/1.3-x/admin-api">
          <h5>Admin API</h5>
        </a>
        
        <ul>
          
          
          <li>
            <a href="/enterprise/1.3-x/admin-api"  >
              Overview
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/admin-api/#supported-content-types"  >
              Supported Content Types
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/admin-api/#information-routes"  >
              Information Routes
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/admin-api/#tags"  >
              Tags
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/admin-api/#service-object"  >
              Service Object
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/admin-api/#route-object"  >
              Route Object
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/admin-api/#consumer-object"  >
              Consumer Object
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/admin-api/#plugin-object"  >
              Plugin Object
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/admin-api/#certificate-object"  >
              Certificate Object
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/admin-api/#sni-object"  >
              SNI Object
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/admin-api/#upstream-object"  >
              Upstream Object
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/admin-api/#target-object"  >
              Target Object
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/admin-api/workspaces/reference"  >
              Workspace Object routes
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/admin-api/rbac/reference"  >
              RBAC Object routes
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/admin-api/workspaces/reference"  >
              Workspaces
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/admin-api/rbac/reference"  >
              RBAC
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/admin-api/admins/reference"  >
              Admins
            </a>
            
            <ul>
              
              
              <li>
                <a href="/enterprise/1.3-x/admin-api/admins/reference" >API Reference</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/admin-api/admins/examples" >Examples</a>
                
              </li>
              
            </ul>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/admin-api/vitals"  >
              Vitals
            </a>
            
            <ul>
              
              
              <li>
                <a href="/enterprise/1.3-x/admin-api/vitals" >Vitals Overview</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/admin-api/vitals/vitals-influx-strategy" >Kong Vitals with InfluxDB</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/admin-api/vitals/vitals-prometheus-strategy" >Kong Vitals with Prometheus</a>
                
              </li>
              
            </ul>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/admin-api/audit-log"  >
              Audit Logging
            </a>
            
          </li>
          
        </ul>
      </nav>
      
      <nav>
        
        <a href="/enterprise/1.3-x/kong-manager/overview">
          <h5>Kong Manager</h5>
        </a>
        
        <ul>
          
          
          <li>
            <a href="/enterprise/1.3-x/kong-manager/overview"  >
              Overview
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/kong-manager/service-directory-mapping"  >
              Service Directory Mapping
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/kong-manager/networking/configuration"  >
              Networking
            </a>
            
            <ul>
              
              
              <li>
                <a href="/enterprise/1.3-x/kong-manager/networking/configuration" >Default and Custom Configuration</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/kong-manager/networking/email" >Configuring to Send Email</a>
                
              </li>
              
            </ul>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/kong-manager/security"  >
              Securing Kong Manager
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/kong-manager/authentication/super-admin"  >
              Authentication
            </a>
            
            <ul>
              
              
              <li>
                <a href="/enterprise/1.3-x/kong-manager/authentication/super-admin" >How to Create a Super Admin</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/kong-manager/authentication/basic" >Basic Auth</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/kong-manager/authentication/ldap" >LDAP</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/kong-manager/authentication/oidc" >OIDC</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/kong-manager/authentication/sessions" >Sessions</a>
                
              </li>
              
            </ul>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/kong-manager/reset-password"  >
              How to Reset Passwords and RBAC Tokens
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/kong-manager/administration/workspaces/workspaces"  >
              Administration
            </a>
            
            <ul>
              
              
              <li>
                <a href="/enterprise/1.3-x/kong-manager/administration/workspaces/workspaces" >Workspaces</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x" ></a>
                
                <ul>
                  
                  
                  <li>
                    <a href="/enterprise/1.3-x/kong-manager/administration/workspaces/workspaces" >Workspaces in Kong Manager</a>
                  </li>
                  
                  
                  <li>
                    <a href="/enterprise/1.3-x/kong-manager/administration/workspaces/create-workspace" >How to Create a Workspace</a>
                  </li>
                  
                  
                  <li>
                    <a href="/enterprise/1.3-x/kong-manager/administration/workspaces/update-workspace" >How to Update a Workspace</a>
                  </li>
                  
                </ul>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/kong-manager/administration/rbac/rbac" >RBAC</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x" ></a>
                
                <ul>
                  
                  
                  <li>
                    <a href="/enterprise/1.3-x/kong-manager/administration/rbac/rbac" >RBAC in Kong Manager</a>
                  </li>
                  
                  
                  <li>
                    <a href="/enterprise/1.3-x/kong-manager/administration/rbac/new-role" >How to Create a New Role</a>
                  </li>
                  
                  
                  <li>
                    <a href="/enterprise/1.3-x/kong-manager/administration/rbac/add-user" >How to Create an RBAC User</a>
                  </li>
                  
                </ul>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/kong-manager/administration/admins/invite" >Admins</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x" ></a>
                
                <ul>
                  
                  
                  <li>
                    <a href="/enterprise/1.3-x/kong-manager/administration/admins/invite" >How to Invite an Admin</a>
                  </li>
                  
                </ul>
                
              </li>
              
            </ul>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/kong-manager/vitals"  >
              Vitals
            </a>
            
          </li>
          
        </ul>
      </nav>
      
      <nav>
        
        <a href="/enterprise/1.3-x/developer-portal">
          <h5>Kong Dev Portal</h5>
        </a>
        
        <ul>
          
          
          <li>
            <a href="/enterprise/1.3-x/developer-portal/"  >
              Introduction
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/developer-portal/overview"  >
              Overview
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/developer-portal/legacy-migration"  >
              Migrating from Legacy
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/developer-portal/structure-and-file-types"  >
              Structure and File Types
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/developer-portal/working-with-templates"  >
              Working with Templates
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/developer-portal/using-the-editor"  >
              Using the Editor
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/developer-portal/networking"  >
              Networking
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/developer-portal/configuration"  >
              Configuration
            </a>
            
            <ul>
              
              
              <li>
                <a href="/enterprise/1.3-x/developer-portal/configuration/authentication" >Authentication</a>
                
                <ul>
                  
                  
                  <li>
                    <a href="/enterprise/1.3-x/developer-portal/configuration/authentication/basic-auth" >Basic Auth</a>
                  </li>
                  
                  
                  <li>
                    <a href="/enterprise/1.3-x/developer-portal/configuration/authentication/key-auth" >Key Auth</a>
                  </li>
                  
                  
                  <li>
                    <a href="/enterprise/1.3-x/developer-portal/configuration/authentication/oidc" >OIDC</a>
                  </li>
                  
                  
                  <li>
                    <a href="/enterprise/1.3-x/developer-portal/configuration/authentication/sessions" >Sessions</a>
                  </li>
                  
                  
                  <li>
                    <a href="/enterprise/1.3-x/developer-portal/configuration/authentication/adding-registration-fields" >Adding Custom Registration Fields</a>
                  </li>
                  
                </ul>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/developer-portal/configuration/smtp" >SMTP</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/developer-portal/configuration/workspaces" >Workspaces</a>
                
              </li>
              
            </ul>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/developer-portal/administration/"  >
              Administration
            </a>
            
            <ul>
              
              
              <li>
                <a href="/enterprise/1.3-x/developer-portal/administration/managing-developers" >Managing Developers</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/developer-portal/administration/developer-permissions" >Developer Roles and Content Permissions</a>
                
              </li>
              
            </ul>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/developer-portal/theme-customization/easy-theme-editing"  >
              Customization
            </a>
            
            <ul>
              
              
              <li>
                <a href="/enterprise/1.3-x/developer-portal/theme-customization/easy-theme-editing" >Easy Theme Editing</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/developer-portal/theme-customization/adding-javascript-assets" >Adding and Using Javascript Assets</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/developer-portal/theme-customization/single-page-app" >Single Page App in Dev Portal</a>
                
              </li>
              
            </ul>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/developer-portal/helpers/cli"  >
              Helpers
            </a>
            
            <ul>
              
              
              <li>
                <a href="/enterprise/1.3-x/developer-portal/helpers/cli" >CLI</a>
                
              </li>
              
            </ul>
            
          </li>
          
        </ul>
      </nav>
      
      <nav>
        
        <a href="/enterprise/1.3-x/kong-kubernetes/">
          <h5>Kong for Kubernetes Enterprise</h5>
        </a>
        
        <ul>
          
          
          <li>
            <a href="/enterprise/1.3-x/kong-kubernetes/overview"  >
              Overview
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/kong-kubernetes/install"  >
              Installation
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/kong-kubernetes/using-kong-for-kubernetes"  >
              Using Kong for Kubernetes
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/kong-kubernetes/changelog"  >
              Changelog
            </a>
            
          </li>
          
        </ul>
      </nav>
      
      <nav>
        
        <a href="/enterprise/1.3-x/brain-immunity/install-configure">
          <h5>Kong Brain & Kong Immunity</h5>
        </a>
        
        <ul>
          
          
          <li>
            <a href="/enterprise/1.3-x/brain-immunity/install-configure"  class="active" >
              Installation and Configuration
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/brain-immunity/service-map"  >
              Service Map
            </a>
            
          </li>
          
        </ul>
      </nav>
      
      <nav>
        
        <a href="/enterprise/1.3-xhttps://konghq.com/hub">
          <h5>Plugins</h5>
        </a>
        
        <ul>
          
          
          <li>
            <a href="/enterprise/1.3-x"  >
              OpenID Connect
            </a>
            
            <ul>
              
              
              <li>
                <a href="/enterprise/1.3-x/plugins/openid-connect" >OpenID Connect Plugin</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/plugins/oidc-azuread" >OpenID Connect with Azure AD</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/plugins/oidc-google" >OpenID Connect with Google</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/plugins/oidc-okta" >OpenID Connect with Okta</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/plugins/oidc-auth0" >OpenID Connect with Auth0</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/plugins/oidc-cognito" >OpenID Connect with Cognito</a>
                
              </li>
              
            </ul>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x"  >
              GraphQL
            </a>
            
            <ul>
              
              
              <li>
                <a href="/enterprise/1.3-x/plugins/graphql-quickstart" >GraphQL Quickstart</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/plugins/degraphql" >DegraphQL</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/plugins/graphql-proxy-cache-advanced" >GraphQL Proxy Cache Advanced</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/plugins/graphql-rate-limiting-advanced" >GraphQL Rate Limiting Advanced</a>
                
              </li>
              
            </ul>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x"  >
              Kafka
            </a>
            
            <ul>
              
              
              <li>
                <a href="/enterprise/1.3-x/plugins/kafka-log" >Kafka Log Plugin</a>
                
              </li>
              
              
              <li>
                <a href="/enterprise/1.3-x/plugins/kafka-upstream" >Kafka Upstream Plugin</a>
                
              </li>
              
            </ul>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/plugins/proxy-cache-advanced"  >
              Proxy Cache Advanced Plugin
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/plugins/canary-release"  >
              Canary Release Plugin
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/plugins/rate-limiting-advanced"  >
              Rate Limiting Plugin
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/plugins/request-transformer"  >
              Request Transformer Plugin
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/plugins/response-transformer-advanced"  >
              Response Transformer Advanced Plugin
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/plugins/oauth2-introspection"  >
              OAuth2 Introspection Plugin
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/plugins/http-proxy-caching"  >
              HTTP Proxy Caching
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/plugins/forward-proxy"  >
              Forward Proxy
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/plugins/statsd-advanced"  >
              StatsD Advanced Plugin
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/plugins/ldap-authentication-advanced"  >
              LDAP Auth Advanced Plugin
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/plugins/session"  >
              Session Plugin
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/plugins/route-by-header"  >
              Route By Header Plugin
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/plugins/route-transformer-advanced"  >
              Route Transformer Advanced
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/plugins/jwt-signer"  >
              JWT Signer Plugin
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/plugins/upstream-tls"  >
              Upstream TLS Plugin
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/plugins/vault-auth"  >
              Vault Auth Plugin
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/plugins/request-validator"  >
              Request Validator Plugin
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x/plugins/exit-transformer"  >
              Exit Transformer Plugin
            </a>
            
          </li>
          
          
          <li>
            <a href="/enterprise/1.3-x"  >
              Implementation
            </a>
            
            <ul>
              
              
              <li>
                <a href="/enterprise/1.3-x/plugins/allowing-multiple-authentication-methods" >Multiple Authentication Methods</a>
                
              </li>
              
            </ul>
            
          </li>
          
        </ul>
      </nav>
      
    </aside>

    <div class="page-content-container" id="documentation">
      <div class="page-content">
        <div class="content show-anchor-links">
          
          

          
          
          <h2 id="table-of-contents">Table of Contents</h2>
          <ul>
  <li><a href="#introduction" class="scroll-to">Introduction</a></li>
  <li><a href="#overview" class="scroll-to">Overview</a></li>
  <li><a href="#configure-the-kong-collector-plugin" class="scroll-to">Configure the Kong Collector Plugin</a></li>
  <li><a href="#configure-the-collector" class="scroll-to">Configure the Collector</a></li>
  <li><a href="#using-kong-immunity" class="scroll-to">Using Kong Immunity</a></li>
  <li><a href="#configure-auto-training" class="scroll-to">Configure Auto-Training</a></li>
  <li><a href="#immunity-generated-alerts" class="scroll-to">Immunity Generated Alerts</a></li>
  <li><a href="#alert-slack-integration" class="scroll-to">Alert Slack Integration</a></li>
  <li><a href="#deleting-a-rule" class="scroll-to">Deleting a Rule</a></li>
  <li><a href="#clean-up-the-data" class="scroll-to">Clean-Up-the-Data</a></li>
  <li><a href="#troubleshooting-common-setup-pitfalls" class="scroll-to">Troubleshooting-Common-Setup-Pitfalls</a></li>
  <li><a href="#still-having-problems" class="scroll-to">Still having problems?</a></li>
  <li><a href="#send-us-feature-requests" class="scroll-to">Send us feature requests</a></li>
</ul>


          

          <h3 id="introduction">Introduction</h3>
<p><strong>Kong Brain</strong> and <strong>Kong Immunity</strong> help automate the entire API and service development life cycle. By automating processes for configuration, traffic analysis and the creation of documentation, Kong Brain and Kong Immunity help organizations improve efficiency, governance, reliability and security. Kong Brain automates API and service documentation and Kong Immunity uses advanced machine learning to analyze traffic patterns to diagnose and improve security.</p>

<h3 id="overview">Overview</h3>

<h4 id="kong-collector-plugin">Kong Collector Plugin</h4>

<p>Kong Collector Plugin (Collector) configuration includes:</p>

<ul>
  <li>Kong Collector Plugin is included with Kong Enterprise, and used by Kong Brain and (optional) Kong Immunity.</li>
  <li>Configure the Collector, and Kong Brain is automatically enabled.</li>
  <li>If you have Kong Immunity, configure the Collector and Kong Immunity is automatically enabled.</li>
</ul>

<h4 id="kong-brain">Kong Brain</h4>

<p>Kong Brain (Brain) features include:</p>

<ul>
  <li>Kong Brain uses the real-time Kong Collector Plugin.</li>
  <li>Once the Collector is configured, Kong Brain is automatically enabled.</li>
  <li>Kong Brain ingests your documentation and data flows, analyze changes and take action.</li>
  <li>Users can create workflows and approve changes directly in Kong Manager.</li>
  <li>Visually map services using the real-time Kong Service Map.</li>
</ul>

<h4 id="kong-immunity">Kong Immunity</h4>

<p>Kong Immunity (Immunity) features include:</p>

<ul>
  <li>Kong Immunity is optional.</li>
  <li>Once the Collector is configured, Kong Immunity is automatically enabled.</li>
  <li>View Kong Immunity alerts in the Kong Service Map and take action with just a few clicks.</li>
  <li>Instantly diagnose issues. Receive Slack alerts notifying users of anomalies that require attention.</li>
</ul>

<h4 id="kong-service-map">Kong Service Map</h4>

<ul>
  <li>For information about the Kong Service Map, see <strong>Using Kong’s Service Map</strong>.</li>
</ul>

<h3 id="configure-the-kong-collector-plugin">Configure the Kong Collector Plugin</h3>

<h4 id="prerequisites">Prerequisites</h4>

<p>Prerequisites for installing the Collector include:</p>

<ul>
  <li>A working Kong Enterprise system using Kong Enterprise 0.35.3+ or later, with a minimum of one Kong node and a working data store (PostgreSQL or Cassandra).</li>
  <li>Access to a platform for the Collector which has Docker installed. This system must be networked to “talk” to the Kong Enterprise system on which the Collector is installed.</li>
  <li>Bintray access credentials (supplied by Kong) to access the downloads.</li>
</ul>

<h4 id="overview-1">Overview</h4>

<p>With the Collector, Kong Enterprise collects, coalesces and stores requests made through Kong. This plugin makes a copy of requests through Kong (not affecting the hot path) which are “Teed” to Kong Brain and/or Kong Immunity platforms. See the diagram below for a visual of how Kong Collector Plugin works with Kong Enterprise.</p>

<h4 id="configuration-order">Configuration Order</h4>

<p>Configure the Collector in the following order, with configuration steps provided below:</p>

<ol>
  <li>Deploy the Collector Plugin, which captures and sends traffic to the Collector for collection/processing.</li>
  <li>Deploy and start the Collector infrastructure on your Docker aware platform.</li>
  <li>Configure the components to talk to one another.</li>
  <li>Test their configuration.</li>
</ol>

<h4 id="deploy-the-collector">Deploy the Collector</h4>

<p>Deploy the Collector Plugin from the Kong Manager or the Admin API:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ http --form POST http://&lt;KONG_HOST&gt;:8001/&lt;workspace&gt;/plugins name=collector config.service_token=foo config.host=&lt;COLLECTOR_HOST&gt; config.port=5000 config.https=false config.log_bodies=true
</code></pre></div></div>

<p>It is possible to set up the Collector to only be applied to specific routes or services, by adding <code class="highlighter-rouge">route.id=&lt;ROUTE_ID&gt;</code> or <code class="highlighter-rouge">service.id=&lt;SERVICE_ID&gt;</code> to the request.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ http --form POST http://&lt;KONG_HOST&gt;:8001/&lt;workspace&gt;/plugins name=collector config.service_token=foo config.host=&lt;COLLECTOR_HOST&gt; config.port=5000 config.https=false config.log_bodies=true route.id=&lt;ROUTE_ID&gt;`
</code></pre></div></div>

<h3 id="configure-the-collector">Configure the Collector</h3>

<h4 id="bintray-credentials">Bintray Credentials</h4>

<p>Bintray is the download location for the files needed to install and run Brain and Immunity. Log in to Bintray and retrieve your BINTRAY_USERNAME and BINTRAY_API_KEY to proceed with the download.</p>

<ol>
  <li>Getting BINTRAY_USERNAME:</li>
  <li>Getting BINTRAY_API_KEY:</li>
</ol>

<p>Go to “Edit Profile”.</p>

<ol>
  <li>Choose “API Key”.</li>
</ol>

<h4 id="setting-up-with-docker-compose">Setting up with Docker Compose</h4>

<p>The information needed to run the full Collector, Brain, and Immunity system is included in the docker-compose files. This starts several docker containers: a database, a collector, a worker and a scheduler.
Kong provides a private docker image that is used by the compose files. This image is distributed by Bintray, and for access, the following is required:</p>

<ol>
  <li>Your Bintray User ID</li>
  <li>Your Bintray API key</li>
  <li>A system (where you want to run Brain and/or Immunity) with Docker installed and ready to run</li>
  <li>A system (where you want to run Brain and/or Immunity) with Docker-compose installed and ready to run</li>
</ol>

<p>Your Bintray credentials should be furnished to you upon purchase of Kong Enterprise. If you do not have them, contact Kong Support to get a new copy.
First you must ssh/putty into your running instance where Brain and Immunity system will be installed. Then, log into Docker.
Command:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo docker login -u &lt;BINTRAY_USERNAME&gt; -p &lt;BINTRAY_API_KEY&gt; kong-docker-kong-brain-immunity-base.bintray.io
</code></pre></div></div>

<p>Example:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo docker login -u kongUser -p ef27888aba233eggg8889eeee9454ca67ca9b1aa8bdd kong-docker-kong-brain-immunity-base.bintray.io
</code></pre></div></div>
<p>If you see “permission denied”, make sure you have run the above command as “sudo”.
Next, pull down the files Docker Compose will need.
Command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://&lt;BINTRAY_USERNAME&gt;:&lt;BINTRAY_API_KEY&gt;@kong.bintray.com/kong-brain-immunity-base/docker-compose.zip
</code></pre></div></div>

<p>Example:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ wget https://kong_user:ef27888aba233eefffffeef669454ca67ca9b1aa8bdd@kong.bintray.com/kong-brain-immunity-base/docker-compose.zip
</code></pre></div></div>

<p>If successful, you should see docker-compose.zip in your current dir. Unzip the package into the dir of your choice.
Next, run Docker Compose using the files to install Brain. Start the instances with docker-compose:
Command:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>KONG_HOST=&lt;KONG HOST&gt; KONG_PORT=&lt;8001&gt; docker-compose -f docker-compose.yml -f with-db.yml -f with-redis.yml up --remove-orphans`
`a
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`KONG_HOST - the public IP address or Hostname of the system which is running Brain`
`KONG_PORT - Usually 8001 but may be set otherwise`
</code></pre></div></div>

<p>Example:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`$ sudo KONG_HOST=13.57.208.156 KONG_PORT=8001 docker-compose -f docker-compose.yml -f with-db.yml -f with-redis.yml up --remove-orphans`
</code></pre></div></div>

<p>If you get an error which mentions “empty string”, make sure you run the above command with sudo.
If the command is running successfully, you should see downloads occurring similar to the following:</p>

<h4 id="opt-out-of-har-redaction">Opt-Out of Har Redaction</h4>

<p>Collector will default to NOT storing body data values and attachments in traffic data. You can see this as viewed in the Har[‘postData’][‘text’] field, all values that exist have been stripped and replaced with the value’s type. This does not affect the performance of Brain or Immunity, however can impact your ability to investigate some Kong Immunity related alerts by looking at the offending HARs that created those alerts.
If you want to store body data in the Collector, you can set your Collector’s REDACT_BODY_DATA by declaring it in your docker-compose up command as follows:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ REDACT_BODY_DATA=False docker-compose -f docker-compose.yml -f with-redis.yml up --remove-orphans
</code></pre></div></div>

<h4 id="using-different-postgres-and-redis-instances">Using different Postgres and Redis instances</h4>

<p>To use your own instances instead of the container provided ones, you can change the command to use either your database, redis, or both.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`$ KONG_HOST=&lt;KONG HOST&gt; KONG_PORT=&lt;8001&gt; SQLALCHEMY_DATABASE_URI=&lt;postgres://kong@localhost:5432/collector&gt; docker-compose -f docker-compose.yml -f with-redis.yml up --remove-orphans`
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`$ REDIS_URI=&lt;redis://localhost:6379/&gt; KONG_HOST=&lt;KONG HOST&gt; KONG_PORT=&lt;8001&gt; docker-compose -f docker-compose.yml -f with-db.yml up --remove-orphans`
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`$ REDIS_URI=&lt;redis://localhost:6379/&gt; KONG_HOST=&lt;KONG HOST&gt; KONG_PORT=&lt;8001&gt; SQLALCHEMY_DATABASE_URI=&lt;postgres://kong@localhost:5432/collector&gt; docker-compose -f docker-compose.yml up --remove-orphans`
</code></pre></div></div>

<h4 id="confirm-collector-is-working">Confirm Collector is working</h4>

<p>Requests to the status endpoint will confirm Collector is up and running in addition to providing Immunity and/or Brain status and version number. Open a browser and type in the following request:
Request: http://<COLLECTOR_HOST>:<COLLECTOR_PORT>/status
COLLECTOR_HOST - the *public* IP address of the computer where you ran Docker Compose.</COLLECTOR_PORT></COLLECTOR_HOST></p>

<h4 id="configure-kong-routes-to-send-data-to-collector">Configure Kong Routes to send data to Collector</h4>

<p>Each route in Kong that you want Collector to collect data on must be positively enabled to send data to Collector. You can do this using Kong Admin API to enable and configure a plugin on the route.
For each route you want to enable Collector on, make the following request:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`$ http http://&lt;KONG_HOST&gt;:8001/&lt;workspace&gt;/routes/&lt;route_id&gt;/plugins name=collector config.service_token=foo config.host=&lt;COLLECTOR_HOST&gt; config.port=5000 config.https=false config.log_bodies=true`
</code></pre></div></div>

<p>If your Kong instance is using RBAC authorization for admin endpoints, be sure to pass your KONG-ADMIN-TOKEN in header.</p>

<blockquote>
  <p>POWER USER note: There are additional configuration options on the Collector plugin that allows for tuning of the batches that are sent to Brain. These are <code class="highlighter-rouge">config.queue_size</code> and <code class="highlighter-rouge">config.flush_timeout</code>.</p>
</blockquote>

<p>If you are experiencing performance issues, contact Kong Support and to optimize the batching.
You should now be ready to use Brain and Immunity!</p>

<h4 id="monitor-the-collector">Monitor the Collector</h4>

<p>Once you have Collector up and running and Kong routes configured to send data to Collector, you can check the functioning of Brain in several ways. Brain exposes several API endpoints on port 5000.</p>

<h4 id="check-collector-receiving-data">Check Collector receiving data</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://&lt;COLLECTOR_HOST&gt;:&lt;COLLECTOR_PORT&gt;/
</code></pre></div></div>

<p>Will return json contains information about each of the last 100 requests that Collector has received.</p>

<h4 id="using-kong-brain">Using Kong Brain</h4>

<p>Once you have the Collector plugin and infrastructure up and running, Kong Brain does not require additional configuration as it is automatically enabled. Once data is flowing through the Collector system, Brain starts generating swagger files and service-maps as displayed on the Dev Portal.</p>

<h4 id="generated-open-api-spec-files">Generated Open-API Spec files</h4>

<p>To create Brain’s Swagger files, the Collector endpoint /swagger returns a swagger file, generated considering traffic that match the submited filter parameters: <code class="highlighter-rouge">host</code>, <code class="highlighter-rouge">route_id</code>, <code class="highlighter-rouge">service_id</code> and <code class="highlighter-rouge">workspace_name</code>. Also, it fills the fields <code class="highlighter-rouge">title</code>, <code class="highlighter-rouge">version</code> and <code class="highlighter-rouge">description</code> within the swagger file with the respective submited parameters.</p>

<h4 id="httpswaggerhostopenapi_version23route_idservice_idworkspace_nametitle">**http://<COLLECTOR_HOST>:<COLLECTOR_PORT>/swagger?host=<request_host>&amp;openapi_version=&lt;2|3&gt;&amp;route_id=<route_id>&amp;service_id=<service_id>&amp;workspace_name=<workspace_name>?title=**</workspace_name></service_id></route_id></request_host></COLLECTOR_PORT></COLLECTOR_HOST></h4>

<h3 id="using-kong-immunity">Using Kong Immunity</h3>

<h4 id="immunity-model-training">Immunity Model Training</h4>

<p>Immunity automatically starts training its models once it is up and running and receiving data. Immunity will create a unique model for every unique endpoint + method combination it sees in incoming traffic. For example, if you have an endpoint “<a href="http://www.test-website.com/buy"><em>www.test-website.com/buy</em></a>” and traffic comes in with both GET and POST requests for that endpoint, Immunity will create two models one for the endpoint + GET traffic and one for the endpoint + POST traffic.</p>

<p>Our first model version gets created after the first hour and will continuously retrain itself for the first week to provide the best model possible. After that, every week all models retrain with a week of data.</p>

<p>We also provide clients an endpoint to retrigger training themselves. We recommend retraining when the context of your app is expected to change a lot. For example, maybe there is an upcoming app release that will change several endpoints. If this is the case, one can POST to http://<COLLECTOR_HOST>:<COLLECTOR_PORT>/resettrainer to start the training cycle all over again.</COLLECTOR_PORT></COLLECTOR_HOST></p>

<p>Let’s say you’d like slightly more control over the data your model sees, for example perhaps you know that weekend data is not particularly useful for model building because weekends are normally outliers that your team is prepared for. You can trigger model training for all models with a specified time period of data. Simply POST to **http://<BRAIN_HOST>:<COLLECTOR_PORT>/trainer**, with the start and end time of data you’d like included in training like this:</COLLECTOR_PORT></BRAIN_HOST></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`curl -d '{"start":"2019-01-08 10:00:00", "end":"2019-01-09 23:30:00"}' \`
` -H "Content-Type: application/json" \`
` -X POST http://&lt;BRAIN_HOST&gt;:&lt;COLLECTOR_PORT&gt;/trainer`
</code></pre></div></div>
<p>or, in the browser like this:</p>

<h4 id="httptrainerstartend">**http://<COLLECTOR_HOST>:<COLLECTOR_PORT>/trainer?start=&amp;end=**</COLLECTOR_PORT></COLLECTOR_HOST></h4>

<p>** datetime value format: YYYY-MM-DD HH:mm:ss</p>

<p>Additionally, you can specify the kong service_id or route_id of the urls you would like trained using the kong_entity parameter. Immunity would then only train urls associated with the ID provided, and with the data specified by the start and end dates.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`curl -d '{"start":"2019-01-08 10:00:00", "end":"2019-01-09 23:30:00", "kong_entity":"2beff163-061d-43ad-8d87-8f40d10805ba"}' \`
` -H "Content-Type: application/json" \`
` -X POST http://&lt;COLLECTOR_HOST&gt;:&lt;COLLECTOR_PORT&gt;/trainer`
</code></pre></div></div>

<h4 id="checking-models-trained">Checking Models Trained</h4>

<p>Only endpoints + method combinations that have a model trained can be monitored for alerts. If you want to check which endpoints have models, you can use **http://<COLLECTOR_HOST>:<COLLECTOR_PORT>/monitoredendpoints** which will give back a list of all models in the system. Each item in this list contains the following identifying information for the model:</COLLECTOR_PORT></COLLECTOR_HOST></p>

<ul>
  <li><strong>base_url</strong>: The url of the traffic used to train the model.</li>
  <li><strong>method</strong>: The method of the traffic used to train the model.</li>
  <li><strong>route_id</strong>: The Kong route_id that the traffic used to train the model is associated with. <strong>service_id</strong>: The Kong service_id that the traffic used to train the model is associated with. <strong>model_version_id</strong>: The model version number of the current, active model.</li>
  <li><strong>active_models</strong>: A json object containing information on the active status of each of the 6 core alert types in Immunity (unknown_parameters, abnormal_value, latency, traffic, status codes, and value_type).</li>
</ul>

<p>In this object, the value is a specific alert type and the value is a boolean value where True indicates that the model is actively monitoring for that alert type.</p>

<p>In general, if a endpoint + method combination model does not appear on the returned object from /monitoredendpoints, this is likely because not enough traffic has been seen by Immunity to build a reliable model.</p>

<h3 id="configure-auto-training">Configure Auto-Training</h3>

<h4 id="restarting-training-schedules">Restarting Training Schedules</h4>

<p>Immunity automatically sets up training jobs when it first starts up, and retrains all models on an optimized schedule based on time since data started flowing through Immunity. If you have experienced large changes in the type of data you expect to be coming through Immunity and do not feel comfortable choosing an “optimal” time period to use for retraining with the /trainer endpoint, you can re-trigger Immunity’s auto-training by posting to the /trainer/reset endpoint. Immunity will then recreate its retraining schedule as if it was just being started and newly ingesting data.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`curl -X POST http://&lt;COLLECTOR_HOST&gt;:&lt;COLLECTOR_PORT&gt;/trainer/reset`
</code></pre></div></div>

<h4 id="configuring-auto-training-rules">Configuring Auto-Training Rules</h4>

<p>For best use, Immunity retrains on a regular basis. If you do not feel like you need to retrain your models regularly and are happy with the current model you have now, you can stop auto retraining via post request to the /trainer/config endpoint. This endpoint takes these parameters:</p>

<ul>
  <li><strong>kong_entity</strong>: The route_id or service_id that you would like to turn on or off auto-training.</li>
  <li><strong>method</strong>: One of values: GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE. Specifying a method will restrict the rule being made on auto-training to only traffic matching the method specified. When this value is null, all traffic from all methods will be included in the rule.</li>
  <li><strong>enable</strong>: True or False, where true means auto-training is on and false means auto-training is off for the kong_entity specified.</li>
</ul>

<p>You can turn off auto-training for a particular route or service via curl request like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`curl -d '{"kong_entity":"your-route-id", "enable":false}' \`
` -H "Content-Type: application/json" \`
` -X POST http://&lt;COLLECTOR_HOST&gt;:&lt;COLLECTOR_PORT&gt;/trainer/config`
</code></pre></div></div>

<p>Similarly, if you turned off auto-training for a route and feel like turning it back on, you can post to /trainer/config with enable = true.</p>

<p>These configurations will only apply to training started by Immunity’s auto-training schedule. Other training requests made by /trainer won’t be affected by this configuration.</p>

<h4 id="viewing-configuration-rules">Viewing Configuration Rules</h4>

<p>To see all of your configured training rules, just create a get request to /trainer/config like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`curl -X GET http://&lt;COLLECTOR_HOST&gt;:&lt;COLLECTOR_PORT&gt;/trainer/config`
</code></pre></div></div>

<p>A list of all your rules will be returned, where kong_entity refers to the service_id or route_id the rule applies to, and enabled is a true or false value.</p>

<h4 id="resetting-or-deleting-configured-rules">Resetting or Deleting Configured Rules</h4>

<p>To delete a single auto-train rule that you created, you can send a delete request to /trainer/config with a kong_entity parameter and value of the service_id or route_id of the rule you would like to delete.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`curl -d '{"kong_entity":"your-route-id"}' \`
` -H "Content-Type: application/json" \`
` -X DELETE http://&lt;COLLECTOR_HOST&gt;:&lt;COLLECTOR_PORT&gt;/trainer/config`
</code></pre></div></div>

<p>Without a rule established, Immunity will default to auto-training. In other words, once you delete a configured rule, Immunity will continue or start auto-training on the route or service of the deleted rule.</p>

<p>If you would like to delete all the configurations you create, you can do so by sending an empty DELETE request to /trainer/config like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`curl -X http://&lt;COLLECTOR_HOST&gt;:&lt;COLLECTOR_PORT&gt;/trainer/config`
</code></pre></div></div>

<h3 id="immunity-generated-alerts">Immunity Generated Alerts</h3>

<p>Immunity evaluates your traffic every minute, and creates an alert when an anomalous event is detected.</p>

<h4 id="types-of-generated-alerts">Types of Generated Alerts</h4>

<p>Immunity is monitoring different types of data points in all traffic coming through Kong. Alerts generated will be based on these data points. Here are the alert types of violations Immunity is looking for:
<strong>value_type</strong>: These alerts are triggered when incoming requests have a value to a parameter of a different type (such as Int instead of Str) than seen historically.
<strong>unknown_parameter</strong>: These alerts are triggered when requests include parameters not seen before.
<strong>abnormal_value</strong>: These alerts are triggered when requests contain values abnormal to historical values seen paired with its parameter.
<strong>latency_ms</strong>: These alerts are triggered when incoming requests are significantly slower than historical records.
<strong>traffic</strong>: These alerts are triggered when Immunity sees a rise on 4XX and 5XX codes for incoming traffic, or when the overall traffic experiences an abnormal spike or dip.
<strong>statuscode</strong>: When the proportion of 4XX or 5XX codes is increasing, regardless of traffic volume</p>

<h4 id="retrieving-generated-alerts">Retrieving Generated Alerts</h4>

<p>You can monitor the created alerts by running the following commands:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`curl -d '{"start":"2019-01-08 10:00:00", "end":"2019-01-09 23:30:00"}' \`
` -H "Content-Type: application/json" \`
` -X POST http://&lt;COLLECTOR_HOST&gt;:&lt;COLLECTOR_PORT&gt;/alerts`
</code></pre></div></div>

<p>Or, you can access the alerts via browser, passing in the end and start values as parameters like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://&lt;COLLECTOR_HOST&gt;:&lt;COLLECTOR_PORT&gt;/alerts?start=2019-01-01 00:00:00&amp;end=2019-01-02 00:00:00
</code></pre></div></div>

<p>The /alerts endpoint takes these parameters and you can mix and match them to your monitoring needs:
<strong>start and end</strong>: Returns only alerts generated between the values in start and end parameters passed.
<strong>alert_type</strong>: Returns only alerts of the alert_type in specified in alert_type parameter. This parameter does not accept lists of alert types. The value passed must be one of [‘query_params’, ‘statuscode’, ‘latency_ms’, ‘traffic’]
<strong>url</strong>: Returns only the alerts associated with the endpoint specified with url parameter.
<strong>method</strong>: Returns only alerts with the method specified. Must be one of these values: GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, or TRACE. Full capitalization is necessary.
<strong>workspace_name</strong>: The name of the Kong workspace for the alerts you want returned.
<strong>route_id</strong>: The Kong Route id for the alerts you want returned
<strong>service_id</strong>: The Kong Service id for the alerts you want returned
<strong>system_restored</strong>: A true/false value indicated you only want returned alerts where the system_restored value is matching the boolean value passed into this parameter.
<strong>severity</strong>: One of “low”, “medium”, “high” which will restrict returned alerts of severities matching the value provided with this parameter.</p>

<h4 id="alerts-object">Alerts Object</h4>

<p>Two types of data are returned by the /alerts endpoint. The first is a list of the alerts generated, which are structured like this:
<strong>id</strong>: The alert_id of the alert.
<strong>detected_at</strong>: The time in which the generated alert was detected at. This time also correlates with the last time point in the data time series that generated this alert. For example, if the alert was generated on data from 1:00 pm to 1:01 pm, then the detected_at time would correspond with the most recent time point of 1:01 pm in the data used to make that alert.
<strong>detected_at_unix</strong>: The time from detected_at expressed in unix time.
<strong>url</strong>: The url who’s data generated this alert.
<strong>alert_type</strong>: the type of alert generated, will be one of [‘query_params’, ‘statuscode’, ‘latency_ms’, ‘traffic’]
<strong>summary</strong>: The summary of the alert generated, includes a description of the anomalous event for clarity.
<strong>system_restored</strong>: This parameter takes True or False as a value, and will return notifications where the anomalous event’s system_restored status matches the value passed in the parameter.
<strong>severity</strong>: The severity level of this alert, values within [low, medium, high].</p>

<h4 id="alerts-metadata">Alerts Metadata</h4>

<p>The second type of data returned is alerts metadata which describes the overall count of alerts and breaks down counts by alert type, severity, system_restored, and filtered_total.</p>

<h4 id="configure-alert-severity">Configure Alert Severity</h4>

<h4 id="severity-levels">Severity-Levels</h4>

<p>Alerts can be classified on 4-severity levels:
low: The low severity classification denotes the least important alerts to the user. While the user ultimately decides what a low severity means to them, we recommend that low severity indicates an alert that you’d want to look at eventually, but not right away. It’s an alert you wouldn’t wake up at 2 am to fix but something you’ll find useful down the road maybe with planning or minor bug fixing.
medium: A medium severity classification denotes a mid-level important alert to the user. We think of this level as not something you’d want to wake up at 2 am to fix, but not so unimportant that you would wait till sprint planning prep to address. This is a level where you’ll likely address it within the sprint or couple of days following it coming up.
high: A high severity classification is the highest severity level of alert. These are the alerts that you want to be woken up for in the middle of the night, the alert who’s ping means all hands on deck.
ignored: Alerts that are designated as ignored are not surfaced in the Kong Manager, slack alerts, nor /alerts endpoint. For the later, ignored relates will be returned when explicitly asked for via /alerts parameter “severity”.</p>

<h4 id="immunity-default-severities">Immunity Default Severities</h4>

<p>Immunity provides default severity levels based on the alert type, and these defaults are:</p>

<ul>
  <li>value_type: low</li>
  <li>unknown_parameter: low</li>
  <li>latency_ms: high</li>
  <li>traffic: medium</li>
  <li>statuscode: high</li>
</ul>

<h4 id="creating-or-updated-new-rules">Creating or Updated New Rules</h4>

<p>Of course, we think you know your system best and you can adjust the severities of your alerts to varying degrees of specificity. Users of Immunity will be able to configure alert severity on alert type, kong route_id or service_id, or any combination of the two.
For example, if you decide that for your system, unknown_parameter alerts are always system-breaking you can set the severity configuration for unknown_parameter alerts to high. Let’s say after doing so, you find that while usually an unknown_parameter alert is what you consider high-severity, there’s one route where it’s actually more of a medium. You can then specify a medium severity for unknown_parameter alerts generated only on that route and preserve the high-severity setting for the rest of unknown_parameters for the rest of your system.</p>

<p>To set a severity configuration on alerts, Immunity provides a /alerts/config endpoint. Posting to /alerts/config will create a new configuration, and requires these parameters:</p>

<ul>
  <li>alert_name: one of the alert types from [‘traffic’, ‘value_type’, ‘unknown_parameter’, ‘latency_ms’, ‘traffic’, ‘statuscode’], or null.</li>
  <li>kong_entity: a route_id or service_id for the entity you want to create the configuration for, or null.</li>
  <li>severity: the severity you want this rule to make, must be one of [‘low’, ‘medium’, ‘high’, ‘ignored’]. No other severity options will be accepted.</li>
</ul>

<p>In the example above, to set the first alert type wide rule for all unknown_parameter alerts in your system, you would pass ‘unknown_parameter’ to the “alert_name” parameter and null to the “kong_entity” parameter. Here’s an example of what that curl would look like:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`curl -d '{"alert_name":"unknown_parameter", "kong_entity":null, "severity": "high"}' \`
` -H "Content-Type: application/json" \`
` -X POST http://&lt;COLLECTOR_HOST&gt;:&lt;COLLECTOR_PORT&gt;/alerts/config`
</code></pre></div></div>

<p>To add that second rule for unknown_parameter alerts only coming from a specific route, you’d make a request like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`curl -d '{"alert_name":"unknown_parameter", "kong_entity":"your-route-id", "severity": "medium"}' \`
` -H "Content-Type: application/json" \`
` -X POST http://&lt;COLLECTOR_HOST&gt;:&lt;COLLECTOR_PORT&gt;/alerts/config`
</code></pre></div></div>

<p>When determining which severity to assign, Immunity will look for your configurations and default to the configuration that’s “most specific” to the alert in question. Immunity thinks of alert configuration specification like this (in order from most specific configuration to least specific configuration):</p>

<ul>
  <li>kong route_id + alert_name combo</li>
  <li>kong service_id + alert_name combo</li>
  <li>route_id</li>
  <li>service_id</li>
  <li>alert_name</li>
  <li>Immunity alert_name defaults</li>
</ul>

<p>When you hit the /alerts endpoint, for each alert, Immunity will first look for a rule specifying a severity for that route’s kong route_id and alert_name. If it doesn’t find a severity configuration, it moves down the list above until it returns the Immunity defaults for the alert’s alert type.</p>

<h4 id="removing-alert-severity-rule">Removing-Alert-Severity-Rule</h4>

<p>You can remove alert-severity configuration rules by sending a delete request to /alerts/config. This endpoint takes these parameters:
kong_entity: The kong_entity of the rule you want deleted, or null for alert type rules.
alert_name: The alert type of the rule you wanted deleted, or null for a kong_entity rule you want deleted.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`curl -d '{"alert_name":"unknown_parameter", "kong_entity":"your-route-id"}' \`
` -H "Content-Type: application/json" \`
` -X DELETE http://&lt;COLLECTOR_HOST&gt;:&lt;COLLECTOR_PORT&gt;/alerts/config`
</code></pre></div></div>

<p>If you want to delete all configuration rules, you can by passing null values for both kong_entity and alert_name in your request. If you pass null for both kong_entity and alert_name parameters, all configurations will be deleted, like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`curl -d '{"alert_name":null, "kong_entity":null}' \`
` -H "Content-Type: application/json" \`
` -X DELETE http://&lt;COLLECTOR_HOST&gt;:&lt;COLLECTOR_PORT&gt;/alerts/config`
</code></pre></div></div>

<h4 id="seeing-alert-severity-configuration">Seeing-Alert-Severity-Configuration</h4>

<p>To see what rules you already have made, make a get request to /alerts/config to see all the rules like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`curl -X GET http://&lt;COLLECTOR_HOST&gt;:&lt;COLLECTOR_PORT&gt;/alerts/config`
</code></pre></div></div>

<p>In return you’ll get back a json like this, where each row is a configuration rule:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`[`
`` ```{'alert_name': null, 'kong_entity': 'route-id-1', 'severity': 'low'},`
` ``` ```{'alert_name': 'traffic', 'kong_entity': null, 'severity': 'high'},`
` ``` ```{'alert_name': 'value_type', 'kong_entity': 'route-id-2', 'severity': 'medium'}`
`]`
</code></pre></div></div>

<p>Any kong entity plus alert type rule will be represented by a json object with both alert_name and kong_entity are not null. In the example above, that would be 
{‘alert_name’: ‘value_type’, ‘kong_entity’: ‘route-id-2’, ‘severity’: ‘medium’}. An alert type wide rule will be represented by an json object where the alert_name is not null but the kong_entity is, like 
<code class="highlighter-rouge">{'alert_name': 'traffic', 'kong_entity': null, 'severity': 'high'}</code>.A kong entity wide rule is the reverse with a json object that has a non-null kong_entity value but a null alert_name value like <code class="highlighter-rouge">{'alert_name': null, 'kong_entity': 'route-id-1', 'severity': 'low'}</code></p>

<h4 id="looking-at-offending-hars">Looking at Offending Hars</h4>

<p>For value_type, unknown_parameter, and abnormal_value alerts, you can retrieve the hars that created those alerts via the http://<COLLECTOR_HOST>:<COLLECTOR_PORT>/hars endpoint. This endpoint accepts alert_id and/or har_id as parameters and returns hars related to the parameters sent. You must specify one of these two parameters to receive hars on the http://<COLLECTOR_HOST>:<COLLECTOR_PORT>/hars endpoint.
These are the parameters http://<COLLECTOR_HOST>:<COLLECTOR_PORT>/hars accepts:</COLLECTOR_PORT></COLLECTOR_HOST></COLLECTOR_PORT></COLLECTOR_HOST></COLLECTOR_PORT></COLLECTOR_HOST></p>

<p><strong>alert_id</strong>: The id of the alert related to the hars you’d like to inspect. This parameter only accepts one alert_id at a time (no lists).
<strong>har_ids</strong>: A list of har_ids you want returned.</p>

<p>The response will include these values:
<strong>har_id</strong>: The har id of the har returned
<strong>alert_id</strong>: The alert_id of the alert_returned.
<strong>har</strong>: The full har for the request that generated that har.</p>

<p>Here’s an example using curl:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`curl -d '{"alert_id":1} \`
` -H "Content-Type: application/json" \`
` -X POST http://&lt;COLLECTOR_HOST&gt;:&lt;COLLECTOR_PORT&gt;/hars`
</code></pre></div></div>

<p>Here’s an example using the browser</p>

<p>**http://<COLLECTOR_HOST>:<COLLECTOR_PORT>/hars?alert_id=1**</COLLECTOR_PORT></COLLECTOR_HOST></p>

<h3 id="alert-slack-integration">Alert Slack Integration</h3>

<p>If you choose, Immunity can send Slack notifications for unusual traffic. Immunity needs a Slack webhook to post messages to a Slack workspace. In order to obtain a webhook URL, do the following:</p>

<ol>
  <li>Create a new Slack app</li>
</ol>

<p><a href="https://api.slack.com/apps?new_app=1"><strong>https://api.slack.com/apps?new_app=1</strong></a></p>

<p>Pick a name and the workspace where the app will run.</p>

<p>Enable incoming webhook in your app
After submitting the app creation form you are redirected to your newly created app’s page. In “Add features and functionality” click on “Incoming webhooks” to enable them.
Change the OFF switch to ON. That will make visible a button “Add new webhook to workspace”, click on it.</p>

<p>That will redirect you to a page where you can select the channel the webhook will post messages. Select the channel and click in authorize.</p>

<p>Configuring Slack Channels Immunity provides the endpoint /notifications/slack/config for adding, deleting, and viewing your slack configurations.</p>

<h4 id="adding-a-slack-configuration">Adding a Slack Configuration</h4>

<p>To add your first Slack configuration, copy the webhook URL that you just created with your app (when you finished the Slack app creation, you should have been directed to a page where you could copy the webhook URL). Then, simply create a POST request to /notifications/slack/config with an endpoint parameter equal to the webhook URL. Here’s an example via curl:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`curl -d '{"endpoint":"www.your-slack-webhook.com"} \`
` -H "Content-Type: application/json" \`
` -X POST http://&lt;COLLECTOR_HOST&gt;:&lt;COLLECTOR_PORT&gt;/notifications/slack/config`
</code></pre></div></div>

<p>Now, you’ve successfully connected your Slack channel to Immunity and all alerts will notify you.</p>

<h4 id="routing-different-alerts-to-different-slack-channels">Routing Different Alerts to Different Slack Channels</h4>

<p>Immunity will send alerts to all Slack channels you ask it too. You can even restrict the type of alerts that go to a channel with additional parameters in your POST request. To do so, the /notifications/slack/config endpoint takes these parameters on POST:</p>

<p><strong>endpoint</strong>: The endpoint that you would like the current POST request rule you’re setting to apply to.
<strong>kong_entity</strong>: Will restrict notifications set to the endpoint to only those arising from the service_id, route_id, or workspace name specified here.
<strong>severity</strong>: Will route only alerts with severity specified to the endpoint. Severity values can be one of “low”, “medium”, “high”.
<strong>alert_type</strong>: Will route only alerts.
<strong>enable</strong>: When set to False, the rule in the POST request is disabled, meaning Immunity will ignore that configuration rule. When set to True, the rule in enabled and Immunity will route traffic according to the full request rule. This parameter is set to True by default in all POST requests.</p>

<p>When you send a POST request with only the endpoint parameter specified (like the one we did above), Immunity will route all traffic to that endpoint. Once a more specific POST request is made with more parameters filled, for example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`curl -d '{"endpoint":"www.your-slack-webhook.com",`
`` ```` ``` "severity": "high"} \`
` -H "Content-Type: application/json" \`
` -X POST http://&lt;COLLECTOR_HOST&gt;:&lt;COLLECTOR_PORT&gt;/notifications/slack/config`
</code></pre></div></div>

<p>Immunity will no longer route all traffic to “<a href="http://www.your-slack-webhook.com/"><em>www.your-slack-webhook.com</em></a>”, and only route alerts at high severity to “<a href="http://www.your-slack-webhook.com/"><em>www.your-slack-webhook.com</em></a>”.</p>

<p>You can set multiple rules of varying specificity for the same endpoint. For example, let’s say you want “<a href="http://www.your-slack-webhook.com/"><em>www.your-slack-webhook.com</em></a>” to show notifications on all alerts from service_id = “my-service-1-id” and only high-severity alerts on route_id = “my-route-1-id”, you can do so with two post requests:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`curl -d '{"endpoint":"www.your-slack-webhook.com",`
`` ```` ``` "kong_entity": "my-service-1-id"} \`
` -H "Content-Type: application/json" \`
` -X POST http://&lt;COLLECTOR_HOST&gt;:&lt;COLLECTOR_PORT&gt;/notifications/slack/config`


`curl -d '{"endpoint":"www.your-slack-webhook.com",`
`` ```` ``` "severity": "high",`
`` ```` ``` "kong_entity": "my-route-1-id"} \`
` -H "Content-Type: application/json" \`
` -X POST http://&lt;COLLECTOR_HOST&gt;:&lt;COLLECTOR_PORT&gt;/notifications/slack/config`
</code></pre></div></div>

<p>Once one specific Slack configuration rule is created for a given Slack endpoint, Immunity considers all following configuration rules as “additive”, meaning that each new rule will add more.</p>

<h4 id="seeing-your-configured-rules">Seeing your configured Rules</h4>

<p>Configured rules can get complicated. To see all the slack rules and slack urls you have configured, make a GET request to /notifications/slack/config like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`curl -X GET http://&lt;COLLECTOR_HOST&gt;:&lt;COLLECTOR_PORT&gt;/notifications/slack/config`
</code></pre></div></div>

<p>Which will return a json object where each key is an endpoint configured its value are the rules configured in a tree like structure with a boolean at the leaf of the tree indicating whether that rule is enabled or not. For the multi-config example we made above for <a href="http://www.your-slack-webhook.com/"><em>www.your-slack-webhook.com</em></a>, the returned GET object will look like:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`{"www.your-slack-webhook.com": {"kong_entities": {"my-service-1-id": true,`
`` ```` ```` ```` ```` ```` ```` ```` ```` ```` ```` ```` ``` "my-route-1-id": {"severities": {"high": true}},`
`` ```` ```` ```` ```` ```` ```` ```` ```` ```` ```` ```` ``` },`
`` ```` ```` ```` ```` ```` ```` ``` }`
`}`
</code></pre></div></div>

<h4 id="disabling-a-rule">Disabling a Rule</h4>

<p>You might want to temporarily disable a rule you created. No problem, simply make the same POST request to /notifications/slack/config and add or change the enable parameter to false. Using the same example from above, let’s set the configuration on <a href="http://www.your-slack-webhook.com/"><em>www.your-slack-webhook.com</em></a> on my-service-1-id to false.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`curl -d '{"endpoint":"www.your-slack-webhook.com",`
`` ```` ``` "kong_entity": "my-service-1-id",`
`` ```` ``` "enable": false} \`
` -H "Content-Type: application/json" \`
` -X POST http://&lt;COLLECTOR_HOST&gt;:&lt;COLLECTOR_PORT&gt;/notifications/slack/config`
</code></pre></div></div>

<p>It’s important when disabling a rule to use the exact same specification parameter values (kong_entity, severity, and alert_type) that were used to create the rule.</p>

<h3 id="deleting-a-rule">Deleting a Rule</h3>

<p>Sometimes you want to delete a rule. Functionally this is the same as disabling a rule in the sense that notifications will no longer be sent as the deleted or disabled rule specified. To delete a configuration rule, send a DELETE request to /notifications/slack/config, and just like with disabling rules, make sure you’re passing the correct values to the configuration specifying parameters (kong_entity, severity, and alert_type). With the same example from above that disabled the config rule for my-service-1-id, a DELETE would look like:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`curl -d '{"endpoint":"www.your-slack-webhook.com",`
`` ```` ``` "kong_entity": "my-service-1-id"} \`
` -H "Content-Type: application/json" \`
` -X DELETE http://&lt;COLLECTOR_HOST&gt;:&lt;COLLECTOR_PORT&gt;/notifications/slack/config`
</code></pre></div></div>

<p>Charts in Slack notifications</p>

<p>Some alerts include images to better describe the context in which the alert was created. We rely on Amazon S3 to store the images that are sent to Slack. In order to have notifications with images, please provide access information to an S3 bucket (with permission to add files), by setting the environment variables: AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY.</p>

<h3 id="clean-up-the-data">Clean-Up-the-Data</h3>

<p>Collector will clean the amount of HARs stored daily up to the max number of hars specified in the environment variable MAX_HARS_STORAGE and tables with extracted information to a max of two weeks of data. This means that at any day, the max number of HARs stored is the MAX_HARS_STORAGE + days_incoming_number_of_hars. If no MAX_HARS_STORAGE is specified, collector defaults to keeping 2 million hars in the database.</p>

<p>You can set your own value of MAX_HARS_STORAGE by setting the app environment variable through whatever means you’ve been deploying collector.</p>

<p>Additionally, collector provides an endpoint to delete the HARs data at /clean-hars. This endpoint accepts get and post and takes one parameter “max_hars_storage” which will delete all hars until only the value passed with max_hars_storage remains and contains the most recent HARs added to the database. If no value is passed to max_hars_storage, it will clean the database to the default value set with the environment variable MAX_HARS_STORAGE. An example of using this endpoint with curl looks like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`curl -d '{"max_hars_storage":10000} \`
` -H "Content-Type: application/json" \`
` -X POST http://&lt;COLLECTOR_HOST&gt;:&lt;COLLECTOR_PORT&gt;/clean-hars`
</code></pre></div></div>

<h3 id="troubleshooting-common-setup-pitfalls">Troubleshooting-Common-Setup-Pitfalls</h3>

<h4 id="im-sending-requests-with-strange-parameters-but-im-not-seeing-any-alerts-related-to-it">“I’m sending requests with strange parameters, but I’m not seeing any alerts related to it”</h4>

<p>There are a couple of things that can prevent the alerts you’re expecting from showing up. First, check your Collector instance again at http://<COLLECTOR_HOST>:<COLLECTOR_PORT> and make sure it’s returning HARS data. If you’re not seeing data, there are 2 possible explanations. First, its likely your Brain plugin setup is not correct. Retry setting up your Brain plugin, for example making sure that the host specified on config is the same as <COLLECTOR_HOST>, until you see data coming in on http://<COLLECTOR_HOST>:<COLLECTOR_PORT>. Second, if the plugin setup is correct but your test request data is not coming through, then make sure that the url you are sending your test data through is correct. For data to reach Collector, it must be sent through the kong service or route configured.</COLLECTOR_PORT></COLLECTOR_HOST></COLLECTOR_HOST></COLLECTOR_PORT></COLLECTOR_HOST></p>

<p>If you are seeing data, let’s examine the data that you’ve sent. The data given back are the last 100 requests Brain has. Click on one of them, and drill in until you get to queryString. Pro tip: if you don’t have random traffic coming into your system, and you know the last request you sent was the one with the strange parameters that you expected to trigger an alert, then the last entry in the list returned should correspond directly to that strange parameters request you sent.</p>

<p>On this view, check the contents of queryString. The queryString entry will list all parameters sent with the request your examining. If this entry is empty, then it indicates that no parameters were sent with this request, and properly sending parameters with your test request is the first step to seeing corresponding alerts.</p>

<p>If the queryString is looking good and you’re still not seeing alerts, then it might be that your models haven’t been built yet. When you first start Immunity, training is automatically scheduled to occur on the hour, every hour for the first week. This means that the first hour of immunityactivation will trigger no alerts because no models have been trained. You can check which endpoints have models by hitting http://<COLLECTOR_HOST>:<COLLECTOR_PORT>/monitoredendpoints and verify that the endpoint that you're testing with is included in the list of endpoints with models.</COLLECTOR_PORT></COLLECTOR_HOST></p>

<p>If you’re not seeing any endpoints being returned with /monitoredendpoints, then it’s likely training hasn’t happened. If you haven’t triggered training via the http://<COLLECTOR_HOST>:<COLLECTOR_PORT>/trainer endpoint and it’s within the first hour of Brain activation, then it’s likely no model has been made. If you would like to trigger training and not wait for the auto-generated models, hit http://<COLLECTOR_HOST>:<COLLECTOR_PORT>/trainer with the start parameter set to yesterday, and the end parameter set to tomorrow. This will create models using all available data.</COLLECTOR_PORT></COLLECTOR_HOST></COLLECTOR_PORT></COLLECTOR_HOST></p>

<p>If you are seeing endpoints but not the endpoint you’re testing, this likely means that not enough data for that endpoint is available for proper model training. If it’s possible to test alert generation with another endpoint on the /monitoredendpoints list, then switching your testing endpoint is recommended. If not, please create normal traffic for your test endpoint and hit http://<COLLECTOR_HOST>:<COLLECTOR_PORT>/trainer again for full training. Then confirm that your test endpoint is listed in /monistorendpoints.</COLLECTOR_PORT></COLLECTOR_HOST></p>

<h3 id="still-having-problems">Still having problems?</h3>

<p>Email us at immunity@konghq.com with your bug report, please use the following format.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`Summary`
`Please include a description of what happened, and a description of what you expected to happen`
`Steps To Reproduce (With pictures if helpful)`
`1.`
`2.`
`3.`
`4.`
`Additional Details &amp; Logs`
`* Immunity version (same as Brain version on Brain image name)`
`* Immunity logs (docker compose -f &lt;files used to start containers, with -f put in front of each file name&gt; logs)`
`* Immunity configuration`
`* Deployment Method (docker deployment, bare metals, kubernetes ? etc)`
</code></pre></div></div>

<h3 id="send-us-feature-requests">Send us feature requests</h3>

<h4 id="send-us-a-feature-request-to-immunitykonghqcom">Send us a feature request to immunity@konghq.com!</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`Summary of Proposed Feature`
`SUMMARY_GOES_HERE`
`User steps through feature (if applicable)`
`1.`
`2.`
`3.`
`4.`
</code></pre></div></div>


        </div>
      </div>
    </div>
  </div>
</div>
<style>
  @media (max-width: 768px) {
    .algolia-docsearch-suggestion--subcategory-column{
      display: none !important;
    }
  }
</style>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>




<script type="text/javascript">
  docsearch({
    appId: 'T5JKD83LWT',
    apiKey: '1390283021f26e36117242934deb8d9d',
    indexName: 'prod_EE',
    inputSelector: '#getkong-algolia-search-input',
    algoliaOptions: {
      hitsPerPage: 5,
      'facetFilters': ["version: 1.3-x"]
    },
    // Override selected event to allow for local environment navigation
    handleSelected: function (input, event, suggestion) {
      input.setVal('');
      window.location.href = window.location.protocol + "//" + window.location.host + suggestion.url.split(
        "docs.konghq.com")[1]
    }
    // ,debug: true // Set debug to true if you want to inspect the dropdown
  });

</script>



<script type="text/javascript">
  docsearch({
    appId: 'T5JKD83LWT',
    apiKey: '1390283021f26e36117242934deb8d9d',
    indexName: 'prod_Studio',
    inputSelector: '#getkong-algolia-search-input',
    algoliaOptions: {
      hitsPerPage: 5,
      'facetFilters': ["version: 1.3-x"]
    },
    // Override selected event to allow for local environment navigation
    handleSelected: function (input, event, suggestion) {
      input.setVal('');
      window.location.href = window.location.protocol + "//" + window.location.host + suggestion.url.split(
        "docs.konghq.com")[1]
    }
    // ,debug: true // Set debug to true if you want to inspect the dropdown
  });

</script>



    
<footer class="marketing-footer--light-gray">
  <section>
    <ul class="newsletter">
      <li class="logo-wrapper">
        <div class="logo">
          <img src="/assets/images/Kogo-gradient.svg" alt="Kong" />
        </div>
        <div class="form">
            <iframe src="https://go.konghq.com/l/392112/2019-02-14/bhxq9c" width="100%" height="60" type="text/html" frameborder="0" allowTransparency="true" style="border: 0"></iframe>
        </div>
        <div class="social">

          <div class="social-link">
            <a href="https://www.facebook.com/konghq/" title="Facebook"
              ><i
                aria-label="Facebook"
                class="fa fa-facebook-official"
                aria-hidden="true"
              ></i
            ></a>
          </div>
          <div class="social-link">
            <a href="https://twitter.com/thekonginc" title="Twitter"
              ><i
                aria-label="Twitter"
                class="fa fa-twitter"
                aria-hidden="true"
              ></i
            ></a>
          </div>
          <div class="social-link">
            <a href="https://www.meetup.com/topics/kong/all/" title="Meetup"
              ><i
              aria-label="Meetup"
              class="fa fa-meetup"
              aria-hidden="true"
            ></i
          ></a>
          </div>
          <div class="social-link">
            <a href="https://linkedin.com/company/278819" title="LinkedIn"
              ><i aria-label="GitHub" class="fa fa-linkedin" aria-hidden="true"></i
            ></a>
          </div>
          <div class="social-link">
            <a href="https://github.com/kong/kong" target="blank" class="btn-gh">
              <i class="fa fa-github" aria-hidden="true" aria-label="GitHub"></i> Star
            </a>
          </div>
        </div>
      </li>
      <li>
        <nav>
          <h5>Products</h5>
          <ul>
            <li><a href="http://konghq.com/kong/">Kong</a></li>
            <li><a href="http://konghq.com/kong-enterprise/">Kong Enterprise</a></li>
            <li><a href="http://konghq.com/kong-enterprise/studio/">Kong Studio</a></li>
            <li><a href="http://konghq.com/subscriptions/">Subscriptions</a></li>
          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h5>Resources</h5>
          <ul>
            <li>
              <a href="https://support.konghq.com" target="blank"
                >Enterprise Support</a
              >
            </li>
            <li>
              <a href="https://docs.konghq.com">Documentation</a>
            </li>
            <li><a href="http://konghq.com/partners/">Partners</a></li>
            <li><a href="http://konghq.com/webinars/">Webinars</a></li>
            <li><a href="http://konghq.com/ebooks/">Ebooks</a></li>
          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h5>Company</h5>
          <ul>
            <li><a href="http://konghq.com/about-kong-inc/">About</a></li>
            <li><a href="http://konghq.com/customers/">Customers</a></li>
            <li><a href="http://konghq.com/investors/">Investors</a></li>
            <li><a href="http://konghq.com/blog/">News</a></li>
            <li>
              <a href="http://konghq.com/careers/">Careers <span>Hiring!</span></a>
            </li>
            <li><a href="http://konghq.com/kong-summit/">Kong Summit</a></li>
            <li><a href="http://konghq.com/contact/">Contact</a></li>
          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h5>Open Source</h5>
          <ul>
            <li><a href="http://konghq.com/install/">Install</a></li>
            <li><a target="blank" href="https://github.com/Kong/">GitHub</a></li>
            <li><a href="https://discuss.konghq.com/"">Kong Nation</a></li>
            <li><a href="http://konghq.com/community/">Community</a></li>
          </ul>
        </nav>
      </li>
    </ul>
  </section>

  <section class="legal">
    <ul>
      <li>
        <span class="mashape-footer-content">&copy; Kong Inc. 2019 &nbsp; <a href="http://konghq.com/terms/">Terms</a><b>•</b><a href="http://konghq.com/privacy/">Privacy</a></span>
      </li>
    </ul>
  </section>

  <script type="text/javascript">
    function onSubmit(response) {
      document.getElementById('subscription_form').submit();
      document.getElementById('follow_up_subscription_form').submit();
      if (response.length == 0) {
        alert('reCaptcha verification failed');
      }
    }
  </script>
</footer>
 <script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = "#" + id;
    anchor.innerHTML = "<span class=\"sr-only\">Permalink</span><i class=\"fa fa-link\"></i>";
    anchor.title = "Permalink";
    return anchor;
  };

  document.onreadystatechange = function () {
    if (this.readyState === "complete") {
      var className =
        ".show-anchor-links h1, .show-anchor-links h2, .show-anchor-links h3, " +
        ".show-anchor-links h4, .show-anchor-links h5, .show-anchor-links h6";
      var headers = document.querySelectorAll(className);

      for (var i = 0; i < headers.length; i++) {
        var header = headers[i];
        if (typeof header.id !== "undefined" && header.id !== "") {
          header.prepend(anchorForId(header.id));
        }
      }
    }
  };
</script>


    <script src="/assets/app.js?v=1574126739"></script>

    <div id="fb-root"></div>

    <script
      src="https://2tjosk2rxzc21medji3nfn1g-wpengine.netdna-ssl.com/wp-content/themes/konghq/assets/js/vendor/bootstrap.min.js"
      async
      defer
    ></script>

    <script
      id="github-bjs"
      src="https://buttons.github.io/buttons.js"
      async
      defer
    ></script>
    <script
      id="twitter-wjs"
      type="text/javascript"
      src="https://platform.twitter.com/widgets.js"
      async
      defer
    ></script>
    <script
      id="facebook-jssdk"
      type="text/javascript"
      src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.3&appId=842731852424506"
      async
      defer
    ></script>

    <script type="text/javascript">
      piAId = '393112';
      piCId = '48375';

      (function() {
        function async_load() {
          var s = document.createElement('script');
          s.type = 'text/javascript';
          s.src =
            ('https:' == document.location.protocol
              ? 'https://pi'
              : 'http://cdn') + '.pardot.com/pd.js';
          var c = document.getElementsByTagName('script')[0];
          c.parentNode.insertBefore(s, c);
        }
        if (window.attachEvent) {
          window.attachEvent('onload', async_load);
        } else {
          window.addEventListener('load', async_load, false);
        }
      })();
    </script>

    <script type="text/javascript">
      var _vwo_code = (function() {
        var account_id = 125292,
          settings_tolerance = 2000,
          library_tolerance = 2500,
          use_existing_jquery = true,
          // DO NOT EDIT BELOW THIS LINE
          f = false,
          d = document;
        return {
          use_existing_jquery: function() {
            return use_existing_jquery;
          },
          library_tolerance: function() {
            return library_tolerance;
          },
          finish: function() {
            if (!f) {
              f = true;
              var a = d.getElementById('_vis_opt_path_hides');
              if (a) a.parentNode.removeChild(a);
            }
          },
          finished: function() {
            return f;
          },
          load: function(a) {
            var b = d.createElement('script');
            b.src = a;
            b.type = 'text/javascript';
            b.innerText;
            b.onerror = function() {
              _vwo_code.finish();
            };
            d.getElementsByTagName('head')[0].appendChild(b);
          },
          init: function() {
            settings_timer = setTimeout(
              '_vwo_code.finish()',
              settings_tolerance
            );
            this.load(
              '//dev.visualwebsiteoptimizer.com/j.php?a=' +
                account_id +
                '&u=' +
                encodeURIComponent(d.URL) +
                '&r=' +
                Math.random()
            );
            var a = d.createElement('style'),
              b = '',
              h = d.getElementsByTagName('head')[0];
            a.setAttribute('id', '_vis_opt_path_hides');
            a.setAttribute('type', 'text/css');
            if (a.styleSheet) a.styleSheet.cssText = b;
            else a.appendChild(d.createTextNode(b));
            h.appendChild(a);
            return settings_timer;
          }
        };
      })();
      _vwo_settings_timer = _vwo_code.init();
    </script>

    <script type="text/javascript">
      !(function() {
        var analytics = (window.analytics = window.analytics || []);
        if (!analytics.initialize)
          if (analytics.invoked)
            window.console &&
              console.error &&
              console.error('Segment snippet included twice.');
          else {
            analytics.invoked = !0;
            analytics.methods = [
              'trackSubmit',
              'trackClick',
              'trackLink',
              'trackForm',
              'pageview',
              'identify',
              'group',
              'track',
              'ready',
              'alias',
              'page',
              'once',
              'off',
              'on'
            ];
            analytics.factory = function(t) {
              return function() {
                var e = Array.prototype.slice.call(arguments);
                e.unshift(t);
                analytics.push(e);
                return analytics;
              };
            };
            for (var t = 0; t < analytics.methods.length; t++) {
              var e = analytics.methods[t];
              analytics[e] = analytics.factory(e);
            }
            analytics.load = function(t) {
              var e = document.createElement('script');
              e.type = 'text/javascript';
              e.async = !0;
              e.src =
                ('https:' === document.location.protocol
                  ? 'https://'
                  : 'http://') +
                'cdn.segment.com/analytics.js/v1/' +
                t +
                '/analytics.min.js';
              var n = document.getElementsByTagName('script')[0];
              n.parentNode.insertBefore(e, n);
            };
            analytics.SNIPPET_VERSION = '3.0.1';
            analytics.load('WDj0nSS7hpyxwL3evgbOzK755s0NUye6');
            analytics.page();
          }
      })();
    </script>

    <script>
      // Collapse Toggler
      $('button[data-toggle="kong-expand"]').on('click', function(e) {
        e.stopPropagation();
        var $this = $(this);
        $('#oss_subnav.expand').toggleClass('slideup');
        $($this.data('target')).toggleClass('kong-navbar-collapse--expand');
        $('nav.navbar.full-width').toggleClass('kong-navbar-collapse--expand');
        $this.toggleClass('active').attr('aria-expanded', true);
        $('.kong-navbar-collapse_section').removeClass('shift');
        $('.subnav, .trigger, .remove').removeClass('active');
        setTimeout(function() {
          $('#menu-primary-nav li').removeClass('active');
          $('.active-tab').removeClass('active-tab');
        }, 100);
      });

      var $window = $(window);

      function checkWidth() {
        var windowsize = $window.width();
        if (windowsize > 1080) {
          $('.navbar').removeClass('mobile-triggers');
          $('#menu-primary-nav li').removeClass('active');
          $('.active-tab').removeClass('active-tab');
        } else {
          $('.navbar').addClass('mobile-triggers');
        }
      }
      // Execute on load
      checkWidth();
      // Bind event listener
      $(window).resize(checkWidth);

      $('#menu-primary-nav .nav1 > a').click(function() {
        if ($('nav.navbar').hasClass('mobile-triggers')) {
          event.preventDefault();
          $('.nav3').removeClass('active');
          var position = $(this)
            .parent()
            .position();
          $(this)
            .parent()
            .toggleClass('active');
          $('body')
            .get(0)
            .style.setProperty(
              '--navPosition',
              (position.top - 75) * -1 + 'px'
            );
          $(this)
            .parent()
            .parent()
            .toggleClass('active-tab');
        }
      });

      $('#menu-primary-nav .nav3 > a').click(function() {
        if ($('nav.navbar').hasClass('mobile-triggers')) {
          event.preventDefault();
          $(this)
            .parent()
            .toggleClass('active');
        }
      });
    </script>
  </body>

  
</html>
