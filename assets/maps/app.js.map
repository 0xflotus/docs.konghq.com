{"version":3,"sources":["app.js","dropdown.js","affix.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["/* globals $, history, analytics */\r\n\r\n'use strict'\r\n\r\n$(function () {\r\n  var $window = $(window)\r\n  var $docs = $('#documentation')\r\n\r\n  $('.navbar-toggle').on('click', function () {\r\n    var $navbar = $($(this).data('target'))\r\n    $navbar.slideToggle(150)\r\n  })\r\n\r\n  $('.scroll-to').on('click', function (e) {\r\n    e.preventDefault()\r\n\r\n    $('html, body').animate({\r\n      scrollTop: $($(this).attr('href')).offset().top - 107 // Header height\r\n    }, 700)\r\n  })\r\n\r\n  // Change header download button color\r\n\r\n  if (!$('body#enterprise').length) {\r\n    var introSectionHeight = $('.section.intro-section').outerHeight() || 50\r\n    var $downloadBtn = $('.navbar-nav').find('.button')\r\n\r\n    $window.on('scroll', function () {\r\n      var scrollTop = $(this).scrollTop()\r\n\r\n      if (scrollTop > introSectionHeight) {\r\n        $downloadBtn.removeClass('button-dark').addClass('button-primary')\r\n      } else {\r\n        $downloadBtn.removeClass('button-primary').addClass('button-dark')\r\n      }\r\n    })\r\n  }\r\n\r\n  // Page section on contribute page\r\n\r\n  $('.toggle-page-section').on('click', function (e) {\r\n    e.preventDefault()\r\n    var $link = $(this)\r\n\r\n    $link.parent().next('.page-section').stop().slideToggle(300, function () {\r\n      $link.toggleClass('active')\r\n    })\r\n  })\r\n\r\n  // Tabs on download page\r\n\r\n  var $tabs = $('.tab-list li')\r\n  var $tabPanes = $('.tab-pane')\r\n\r\n  $tabs.on('click', function (e, disableTracking) {\r\n    e.preventDefault()\r\n\r\n    var tabId = $(this).find('a').attr('href')\r\n\r\n    $tabs.removeClass('active').filter(this).addClass('active')\r\n    $tabPanes.removeClass('active').filter(tabId).addClass('active')\r\n\r\n    if (history.pushState) {\r\n      history.pushState(null, null, tabId)\r\n    } else {\r\n      window.location.hash = tabId\r\n    }\r\n\r\n    if (!disableTracking) {\r\n      analytics.track('Choose installation method', {\r\n        installationMethod: tabId.substr(1)\r\n      })\r\n    }\r\n  })\r\n\r\n  if (window.location.hash) {\r\n    $tabs.find('a[href=\"' + window.location.hash + '\"]').trigger('click', true)\r\n  }\r\n\r\n  // Subscribe form\r\n\r\n  $('.subscribe-form').on('submit', function (e) {\r\n    e.preventDefault()\r\n\r\n    var form = $(this)\r\n    var email = form.find('[name=\"email\"]').val()\r\n    var time = new Date().toString()\r\n\r\n    var traits = {\r\n      email: email,\r\n      environment: 'kong',\r\n      newsletter_updates: true,\r\n      created_at: time\r\n    }\r\n\r\n    form.addClass('loading')\r\n\r\n    var track = function () {\r\n      form.addClass('complete')\r\n\r\n      analytics.track('request_newsletter_updates', {\r\n        email: email,\r\n        request_date: time\r\n      })\r\n    }\r\n\r\n    analytics.identify(email, traits, track)\r\n  })\r\n\r\n  // Enterprise page demo request form\r\n\r\n  $('.demo-request-form').on('submit', function (e) {\r\n    e.preventDefault()\r\n\r\n    var form = $(this)\r\n    var data = form.serializeArray()\r\n    var submitTime = new Date().toString()\r\n    var payload = {}\r\n    var fieldValues = {}\r\n    var relateiqFieldIds = {\r\n      title: 8,\r\n      tell_us_more: 6,\r\n      email: 7,\r\n      phone: 9,\r\n      deployment: 14,\r\n      company: 10,\r\n      name: 13,\r\n      environment: 16\r\n    }\r\n\r\n    form.addClass('loading')\r\n\r\n    for (var i = 0; i < data.length; i++) {\r\n      payload[data[i].name] = data[i].value\r\n    }\r\n\r\n    payload.environment = 'kong'\r\n\r\n    var traits = $.extend({\r\n      enterprise: true,\r\n      created_at: submitTime\r\n    }, payload)\r\n\r\n    analytics.identify(payload.email, traits, function () {\r\n      analytics.track('request_enterprise_demo', $.extend({\r\n        request_date: submitTime\r\n      }, payload))\r\n    })\r\n\r\n    for (var field in payload) {\r\n      if (payload[field]) {\r\n        fieldValues[relateiqFieldIds[field]] = [{\r\n          raw: payload[field]\r\n        }]\r\n      }\r\n    }\r\n\r\n    $.ajax({\r\n      url: 'https://mashaper-relateiq-v1.p.mashape.com/accounts',\r\n      method: 'POST',\r\n      headers: {\r\n        'authorization': 'Basic NTU2ZDcxYzdlNGIwMmM5ZTM3YjgxNzc1Ok9NbFNBVGM1QkFTOG1JbEtXZENMZFZ2Z3RqYQ==',\r\n        'x-mashape-key': 'mJUINHSWBYmshREqNlfTBKtbBHDZp1N7VKhjsnUIUo4f4r3pVj'\r\n      },\r\n      data: JSON.stringify({\r\n        name: payload.email,\r\n        fieldValues: fieldValues\r\n      })\r\n    }).always(function () {\r\n      form.addClass('complete')\r\n    })\r\n  })\r\n\r\n  // Docs page navigation\r\n  if ($docs.length) {\r\n    var $nav = $docs.find('.page-navigation')\r\n    var $navItems = $nav.find('a')\r\n    var hash = window.location.hash\r\n\r\n    var setNavItemActive = function () {\r\n      $navItems.removeClass('active').filter(this).addClass('active')\r\n    }\r\n\r\n    if (hash) {\r\n      $navItems.each(function () {\r\n        if ($(this).attr('href').indexOf(hash) !== -1) {\r\n          setNavItemActive.call(this)\r\n        }\r\n      })\r\n    }\r\n\r\n    $navItems.on('click', setNavItemActive)\r\n  }\r\n\r\n  // Analytics\r\n\r\n  $('[href^=\"/install\"]').each(function () {\r\n    var $link = $(this)\r\n\r\n    analytics.trackLink(this, 'Clicked download', {\r\n      section: $link.closest('.navbar').length ? 'header' : 'page',\r\n      pathname: window.location.pathname,\r\n      type: $link.hasClass('button') ? 'button' : 'link'\r\n    })\r\n  })\r\n\r\n  analytics.track(\r\n      'Viewed ' + $.trim(document.title.split('|').shift()) + ' page'\r\n  )\r\n\r\n  $('.plugin-plate-link').each(function () {\r\n    analytics.trackLink(this, 'Click on plugin', {\r\n      plugin_type: $(this).closest('.plugin-plate').find('h3').text()\r\n    })\r\n  })\r\n\r\n  $('#documentation .page-navigation a').each(function () {\r\n    analytics.trackLink(this, 'Click documentation link', {\r\n      documentation_name: $(this).text()\r\n    })\r\n  })\r\n\r\n  $('.community-plate a').each(function () {\r\n    analytics.trackLink(this, 'Click community link', {\r\n      community_type: $.trim($(this).closest('.community-plate').find('h4').text())\r\n    })\r\n  })\r\n\r\n  analytics.trackLink($('a[href=\"#comparison\"]')[0], 'Clicked Why Kong')\r\n})\r\n","/* ========================================================================\n * Bootstrap: dropdown.js v3.3.6\n * http://getbootstrap.com/javascript/#dropdowns\n * ========================================================================\n * Copyright 2011-2015 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // DROPDOWN CLASS DEFINITION\n  // =========================\n\n  var backdrop = '.dropdown-backdrop'\n  var toggle   = '[data-toggle=\"dropdown\"]'\n  var Dropdown = function (element) {\n    $(element).on('click.bs.dropdown', this.toggle)\n  }\n\n  Dropdown.VERSION = '3.3.6'\n\n  function getParent($this) {\n    var selector = $this.attr('data-target')\n\n    if (!selector) {\n      selector = $this.attr('href')\n      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\\s]*$)/, '') // strip for ie7\n    }\n\n    var $parent = selector && $(selector)\n\n    return $parent && $parent.length ? $parent : $this.parent()\n  }\n\n  function clearMenus(e) {\n    if (e && e.which === 3) return\n    $(backdrop).remove()\n    $(toggle).each(function () {\n      var $this         = $(this)\n      var $parent       = getParent($this)\n      var relatedTarget = { relatedTarget: this }\n\n      if (!$parent.hasClass('open')) return\n\n      if (e && e.type == 'click' && /input|textarea/i.test(e.target.tagName) && $.contains($parent[0], e.target)) return\n\n      $parent.trigger(e = $.Event('hide.bs.dropdown', relatedTarget))\n\n      if (e.isDefaultPrevented()) return\n\n      $this.attr('aria-expanded', 'false')\n      $parent.removeClass('open').trigger($.Event('hidden.bs.dropdown', relatedTarget))\n    })\n  }\n\n  Dropdown.prototype.toggle = function (e) {\n    var $this = $(this)\n\n    if ($this.is('.disabled, :disabled')) return\n\n    var $parent  = getParent($this)\n    var isActive = $parent.hasClass('open')\n\n    clearMenus()\n\n    if (!isActive) {\n      if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {\n        // if mobile we use a backdrop because click events don't delegate\n        $(document.createElement('div'))\n          .addClass('dropdown-backdrop')\n          .insertAfter($(this))\n          .on('click', clearMenus)\n      }\n\n      var relatedTarget = { relatedTarget: this }\n      $parent.trigger(e = $.Event('show.bs.dropdown', relatedTarget))\n\n      if (e.isDefaultPrevented()) return\n\n      $this\n        .trigger('focus')\n        .attr('aria-expanded', 'true')\n\n      $parent\n        .toggleClass('open')\n        .trigger($.Event('shown.bs.dropdown', relatedTarget))\n    }\n\n    return false\n  }\n\n  Dropdown.prototype.keydown = function (e) {\n    if (!/(38|40|27|32)/.test(e.which) || /input|textarea/i.test(e.target.tagName)) return\n\n    var $this = $(this)\n\n    e.preventDefault()\n    e.stopPropagation()\n\n    if ($this.is('.disabled, :disabled')) return\n\n    var $parent  = getParent($this)\n    var isActive = $parent.hasClass('open')\n\n    if (!isActive && e.which != 27 || isActive && e.which == 27) {\n      if (e.which == 27) $parent.find(toggle).trigger('focus')\n      return $this.trigger('click')\n    }\n\n    var desc = ' li:not(.disabled):visible a'\n    var $items = $parent.find('.dropdown-menu' + desc)\n\n    if (!$items.length) return\n\n    var index = $items.index(e.target)\n\n    if (e.which == 38 && index > 0)                 index--         // up\n    if (e.which == 40 && index < $items.length - 1) index++         // down\n    if (!~index)                                    index = 0\n\n    $items.eq(index).trigger('focus')\n  }\n\n\n  // DROPDOWN PLUGIN DEFINITION\n  // ==========================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this = $(this)\n      var data  = $this.data('bs.dropdown')\n\n      if (!data) $this.data('bs.dropdown', (data = new Dropdown(this)))\n      if (typeof option == 'string') data[option].call($this)\n    })\n  }\n\n  var old = $.fn.dropdown\n\n  $.fn.dropdown             = Plugin\n  $.fn.dropdown.Constructor = Dropdown\n\n\n  // DROPDOWN NO CONFLICT\n  // ====================\n\n  $.fn.dropdown.noConflict = function () {\n    $.fn.dropdown = old\n    return this\n  }\n\n\n  // APPLY TO STANDARD DROPDOWN ELEMENTS\n  // ===================================\n\n  $(document)\n    .on('click.bs.dropdown.data-api', clearMenus)\n    .on('click.bs.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })\n    .on('click.bs.dropdown.data-api', toggle, Dropdown.prototype.toggle)\n    .on('keydown.bs.dropdown.data-api', toggle, Dropdown.prototype.keydown)\n    .on('keydown.bs.dropdown.data-api', '.dropdown-menu', Dropdown.prototype.keydown)\n\n}(jQuery);\n","/* ========================================================================\n * Bootstrap: affix.js v3.3.6\n * http://getbootstrap.com/javascript/#affix\n * ========================================================================\n * Copyright 2011-2015 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // AFFIX CLASS DEFINITION\n  // ======================\n\n  var Affix = function (element, options) {\n    this.options = $.extend({}, Affix.DEFAULTS, options)\n\n    this.$target = $(this.options.target)\n      .on('scroll.bs.affix.data-api', $.proxy(this.checkPosition, this))\n      .on('click.bs.affix.data-api',  $.proxy(this.checkPositionWithEventLoop, this))\n\n    this.$element     = $(element)\n    this.affixed      = null\n    this.unpin        = null\n    this.pinnedOffset = null\n\n    this.checkPosition()\n  }\n\n  Affix.VERSION  = '3.3.6'\n\n  Affix.RESET    = 'affix affix-top affix-bottom'\n\n  Affix.DEFAULTS = {\n    offset: 0,\n    target: window\n  }\n\n  Affix.prototype.getState = function (scrollHeight, height, offsetTop, offsetBottom) {\n    var scrollTop    = this.$target.scrollTop()\n    var position     = this.$element.offset()\n    var targetHeight = this.$target.height()\n\n    if (offsetTop != null && this.affixed == 'top') return scrollTop < offsetTop ? 'top' : false\n\n    if (this.affixed == 'bottom') {\n      if (offsetTop != null) return (scrollTop + this.unpin <= position.top) ? false : 'bottom'\n      return (scrollTop + targetHeight <= scrollHeight - offsetBottom) ? false : 'bottom'\n    }\n\n    var initializing   = this.affixed == null\n    var colliderTop    = initializing ? scrollTop : position.top\n    var colliderHeight = initializing ? targetHeight : height\n\n    if (offsetTop != null && scrollTop <= offsetTop) return 'top'\n    if (offsetBottom != null && (colliderTop + colliderHeight >= scrollHeight - offsetBottom)) return 'bottom'\n\n    return false\n  }\n\n  Affix.prototype.getPinnedOffset = function () {\n    if (this.pinnedOffset) return this.pinnedOffset\n    this.$element.removeClass(Affix.RESET).addClass('affix')\n    var scrollTop = this.$target.scrollTop()\n    var position  = this.$element.offset()\n    return (this.pinnedOffset = position.top - scrollTop)\n  }\n\n  Affix.prototype.checkPositionWithEventLoop = function () {\n    setTimeout($.proxy(this.checkPosition, this), 1)\n  }\n\n  Affix.prototype.checkPosition = function () {\n    if (!this.$element.is(':visible')) return\n\n    var height       = this.$element.height()\n    var offset       = this.options.offset\n    var offsetTop    = offset.top\n    var offsetBottom = offset.bottom\n    var scrollHeight = Math.max($(document).height(), $(document.body).height())\n\n    if (typeof offset != 'object')         offsetBottom = offsetTop = offset\n    if (typeof offsetTop == 'function')    offsetTop    = offset.top(this.$element)\n    if (typeof offsetBottom == 'function') offsetBottom = offset.bottom(this.$element)\n\n    var affix = this.getState(scrollHeight, height, offsetTop, offsetBottom)\n\n    if (this.affixed != affix) {\n      if (this.unpin != null) this.$element.css('top', '')\n\n      var affixType = 'affix' + (affix ? '-' + affix : '')\n      var e         = $.Event(affixType + '.bs.affix')\n\n      this.$element.trigger(e)\n\n      if (e.isDefaultPrevented()) return\n\n      this.affixed = affix\n      this.unpin = affix == 'bottom' ? this.getPinnedOffset() : null\n\n      this.$element\n        .removeClass(Affix.RESET)\n        .addClass(affixType)\n        .trigger(affixType.replace('affix', 'affixed') + '.bs.affix')\n    }\n\n    if (affix == 'bottom') {\n      this.$element.offset({\n        top: scrollHeight - height - offsetBottom\n      })\n    }\n  }\n\n\n  // AFFIX PLUGIN DEFINITION\n  // =======================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.affix')\n      var options = typeof option == 'object' && option\n\n      if (!data) $this.data('bs.affix', (data = new Affix(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  var old = $.fn.affix\n\n  $.fn.affix             = Plugin\n  $.fn.affix.Constructor = Affix\n\n\n  // AFFIX NO CONFLICT\n  // =================\n\n  $.fn.affix.noConflict = function () {\n    $.fn.affix = old\n    return this\n  }\n\n\n  // AFFIX DATA-API\n  // ==============\n\n  $(window).on('load', function () {\n    $('[data-spy=\"affix\"]').each(function () {\n      var $spy = $(this)\n      var data = $spy.data()\n\n      data.offset = data.offset || {}\n\n      if (data.offsetBottom != null) data.offset.bottom = data.offsetBottom\n      if (data.offsetTop    != null) data.offset.top    = data.offsetTop\n\n      Plugin.call($spy, data)\n    })\n  })\n\n}(jQuery);\n"],"sourceRoot":"/source/"}