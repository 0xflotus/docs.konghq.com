<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/Article">
  

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Loadbalancing reference - v2.1.x | Kong - Open-Source API Management and Microservice Management</title>
  <meta name="description" content="Secure, Manage &amp; Extend your APIs or Microservices with plugins for authentication, logging, rate-limiting, transformations and more." />
  <meta name="author" content="KongHQ" />
  <meta property="og:title" content="Open-Source API Management and Microservice Management" />
  <meta property="og:site_name" content="Kong" />
  <!-- use share link for facebook -->
  <meta property="og:url" content="https://docs.konghq.com" />
  <meta property="og:description" content="Secure, Manage &amp; Extend your APIs or Microservices with plugins for authentication, logging, rate-limiting, transformations and more." />
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="en_US" />
  <meta
    property="og:image"
    content="https://docs.konghq.com/assets/images/share.png"
  />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@thekonginc" />
  <meta name="twitter:creator" content="@thekonginc" />
  <meta name="twitter:url" content="https://docs.konghq.com" />
  <meta name="twitter:description" content="Secure, Manage &amp; Extend your APIs or Microservices with plugins for authentication, logging, rate-limiting, transformations and more." />
  <meta
    name="twitter:image"
    content="https://docs.konghq.com/assets/images/share.png"
  />
  <meta property="fb:admins" content="227304446" />
  <meta property="fb:admins" content="576641408" />
  <meta
    name="google-site-verification"
    content="CrU3zp02dNKTe8NSAipL4NCPkrIjDXG8fViTZ-MIzP4"
  />
  <link
    rel="stylesheet"
    href="https://use.fontawesome.com/releases/v5.4.1/css/all.css"
    integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz"
    crossorigin="anonymous"
  />

  <!-- New Relic -->
  <script type="text/javascript">
/* eslint-disable */
window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var o=e[n]={exports:{}};t[n][0].call(o.exports,function(e){var o=t[n][1][e];return r(o||e)},o,o.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,n){function r(t){try{c.console&&console.log(t)}catch(e){}}var o,i=t("ee"),a=t(20),c={};try{o=localStorage.getItem("__nr_flags").split(","),console&&"function"==typeof console.log&&(c.console=!0,o.indexOf("dev")!==-1&&(c.dev=!0),o.indexOf("nr_dev")!==-1&&(c.nrDev=!0))}catch(s){}c.nrDev&&i.on("internal-error",function(t){r(t.stack)}),c.dev&&i.on("fn-err",function(t,e,n){r(n.stack)}),c.dev&&(r("NR AGENT IN DEVELOPMENT MODE"),r("flags: "+a(c,function(t,e){return t}).join(", ")))},{}],2:[function(t,e,n){function r(t,e,n,r,c){try{h?h-=1:o(c||new UncaughtException(t,e,n),!0)}catch(f){try{i("ierr",[f,s.now(),!0])}catch(d){}}return"function"==typeof u&&u.apply(this,a(arguments))}function UncaughtException(t,e,n){this.message=t||"Uncaught error with no additional information",this.sourceURL=e,this.line=n}function o(t,e){var n=e?null:s.now();i("err",[t,n])}var i=t("handle"),a=t(21),c=t("ee"),s=t("loader"),f=t("gos"),u=window.onerror,d=!1,p="nr@seenError",h=0;s.features.err=!0,t(1),window.onerror=r;try{throw new Error}catch(l){"stack"in l&&(t(13),t(12),"addEventListener"in window&&t(6),s.xhrWrappable&&t(14),d=!0)}c.on("fn-start",function(t,e,n){d&&(h+=1)}),c.on("fn-err",function(t,e,n){d&&!n[p]&&(f(n,p,function(){return!0}),this.thrown=!0,o(n))}),c.on("fn-end",function(){d&&!this.thrown&&h>0&&(h-=1)}),c.on("internal-error",function(t){i("ierr",[t,s.now(),!0])})},{}],3:[function(t,e,n){t("loader").features.ins=!0},{}],4:[function(t,e,n){function r(){M++,S=y.hash,this[u]=b.now()}function o(){M--,y.hash!==S&&i(0,!0);var t=b.now();this[l]=~~this[l]+t-this[u],this[d]=t}function i(t,e){E.emit("newURL",[""+y,e])}function a(t,e){t.on(e,function(){this[e]=b.now()})}var c="-start",s="-end",f="-body",u="fn"+c,d="fn"+s,p="cb"+c,h="cb"+s,l="jsTime",m="fetch",v="addEventListener",w=window,y=w.location,b=t("loader");if(w[v]&&b.xhrWrappable){var g=t(10),x=t(11),E=t(8),P=t(6),O=t(13),R=t(7),T=t(14),L=t(9),j=t("ee"),N=j.get("tracer");t(15),b.features.spa=!0;var S,M=0;j.on(u,r),j.on(p,r),j.on(d,o),j.on(h,o),j.buffer([u,d,"xhr-done","xhr-resolved"]),P.buffer([u]),O.buffer(["setTimeout"+s,"clearTimeout"+c,u]),T.buffer([u,"new-xhr","send-xhr"+c]),R.buffer([m+c,m+"-done",m+f+c,m+f+s]),E.buffer(["newURL"]),g.buffer([u]),x.buffer(["propagate",p,h,"executor-err","resolve"+c]),N.buffer([u,"no-"+u]),L.buffer(["new-jsonp","cb-start","jsonp-error","jsonp-end"]),a(T,"send-xhr"+c),a(j,"xhr-resolved"),a(j,"xhr-done"),a(R,m+c),a(R,m+"-done"),a(L,"new-jsonp"),a(L,"jsonp-end"),a(L,"cb-start"),E.on("pushState-end",i),E.on("replaceState-end",i),w[v]("hashchange",i,!0),w[v]("load",i,!0),w[v]("popstate",function(){i(0,M>1)},!0)}},{}],5:[function(t,e,n){function r(t){}if(window.performance&&window.performance.timing&&window.performance.getEntriesByType){var o=t("ee"),i=t("handle"),a=t(13),c=t(12),s="learResourceTimings",f="addEventListener",u="resourcetimingbufferfull",d="bstResource",p="resource",h="-start",l="-end",m="fn"+h,v="fn"+l,w="bstTimer",y="pushState",b=t("loader");b.features.stn=!0,t(8);var g=NREUM.o.EV;o.on(m,function(t,e){var n=t[0];n instanceof g&&(this.bstStart=b.now())}),o.on(v,function(t,e){var n=t[0];n instanceof g&&i("bst",[n,e,this.bstStart,b.now()])}),a.on(m,function(t,e,n){this.bstStart=b.now(),this.bstType=n}),a.on(v,function(t,e){i(w,[e,this.bstStart,b.now(),this.bstType])}),c.on(m,function(){this.bstStart=b.now()}),c.on(v,function(t,e){i(w,[e,this.bstStart,b.now(),"requestAnimationFrame"])}),o.on(y+h,function(t){this.time=b.now(),this.startPath=location.pathname+location.hash}),o.on(y+l,function(t){i("bstHist",[location.pathname+location.hash,this.startPath,this.time])}),f in window.performance&&(window.performance["c"+s]?window.performance[f](u,function(t){i(d,[window.performance.getEntriesByType(p)]),window.performance["c"+s]()},!1):window.performance[f]("webkit"+u,function(t){i(d,[window.performance.getEntriesByType(p)]),window.performance["webkitC"+s]()},!1)),document[f]("scroll",r,{passive:!0}),document[f]("keypress",r,!1),document[f]("click",r,!1)}},{}],6:[function(t,e,n){function r(t){for(var e=t;e&&!e.hasOwnProperty(u);)e=Object.getPrototypeOf(e);e&&o(e)}function o(t){c.inPlace(t,[u,d],"-",i)}function i(t,e){return t[1]}var a=t("ee").get("events"),c=t(23)(a,!0),s=t("gos"),f=XMLHttpRequest,u="addEventListener",d="removeEventListener";e.exports=a,"getPrototypeOf"in Object?(r(document),r(window),r(f.prototype)):f.prototype.hasOwnProperty(u)&&(o(window),o(f.prototype)),a.on(u+"-start",function(t,e){var n=t[1],r=s(n,"nr@wrapped",function(){function t(){if("function"==typeof n.handleEvent)return n.handleEvent.apply(n,arguments)}var e={object:t,"function":n}[typeof n];return e?c(e,"fn-",null,e.name||"anonymous"):n});this.wrapped=t[1]=r}),a.on(d+"-start",function(t){t[1]=this.wrapped||t[1]})},{}],7:[function(t,e,n){function r(t,e,n){var r=t[e];"function"==typeof r&&(t[e]=function(){var t=r.apply(this,arguments);return o.emit(n+"start",arguments,t),t.then(function(e){return o.emit(n+"end",[null,e],t),e},function(e){throw o.emit(n+"end",[e],t),e})})}var o=t("ee").get("fetch"),i=t(20);e.exports=o;var a=window,c="fetch-",s=c+"body-",f=["arrayBuffer","blob","json","text","formData"],u=a.Request,d=a.Response,p=a.fetch,h="prototype";u&&d&&p&&(i(f,function(t,e){r(u[h],e,s),r(d[h],e,s)}),r(a,"fetch",c),o.on(c+"end",function(t,e){var n=this;e?e.clone().arrayBuffer().then(function(t){n.rxSize=t.byteLength,o.emit(c+"done",[null,e],n)}):o.emit(c+"done",[t],n)}))},{}],8:[function(t,e,n){var r=t("ee").get("history"),o=t(23)(r);e.exports=r,o.inPlace(window.history,["pushState","replaceState"],"-")},{}],9:[function(t,e,n){function r(t){function e(){s.emit("jsonp-end",[],p),t.removeEventListener("load",e,!1),t.removeEventListener("error",n,!1)}function n(){s.emit("jsonp-error",[],p),s.emit("jsonp-end",[],p),t.removeEventListener("load",e,!1),t.removeEventListener("error",n,!1)}var r=t&&"string"==typeof t.nodeName&&"script"===t.nodeName.toLowerCase();if(r){var o="function"==typeof t.addEventListener;if(o){var a=i(t.src);if(a){var u=c(a),d="function"==typeof u.parent[u.key];if(d){var p={};f.inPlace(u.parent,[u.key],"cb-",p),t.addEventListener("load",e,!1),t.addEventListener("error",n,!1),s.emit("new-jsonp",[t.src],p)}}}}}function o(){return"addEventListener"in window}function i(t){var e=t.match(u);return e?e[1]:null}function a(t,e){var n=t.match(p),r=n[1],o=n[3];return o?a(o,e[r]):e[r]}function c(t){var e=t.match(d);return e&&e.length>=3?{key:e[2],parent:a(e[1],window)}:{key:t,parent:window}}var s=t("ee").get("jsonp"),f=t(23)(s);if(e.exports=s,o()){var u=/[?&](?:callback|cb)=([^&#]+)/,d=/(.*)\.([^.]+)/,p=/^(\w+)(\.|$)(.*)$/,h=["appendChild","insertBefore","replaceChild"];f.inPlace(HTMLElement.prototype,h,"dom-"),f.inPlace(HTMLHeadElement.prototype,h,"dom-"),f.inPlace(HTMLBodyElement.prototype,h,"dom-"),s.on("dom-start",function(t){r(t[0])})}},{}],10:[function(t,e,n){var r=t("ee").get("mutation"),o=t(23)(r),i=NREUM.o.MO;e.exports=r,i&&(window.MutationObserver=function(t){return this instanceof i?new i(o(t,"fn-")):i.apply(this,arguments)},MutationObserver.prototype=i.prototype)},{}],11:[function(t,e,n){function r(t){var e=a.context(),n=c(t,"executor-",e),r=new f(n);return a.context(r).getCtx=function(){return e},a.emit("new-promise",[r,e],e),r}function o(t,e){return e}var i=t(23),a=t("ee").get("promise"),c=i(a),s=t(20),f=NREUM.o.PR;e.exports=a,f&&(window.Promise=r,["all","race"].forEach(function(t){var e=f[t];f[t]=function(n){function r(t){return function(){a.emit("propagate",[null,!o],i),o=o||!t}}var o=!1;s(n,function(e,n){Promise.resolve(n).then(r("all"===t),r(!1))});var i=e.apply(f,arguments),c=f.resolve(i);return c}}),["resolve","reject"].forEach(function(t){var e=f[t];f[t]=function(t){var n=e.apply(f,arguments);return t!==n&&a.emit("propagate",[t,!0],n),n}}),f.prototype["catch"]=function(t){return this.then(null,t)},f.prototype=Object.create(f.prototype,{constructor:{value:r}}),s(Object.getOwnPropertyNames(f),function(t,e){try{r[e]=f[e]}catch(n){}}),a.on("executor-start",function(t){t[0]=c(t[0],"resolve-",this),t[1]=c(t[1],"resolve-",this)}),a.on("executor-err",function(t,e,n){t[1](n)}),c.inPlace(f.prototype,["then"],"then-",o),a.on("then-start",function(t,e){this.promise=e,t[0]=c(t[0],"cb-",this),t[1]=c(t[1],"cb-",this)}),a.on("then-end",function(t,e,n){this.nextPromise=n;var r=this.promise;a.emit("propagate",[r,!0],n)}),a.on("cb-end",function(t,e,n){a.emit("propagate",[n,!0],this.nextPromise)}),a.on("propagate",function(t,e,n){this.getCtx&&!e||(this.getCtx=function(){if(t instanceof Promise)var e=a.context(t);return e&&e.getCtx?e.getCtx():this})}),r.toString=function(){return""+f})},{}],12:[function(t,e,n){var r=t("ee").get("raf"),o=t(23)(r),i="equestAnimationFrame";e.exports=r,o.inPlace(window,["r"+i,"mozR"+i,"webkitR"+i,"msR"+i],"raf-"),r.on("raf-start",function(t){t[0]=o(t[0],"fn-")})},{}],13:[function(t,e,n){function r(t,e,n){t[0]=a(t[0],"fn-",null,n)}function o(t,e,n){this.method=n,this.timerDuration=isNaN(t[1])?0:+t[1],t[0]=a(t[0],"fn-",this,n)}var i=t("ee").get("timer"),a=t(23)(i),c="setTimeout",s="setInterval",f="clearTimeout",u="-start",d="-";e.exports=i,a.inPlace(window,[c,"setImmediate"],c+d),a.inPlace(window,[s],s+d),a.inPlace(window,[f,"clearImmediate"],f+d),i.on(s+u,r),i.on(c+u,o)},{}],14:[function(t,e,n){function r(t,e){d.inPlace(e,["onreadystatechange"],"fn-",c)}function o(){var t=this,e=u.context(t);t.readyState>3&&!e.resolved&&(e.resolved=!0,u.emit("xhr-resolved",[],t)),d.inPlace(t,y,"fn-",c)}function i(t){b.push(t),l&&(x?x.then(a):v?v(a):(E=-E,P.data=E))}function a(){for(var t=0;t<b.length;t++)r([],b[t]);b.length&&(b=[])}function c(t,e){return e}function s(t,e){for(var n in t)e[n]=t[n];return e}t(6);var f=t("ee"),u=f.get("xhr"),d=t(23)(u),p=NREUM.o,h=p.XHR,l=p.MO,m=p.PR,v=p.SI,w="readystatechange",y=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"],b=[];e.exports=u;var g=window.XMLHttpRequest=function(t){var e=new h(t);try{u.emit("new-xhr",[e],e),e.addEventListener(w,o,!1)}catch(n){try{u.emit("internal-error",[n])}catch(r){}}return e};if(s(h,g),g.prototype=h.prototype,d.inPlace(g.prototype,["open","send"],"-xhr-",c),u.on("send-xhr-start",function(t,e){r(t,e),i(e)}),u.on("open-xhr-start",r),l){var x=m&&m.resolve();if(!v&&!m){var E=1,P=document.createTextNode(E);new l(a).observe(P,{characterData:!0})}}else f.on("fn-end",function(t){t[0]&&t[0].type===w||a()})},{}],15:[function(t,e,n){function r(t){var e=this.params,n=this.metrics;if(!this.ended){this.ended=!0;for(var r=0;r<d;r++)t.removeEventListener(u[r],this.listener,!1);if(!e.aborted){if(n.duration=a.now()-this.startTime,4===t.readyState){e.status=t.status;var i=o(t,this.lastSize);if(i&&(n.rxSize=i),this.sameOrigin){var s=t.getResponseHeader("X-NewRelic-App-Data");s&&(e.cat=s.split(", ").pop())}}else e.status=0;n.cbTime=this.cbTime,f.emit("xhr-done",[t],t),c("xhr",[e,n,this.startTime])}}}function o(t,e){var n=t.responseType;if("json"===n&&null!==e)return e;var r="arraybuffer"===n||"blob"===n||"json"===n?t.response:t.responseText;return l(r)}function i(t,e){var n=s(e),r=t.params;r.host=n.hostname+":"+n.port,r.pathname=n.pathname,t.sameOrigin=n.sameOrigin}var a=t("loader");if(a.xhrWrappable){var c=t("handle"),s=t(16),f=t("ee"),u=["load","error","abort","timeout"],d=u.length,p=t("id"),h=t(19),l=t(18),m=window.XMLHttpRequest;a.features.xhr=!0,t(14),f.on("new-xhr",function(t){var e=this;e.totalCbs=0,e.called=0,e.cbTime=0,e.end=r,e.ended=!1,e.xhrGuids={},e.lastSize=null,h&&(h>34||h<10)||window.opera||t.addEventListener("progress",function(t){e.lastSize=t.loaded},!1)}),f.on("open-xhr-start",function(t){this.params={method:t[0]},i(this,t[1]),this.metrics={}}),f.on("open-xhr-end",function(t,e){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&e.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),f.on("send-xhr-start",function(t,e){var n=this.metrics,r=t[0],o=this;if(n&&r){var i=l(r);i&&(n.txSize=i)}this.startTime=a.now(),this.listener=function(t){try{"abort"===t.type&&(o.params.aborted=!0),("load"!==t.type||o.called===o.totalCbs&&(o.onloadCalled||"function"!=typeof e.onload))&&o.end(e)}catch(n){try{f.emit("internal-error",[n])}catch(r){}}};for(var c=0;c<d;c++)e.addEventListener(u[c],this.listener,!1)}),f.on("xhr-cb-time",function(t,e,n){this.cbTime+=t,e?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof n.onload||this.end(n)}),f.on("xhr-load-added",function(t,e){var n=""+p(t)+!!e;this.xhrGuids&&!this.xhrGuids[n]&&(this.xhrGuids[n]=!0,this.totalCbs+=1)}),f.on("xhr-load-removed",function(t,e){var n=""+p(t)+!!e;this.xhrGuids&&this.xhrGuids[n]&&(delete this.xhrGuids[n],this.totalCbs-=1)}),f.on("addEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-added",[t[1],t[2]],e)}),f.on("removeEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-removed",[t[1],t[2]],e)}),f.on("fn-start",function(t,e,n){e instanceof m&&("onload"===n&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=a.now()))}),f.on("fn-end",function(t,e){this.xhrCbStart&&f.emit("xhr-cb-time",[a.now()-this.xhrCbStart,this.onload,e],e)})}},{}],16:[function(t,e,n){e.exports=function(t){var e=document.createElement("a"),n=window.location,r={};e.href=t,r.port=e.port;var o=e.href.split("://");!r.port&&o[1]&&(r.port=o[1].split("/")[0].split("@").pop().split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=e.hostname||n.hostname,r.pathname=e.pathname,r.protocol=o[0],"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname);var i=!e.protocol||":"===e.protocol||e.protocol===n.protocol,a=e.hostname===document.domain&&e.port===n.port;return r.sameOrigin=i&&(!e.hostname||a),r}},{}],17:[function(t,e,n){function r(){}function o(t,e,n){return function(){return i(t,[f.now()].concat(c(arguments)),e?null:this,n),e?void 0:this}}var i=t("handle"),a=t(20),c=t(21),s=t("ee").get("tracer"),f=t("loader"),u=NREUM;"undefined"==typeof window.newrelic&&(newrelic=u);var d=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],p="api-",h=p+"ixn-";a(d,function(t,e){u[e]=o(p+e,!0,"api")}),u.addPageAction=o(p+"addPageAction",!0),u.setCurrentRouteName=o(p+"routeName",!0),e.exports=newrelic,u.interaction=function(){return(new r).get()};var l=r.prototype={createTracer:function(t,e){var n={},r=this,o="function"==typeof e;return i(h+"tracer",[f.now(),t,n],r),function(){if(s.emit((o?"":"no-")+"fn-start",[f.now(),r,o],n),o)try{return e.apply(this,arguments)}catch(t){throw s.emit("fn-err",[arguments,this,t],n),t}finally{s.emit("fn-end",[f.now()],n)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(t,e){l[e]=o(h+e)}),newrelic.noticeError=function(t){"string"==typeof t&&(t=new Error(t)),i("err",[t,f.now()])}},{}],18:[function(t,e,n){e.exports=function(t){if("string"==typeof t&&t.length)return t.length;if("object"==typeof t){if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if(!("undefined"!=typeof FormData&&t instanceof FormData))try{return JSON.stringify(t).length}catch(e){return}}}},{}],19:[function(t,e,n){var r=0,o=navigator.userAgent.match(/Firefox[\/\s](\d+\.\d+)/);o&&(r=+o[1]),e.exports=r},{}],20:[function(t,e,n){function r(t,e){var n=[],r="",i=0;for(r in t)o.call(t,r)&&(n[i]=e(r,t[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],21:[function(t,e,n){function r(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,o=n-e||0,i=Array(o<0?0:o);++r<o;)i[r]=t[e+r];return i}e.exports=r},{}],22:[function(t,e,n){e.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],23:[function(t,e,n){function r(t){return!(t&&t instanceof Function&&t.apply&&!t[a])}var o=t("ee"),i=t(21),a="nr@original",c=Object.prototype.hasOwnProperty,s=!1;e.exports=function(t,e){function n(t,e,n,o){function nrWrapper(){var r,a,c,s;try{a=this,r=i(arguments),c="function"==typeof n?n(r,a):n||{}}catch(f){p([f,"",[r,a,o],c])}u(e+"start",[r,a,o],c);try{return s=t.apply(a,r)}catch(d){throw u(e+"err",[r,a,d],c),d}finally{u(e+"end",[r,a,s],c)}}return r(t)?t:(e||(e=""),nrWrapper[a]=t,d(t,nrWrapper),nrWrapper)}function f(t,e,o,i){o||(o="");var a,c,s,f="-"===o.charAt(0);for(s=0;s<e.length;s++)c=e[s],a=t[c],r(a)||(t[c]=n(a,f?c+o:o,i,c))}function u(n,r,o){if(!s||e){var i=s;s=!0;try{t.emit(n,r,o,e)}catch(a){p([a,n,r,o])}s=i}}function d(t,e){if(Object.defineProperty&&Object.keys)try{var n=Object.keys(t);return n.forEach(function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){return t[n]=e,e}})}),e}catch(r){p([r])}for(var o in t)c.call(t,o)&&(e[o]=t[o]);return e}function p(e){try{t.emit("internal-error",e)}catch(n){}}return t||(t=o),n.inPlace=f,n.flag=a,n}},{}],ee:[function(t,e,n){function r(){}function o(t){function e(t){return t&&t instanceof r?t:t?s(t,c,i):i()}function n(n,r,o,i){if(!p.aborted||i){t&&t(n,r,o);for(var a=e(o),c=l(n),s=c.length,f=0;f<s;f++)c[f].apply(a,r);var d=u[y[n]];return d&&d.push([b,n,r,a]),a}}function h(t,e){w[t]=l(t).concat(e)}function l(t){return w[t]||[]}function m(t){return d[t]=d[t]||o(n)}function v(t,e){f(t,function(t,n){e=e||"feature",y[n]=e,e in u||(u[e]=[])})}var w={},y={},b={on:h,emit:n,get:m,listeners:l,context:e,buffer:v,abort:a,aborted:!1};return b}function i(){return new r}function a(){(u.api||u.feature)&&(p.aborted=!0,u=p.backlog={})}var c="nr@context",s=t("gos"),f=t(20),u={},d={},p=e.exports=o();p.backlog=u},{}],gos:[function(t,e,n){function r(t,e,n){if(o.call(t,e))return t[e];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return t[e]=r,r}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],handle:[function(t,e,n){function r(t,e,n,r){o.buffer([t],r),o.emit(t,e,n)}var o=t("ee").get("handle");e.exports=r,r.ee=o},{}],id:[function(t,e,n){function r(t){var e=typeof t;return!t||"object"!==e&&"function"!==e?-1:t===window?0:a(t,i,function(){return o++})}var o=1,i="nr@id",a=t("gos");e.exports=r},{}],loader:[function(t,e,n){function r(){if(!x++){var t=g.info=NREUM.info,e=p.getElementsByTagName("script")[0];if(setTimeout(u.abort,3e4),!(t&&t.licenseKey&&t.applicationID&&e))return u.abort();f(y,function(e,n){t[e]||(t[e]=n)}),s("mark",["onload",a()+g.offset],null,"api");var n=p.createElement("script");n.src="https://"+t.agent,e.parentNode.insertBefore(n,e)}}function o(){"complete"===p.readyState&&i()}function i(){s("mark",["domContent",a()+g.offset],null,"api")}function a(){return E.exists&&performance.now?Math.round(performance.now()):(c=Math.max((new Date).getTime(),c))-g.offset}var c=(new Date).getTime(),s=t("handle"),f=t(20),u=t("ee"),d=window,p=d.document,h="addEventListener",l="attachEvent",m=d.XMLHttpRequest,v=m&&m.prototype;NREUM.o={ST:setTimeout,SI:d.setImmediate,CT:clearTimeout,XHR:m,REQ:d.Request,EV:d.Event,PR:d.Promise,MO:d.MutationObserver};var w=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-spa-1071.min.js"},b=m&&v&&v[h]&&!/CriOS/.test(navigator.userAgent),g=e.exports={offset:c,now:a,origin:w,features:{},xhrWrappable:b};t(17),p[h]?(p[h]("DOMContentLoaded",i,!1),d[h]("load",r,!1)):(p[l]("onreadystatechange",o),d[l]("onload",r)),s("mark",["firstbyte",c],null,"api");var x=0,E=t(22)},{}]},{},["loader",2,15,5,3,4]);
;NREUM.info={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",licenseKey:"13e44ec848",applicationID:"187820761",sa:1}
</script>


  <!-- FullStory -->
  <!-- <script>
/* eslint-disable */
window['_fs_debug'] = false;
window['_fs_host'] = 'fullstory.com';
window['_fs_org'] = '7JS2S';
window['_fs_namespace'] = 'FS';
(function(m,n,e,t,l,o,g,y){
    if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;}
    g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];
    o=n.createElement(t);o.async=1;o.src='https://'+_fs_host+'/s/fs.js';
    y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);
    g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){g(l,v)};g.event=function(i,v){g('event',{n:i,p:v})};
    g.shutdown=function(){g("rec",!1)};g.restart=function(){g("rec",!0)};
    g.consent=function(a){g("consent",!arguments.length||a)};
    g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};
    g.clearUserCookie=function(){};
})(window,document,window['_fs_namespace'],'script','user');
</script>
 -->

  <!-- Delighted -->
  <script type="text/javascript">
/* eslint-disable */
  !function(e,t,r,n,a){if(!e[a]){for(var i=e[a]=[],s=0;s<r.length;s++){var c=r[s];i[c]=i[c]||function(e){return function(){var t=Array.prototype.slice.call(arguments);i.push([e,t])}}(c)}i.SNIPPET_VERSION="1.0.1";var o=t.createElement("script");o.type="text/javascript",o.async=!0,o.src="https://d2yyd1h5u9mauk.cloudfront.net/integrations/web/v1/library/"+n+"/"+a+".js";var u=t.getElementsByTagName("script")[0];u.parentNode.insertBefore(o,u)}}(window,document,["survey","reset","config","init","set","get","event","identify","track","page","screen","group","alias"],"Mvwmq6n6DhInaFYu","delighted");

  delighted.survey();
</script>


  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "name": "KongHQ",
      "url": "https://docs.konghq.com",
      "logo": "https://docs.konghq.com/assets/images/logo.png",
      "sameAs": [
        "https://www.facebook.com/konginc",
        "https://twitter.com/thekonginc",
        "https://plus.google.com/+mashape"
      ]
    }
  </script>

  <!-- Preload assets -->
  <link rel="dns-prefetch" href="//cloud.typography.com" />
  <link
    href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700"
    rel="stylesheet"
  />
  <link rel="dns-prefetch" href="//dev.visualwebsiteoptimizer.com" />
  <link rel="dns-prefetch" href="//cdn.segment.com" />

  <!-- Recaptcha -->
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>

  <!-- ##gulp-resource-hints## -->

  <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico" />
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"
  />
  <link
    rel="stylesheet"
    href="/assets/styles.css?v=1601569374"
  />

  <script>
    !(function(w) {
      var clearbit = (w.clearbit = w.clearbit || []);
      if (!clearbit.initialize)
        if (clearbit.invoked)
          w.console &&
            console.error &&
            console.error("Clearbit snippet included twice.");
        else {
          clearbit.invoked = !0;
          clearbit.methods = [
            "trackSubmit",
            "trackClick",
            "trackLink",
            "trackForm",
            "pageview",
            "identify",
            "reset",
            "group",
            "track",
            "ready",
            "alias",
            "page",
            "once",
            "off",
            "on"
          ];
          clearbit.factory = function(t) {
            return function() {
              var e = Array.prototype.slice.call(arguments);
              e.unshift(t);
              clearbit.push(e);
              return clearbit;
            };
          };
          for (var t = 0; t < clearbit.methods.length; t++) {
            var e = clearbit.methods[t];
            clearbit[e] = clearbit.factory(e);
          }
          clearbit.load = function(t) {
            var e = document.createElement("script");
            e.async = !0;
            e.src =
              ("https:" === document.location.protocol
                ? "https://"
                : "http://") +
              "x.clearbitjs.com/v1/" +
              t +
              "/clearbit.js";
            var n = document.getElementsByTagName("script")[0];
            n.parentNode.insertBefore(e, n);
          };
          clearbit.SNIPPET_VERSION = "3.1.0";
          clearbit.load("pk_1bdbdbad26342e32516473510e95c3ff");
          clearbit.page();
        }
    })(window);
  </script>

  
</head>

<!-- Kong Cookie Policy -->
<div class="cookie-policy-container">
  <p>In order to give you better service we use cookies. By continuing to use our website, you agree to the use of cookies as described in our <a href=" https://konghq.com/cookie-policy/">Cookie Policy</a>
  <button class="cookie-policy-accept btn button" type="submit">I Agree</button>
</div>



  <body
    id=""
    
    data-spy="scroll"
    data-target="#scroll-sidebar"
    data-offset="350"
  >
    <header
  class="navbar navbar-inverse navbar-toggleable-lg kong-navbar flex-row align-items-center fixed-top lower_nav expand"
>
  <div
    id="promo-banner"
    class="summit-header"
    style="
      background-image: url(https://2tjosk2rxzc21medji3nfn1g-wpengine.netdna-ssl.com/wp-content/uploads/2020/07/summit2020-scaled.jpg);
    "
  >
    <div class="container">
      <div class="closebanner"></div>
      <h4 class="countdown">
        <span><b class="days"></b> Days Until Kong Summit 2020: The Biggest Event
          for API Practitioners.<a
            href="https://konghq.com/kong-summit/?itm_source=website&amp;itm_medium=top-global-promo"
            style="font-size: 14px; font-weight: 345" target="_blank" rel="noopener"
            ><b style="font-weight: 900; letter-spacing: 0px"
              >Free tickets available now!</b
            ></a
          ></span
        >
      </h4>
      <h4 class="flip"">
        <span>Kong Summit 2020: The Biggest Event
          for API Practitioners.<a
            href="https://konghq.com/kong-summit/?itm_source=website&amp;itm_medium=top-global-promo"
            style="font-size: 14px; font-weight: 345" target="_blank" rel="noopener"
            ><b style="font-weight: 900; letter-spacing: 0px"
              >Join Live!</b
            ></a
          ></span
        >
      </h4>
    </div>
  </div>
  <div class="container d-flex">
    <a href="https://konghq.com/" class="navbar-brand col col-xl-auto">
      <img
        src="https://2tjosk2rxzc21medji3nfn1g-wpengine.netdna-ssl.com/wp-content/themes/konghq/assets/img/gradient-logo.svg"
        alt="Kong Logo"
      />
    </a>
    <button
      class="navbar-toggler align-self-center"
      type="button"
      data-toggle="kong-expand"
      data-target="#pagesNav"
      aria-controls="pagesNav"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <div></div>
      <div></div>
      <div></div>
    </button>
    <nav class="navbar full-width">
      <div
        class="collapse navbar-collapse col justify-content-md-end kong-navbar_nav"
      >
        <ul id="menu-primary-nav" class="menu">
          <li
            class="btn menu-item menu-item-type-custom menu-item-object-custom menu-item-12447 navbar-item"
          >
            <a
              href="https://konghq.com/get-started?itm_source=website&itm_medium=nav"
              class="nav-link"
              >Get Started</a
            >
          </li>
          <li
            id="menu-item-18416"
            class="multicol wide nav1 toplabel centered menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-18416 navbar-item"
          >
            <a href="#" class="nav-link">Products</a>
            <ul class="sub-menu">
              <li
                id="menu-item-18417"
                class="nav2 icon click menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-18417 navbar-item"
              >
                <a
                  href="https://konghq.com/products/kong-enterprise?itm_source=website&amp;itm_medium=nav"
                  class="nav-link"
                  ><img
                    alt="kong-enterprise"
                    src="/assets/images/nav/kong-logo.png"
                  />
                  Kong Enterprise</a
                >
                <ul class="sub-menu">
                  <li
                    id="menu-item-18418"
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-18418 navbar-item"
                  >
                    <a
                      href="https://konghq.com/products/kong-enterprise?itm_source=website&itm_medium=nav"
                      class="nav-link"
                      >Kong Enterprise
                      <p class="description">
                        End-to-end connectivity platform
                      </p></a
                    >
                  </li>
                  <li
                    id="menu-item-18419"
                    class="nav3 pb-0x menu-item menu-item-type-custom menu-item-object-custom menu-item-18419 navbar-item"
                  >
                    <a
                      href="https://konghq.com/products/kong-enterprise/kong-mesh/?itm_source=website&itm_medium=nav"
                      class="nav-link"
                      >Kong Mesh
                      <p class="description">Universal service mesh</p></a
                    >
                  </li>
                  <li
                    id="menu-item-18420"
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-18420 navbar-item"
                  >
                    <a
                      href="https://konghq.com/products/kong-enterprise/kong-studio?itm_source=website&amp;itm_medium=nav"
                      class="nav-link"
                      >Kong Studio
                      <p class="description">Empower your developers</p></a
                    >
                  </li>
                  <li
                    id="menu-item-18421"
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-18421 navbar-item"
                  >
                    <a
                      href="https://konghq.com/products/kong-enterprise/dev-portal?itm_source=website&amp;itm_medium=nav"
                      class="nav-link"
                      >Dev Portal
                      <p class="description">Accelerate innovation</p></a
                    >
                  </li>
                  <li
                    id="menu-item-18418"
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-18418 navbar-item"
                  >
                    <a
                      href="https://konghq.com/products/kong-enterprise/kong-manager?itm_source=website&amp;itm_medium=nav"
                      class="nav-link"
                      >Kong Manager
                      <p class="description">Manage all your services</p></a
                    >
                  </li>
                  <li
                    id="menu-item-18423"
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-18423 navbar-item"
                  >
                    <a
                      href="https://konghq.com/products/kong-enterprise/kong-immunity?itm_source=website&amp;itm_medium=nav"
                      class="nav-link"
                      >Kong Immunity
                      <p class="description">Autonomously identify issues</p></a
                    >
                  </li>
                  <li
                    id="menu-item-18424"
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-18424 navbar-item"
                  >
                    <a
                      href="https://konghq.com/products/kong-enterprise/kong-kubernetes?itm_source=website&amp;itm_medium=nav"
                      class="nav-link"
                      >Kong for Kubernetes
                      <p class="description">
                        Native Kubernetes Ingress Controller
                      </p></a
                    >
                  </li>
                  <li
                    id="menu-item-18425"
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-18425 navbar-item"
                  >
                    <a
                      href="https://konghq.com/products/kong-enterprise/enterprise-plugins/?itm_source=website&amp;itm_medium=nav"
                      class="nav-link"
                      >Enterprise Plugins
                      <p class="description">Instantly implement policies</p></a
                    >
                  </li>
                  <li
                    id="menu-item-18426"
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-18426 navbar-item"
                  >
                    <a
                      href="https://konghq.com/products/kong-enterprise/vitals/?itm_source=website&amp;itm_medium=nav"
                      class="nav-link"
                      >Kong Vitals
                      <p class="description">Monitor your Kong Enterprise</p></a
                    >
                  </li>
                  <li
                    id="menu-item-18427"
                    class="nav-button reverse menu-item menu-item-type-custom menu-item-object-custom menu-item-18427 navbar-item"
                  >
                    <a
                      href="https://konghq.com/get-started/?itm_source=website&amp;itm_medium=nav"
                      class="nav-link"
                      >Get Started</a
                    >
                  </li>
                </ul>
              </li>
              <li
                id="menu-item-18428"
                class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-18428 navbar-item"
              >
                <a href="#" class="nav-link"
                  >Built on an Open-source Foundation</a
                >
                <ul class="sub-menu">
                  <li
                    id="menu-item-18429"
                    class="icon menu-item menu-item-type-custom menu-item-object-custom menu-item-18429 navbar-item"
                  >
                    <a
                      href="https://konghq.com/kong/?itm_source=website&amp;itm_medium=nav"
                      class="nav-link"
                      ><img
                        alt="kong-gateway"
                        src="/assets/images/nav/kong-logo.png"
                      />
                      Kong Gateway
                      <p class="description">API Gateway</p></a
                    >
                  </li>
                  <li
                    id="menu-item-18430"
                    class="icon menu-item menu-item-type-custom menu-item-object-custom menu-item-18430 navbar-item"
                  >
                    <a
                      target="_blank"
                      rel="noopener noreferrer"
                      href="https://kuma.io/?itm_source=website&amp;itm_medium=nav"
                      class="nav-link"
                      ><img alt="kuma" src="/assets/images/nav/kuma-logo.svg" />
                      Kuma
                      <p class="description">Service Mesh</p></a
                    >
                  </li>
                  <li
                    id="menu-item-18431"
                    class="icon menu-item menu-item-type-custom menu-item-object-custom menu-item-18431 navbar-item"
                  >
                    <a
                      target="_blank"
                      rel="noopener noreferrer"
                      href="https://insomnia.rest/?itm_source=website&amp;itm_medium=nav"
                      class="nav-link"
                      ><img
                        alt="insomnia"
                        src="/assets/images/nav/insomnia-logo.svg"
                      />
                      Insomnia
                      <p class="description">API Design and Testing</p></a
                    >
                  </li>
                  <li
                    id="menu-item-18432"
                    class="nav-button menu-item menu-item-type-custom menu-item-object-custom menu-item-18432 navbar-item"
                  >
                    <a
                      href="https://konghq.com/get-started#install?itm_source=website&itm_medium=nav"
                      class="nav-link"
                      >Install</a
                    >
                  </li>
                </ul>
              </li>
              <li
                id="menu-item-18433"
                class="nav2 hidden menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-18433 navbar-item"
              >
                <a href="#" class="nav-link">Kubernetes &amp; Subscriptions</a>
                <ul class="sub-menu">
                  <li
                    id="menu-item-18434"
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-18434 navbar-item"
                  >
                    <a
                      href="https://konghq.com/solutions/kubernetes-ingress/?itm_source=website&amp;itm_medium=nav"
                      class="nav-link"
                      >Kubernetes Ingress Controller
                      <p class="description">Ingress and CRDs</p></a
                    >
                  </li>
                  <li
                    id="menu-item-18435"
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-18435 navbar-item"
                  >
                    <a
                      href="https://konghq.com/subscriptions/?itm_source=website&amp;itm_medium=nav"
                      class="nav-link"
                      >Subscriptions
                      <p class="description">
                        Kong Gateway and Enterprise features
                      </p></a
                    >
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li
            id="menu-item-12471"
            class="multicol wide nav1 toplabel menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-12471 navbar-item"
          >
            <a href="#" class="nav-link solutions">Solutions</a>
            <ul class="sub-menu">
              <li
                id="menu-item-12472"
                class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-12472 navbar-item"
              >
                <a href="#" class="nav-link use-cases">Use Cases</a>
                <ul class="sub-menu">
                  <li
                    id="menu-item-12473"
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12473 navbar-item"
                  >
                    <a
                      href="https://konghq.com/solutions/use-cases/decentralize-applications-and-services?itm_source=website&amp;itm_medium=nav"
                      class="nav-link decentralize-apps-and-services<p-class=&quot;description&quot;>accelerate-your-journey-into-microservices</p>"
                      >Decentralize Apps and Services
                      <p class="description">
                        Accelerate your journey into microservices
                      </p></a
                    >
                  </li>
                  <li
                    id="menu-item-14131"
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-14131 navbar-item"
                  >
                    <a
                      href="https://konghq.com/solutions/use-cases/secure-and-govern-apis-and-services/?itm_source=website&amp;itm_medium=nav"
                      class="nav-link secure-and-govern-apis<p-class=&quot;description&quot;>empower-teams-to-provide-security,-governance-and-compliance</p>"
                      >Secure and Govern APIs
                      <p class="description">
                        Empower teams to provide security, governance and
                        compliance
                      </p></a
                    >
                  </li>
                  <li
                    id="menu-item-17469"
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-17469 navbar-item"
                  >
                    <a
                      href="https://konghq.com/solutions/use-cases/create-a-developer-platform/?itm_source=website&amp;itm_medium=nav"
                      class="nav-link create-a-developer-platform<p-class=&quot;description&quot;>rapidly-design,-publish-and-consume-apis-and-services</p>"
                      >Create a Developer Platform
                      <p class="description">
                        Rapidly design, publish and consume APIs and services
                      </p></a
                    >
                  </li>
                </ul>
              </li>
              <li
                id="menu-item-17470"
                class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-17470 navbar-item"
              >
                <a href="#" class="nav-link deployment-patterns"
                  >Deployment Patterns</a
                >
                <ul class="sub-menu">
                  <li
                    id="menu-item-17471"
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-17471 navbar-item"
                  >
                    <a
                      href="https://konghq.com/solutions/gateway/?itm_source=website&amp;itm_medium=nav"
                      class="nav-link api-gateway<p-class=&quot;description&quot;>take-control-of-your-microservices-with-the-world's-most-popular-api-gateway</p>"
                      >API Gateway
                      <p class="description">
                        Take control of your microservices with the world’s most
                        popular API gateway
                      </p></a
                    >
                  </li>
                  <li
                    id="menu-item-17472"
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-17472 navbar-item"
                  >
                    <a
                      href="https://konghq.com/solutions/kubernetes-ingress/?itm_source=website&amp;itm_medium=nav"
                      class="nav-link kubernetes<p-class=&quot;description&quot;>own-your-kubernetes-cluster-by-using-kong-as-an-ingress-controller</p>"
                      >Kubernetes
                      <p class="description">
                        Own your Kubernetes cluster by using Kong as an Ingress
                        Controller
                      </p></a
                    >
                  </li>
                  <li
                    id="menu-item-17473"
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-17473 navbar-item"
                  >
                    <a
                      target="_blank"
                      rel="noopener noreferrer"
                      href="https://kuma.io/?itm_source=website&amp;itm_medium=nav"
                      class="nav-link service-mesh<p-class=&quot;description&quot;>build,-secure-and-observe-your-modern-service-mesh</p>"
                      >Service Mesh
                      <p class="description">
                        Build, secure and observe your modern Service Mesh
                      </p></a
                    >
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li
            class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12471 navbar-item"
          >
            <a href="/hub" class="nav-link">Plugins</a>
          </li>
          <li
            class="one-col nav1 menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-12475 navbar-item"
          >
            <a href="#" class="nav-link">Open Source</a>
            <ul class="sub-menu">
              <li
                class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-12476 navbar-item"
              >
                <a
                  href="https://konghq.com/get-started#install?itm_source=website&itm_medium=nav"
                  class="nav-link"
                  ><img src="/assets/images/nav/install.svg" /> Install Kong
                  Gateway</a
                >
              </li>
              <li
                class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-12477 navbar-item"
              >
                <a
                  href="https://konghq.com/community?itm_source=website&itm_medium=nav"
                  class="nav-link"
                  ><img src="/assets/images/nav/community.svg" /> Kong
                  Community</a
                >
              </li>
              <li
                class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-12478 navbar-item"
              >
                <a
                  target="_blank"
                  href="https://github.com/Kong/kubernetes-ingress-controller"
                  class="nav-link"
                  ><img src="/assets/images/nav/kubernetes.svg" /> Kubernetes
                  Ingress</a
                >
              </li>
              <li
                class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-12479 navbar-item"
              >
                <a target="_blank" href="https://kuma.io" class="nav-link"
                  ><img src="/assets/images/nav/logo-kuma-line.svg" /> Kuma</a
                >
              </li>
              <li
                class="nav2 hidden menu-item menu-item-type-custom menu-item-object-custom menu-item-12480 navbar-item"
              >
                <a
                  target="_blank"
                  href="https://insomnia.rest/"
                  class="nav-link"
                  ><img src="/assets/images/nav/insomnia.svg" /> Insomnia</a
                >
              </li>
            </ul>
          </li>
          <li
            class="multicol wide nav1 menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-12481 navbar-item docs"
          >
            <a
              target="_blank"
              href="https://docs.konghq.com/?itm_source=website&itm_medium=nav"
              class="nav-link"
              >Docs</a
            >
            <ul class="sub-menu">
              <li
                id="menu-item-12483"
                class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-12483 navbar-item"
              >
                <a class="nav-link">Documentation</a>
                <ul class="sub-menu">
                  <li
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12486 navbar-item"
                  >
                    <a
                      target="_blank"
                      href="https://docs.konghq.com/?itm_source=website&itm_medium=nav"
                      class="nav-link"
                      ><img
                        src="/assets/images/nav/deploy-plugins-master-launch.svg"
                      />
                      Kong Gateway</a
                    >
                  </li>
                  <li
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12487 navbar-item"
                  >
                    <a
                      target="_blank"
                      href="https://docs.konghq.com/enterprise/?itm_source=website&itm_medium=nav"
                      class="nav-link"
                      ><img
                        src="/assets/images/nav/deploy-plugins-master-launch.svg"
                      />
                      Kong Enterprise</a
                    >
                  </li>
                  <li
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12489 navbar-item"
                  >
                    <a
                      target="_blank"
                      href="https://docs.konghq.com/mesh/?itm_source=website&itm_medium=nav"
                      class="nav-link"
                      ><img
                        src="/assets/images/nav/deploy-plugins-master-launch.svg"
                      />
                      Kong Mesh</a
                    >
                  </li>
                  <li
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12488 navbar-item"
                  >
                    <a
                      target="_blank"
                      href="https://docs.konghq.com/studio/?itm_source=website&itm_medium=nav"
                      class="nav-link"
                      ><img
                        src="/assets/images/nav/deploy-plugins-master-launch.svg"
                      />
                      Kong Studio</a
                    >
                  </li>
                  <li
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12489 navbar-item"
                  >
                    <a
                      target="_blank"
                      href="https://docs.konghq.com/hub/?itm_source=website&itm_medium=nav"
                      class="nav-link"
                      ><img
                        src="/assets/images/nav/deploy-plugins-master-launch.svg"
                      />
                      Plugins Hub</a
                    >
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li
            class="multicol nav1 menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-12490 navbar-item"
          >
            <a href="#" class="nav-link">Resources</a>
            <ul class="sub-menu">
              <li
                class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-12491 navbar-item"
              >
                <a class="nav-link">Learning</a>
                <ul class="sub-menu">
                  <li
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12495 navbar-item"
                  >
                    <a
                      href="https://konghq.com/resources/?content=ebooks&itm_source=website&itm_medium=nav"
                      class="nav-link"
                      ><img src="/assets/images/nav/ebooks.svg" /> eBooks</a
                    >
                  </li>
                  <li
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12496 navbar-item"
                  >
                    <a
                      href="https://konghq.com/resources/?content=webinars&itm_source=website&itm_medium=nav"
                      class="nav-link"
                      ><img src="/assets/images/nav/webinars.svg" /> Webinars</a
                    >
                  </li>
                  <li
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12497 navbar-item"
                  >
                    <a
                      href="https://konghq.com/resources/?content=whitepaper&itm_source=website&itm_medium=nav"
                      class="nav-link"
                      ><img src="/assets/images/nav/briefs.svg" /> Briefs</a
                    >
                  </li>
                  <li
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12494 navbar-item"
                  >
                    <a
                      href="https://konghq.com/blog?itm_source=website&itm_medium=nav"
                      class="nav-link"
                      ><img src="/assets/images/nav/blog.svg" /> Blog</a
                    >
                  </li>
                </ul>
              </li>
              <li
                class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-12492 navbar-item"
              >
                <a class="nav-link">Community</a>
                <ul class="sub-menu">
                  <li
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12500 navbar-item"
                  >
                    <a
                      href="https://konghq.com/community?itm_source=website&itm_medium=nav"
                      class="nav-link"
                      ><img src="/assets/images/nav/meetups.svg" /> Community</a
                    >
                  </li>
                  <li
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12498 navbar-item"
                  >
                    <a
                      target="_blank"
                      href="https://discuss.konghq.com/?_ga=2.147363831.1919773651.1569859116-132287075.1554308608"
                      class="nav-link"
                      ><img src="/assets/images/nav/kong-nation.svg" /> Kong
                      Nation</a
                    >
                  </li>
                  <li
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12501 navbar-item"
                  >
                    <a
                      href="https://konghq.com/kong-summit?itm_source=website&itm_medium=nav"
                      class="nav-link"
                      ><img src="/assets/images/nav/summit.svg" /> Kong
                      Summit</a
                    >
                  </li>
                  <li
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12499 navbar-item"
                  >
                    <a
                      target="_blank"
                      href="https://github.com/Kong/"
                      class="nav-link"
                      ><img src="/assets/images/nav/github.svg" /> GitHub</a
                    >
                  </li>
                </ul>
              </li>
              <li
                class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-12493 navbar-item"
              >
                <a class="nav-link">Support</a>
                <ul class="sub-menu">
                  <li
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12502 navbar-item"
                  >
                    <a
                      target="_blank"
                      href="https://support.konghq.com/s/?itm_source=website&itm_medium=nav"
                      class="nav-link"
                      ><img src="/assets/images/nav/support-faqs.svg" />
                      Enterprise Support Portal</a
                    >
                  </li>
                  <li
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12503 navbar-item"
                  >
                    <a
                      href="https://konghq.com/faqs?itm_source=website&itm_medium=nav"
                      class="nav-link"
                      ><img src="/assets/images/nav/support-faqs.svg" /> FAQS</a
                    >
                  </li>
                  <li
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12502 navbar-item"
                  >
                    <a
                      href="https://konghq.com/support/kong-professional-services?itm_source=website&itm_medium=nav"
                      class="nav-link"
                      ><img src="/assets/images/nav/support-faqs.svg" /> Kong
                      Professional Services</a
                    >
                  </li>
                  <li
                    class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12503 navbar-item"
                  >
                    <a
                      href="https://konghq.com/support/kong-university/?itm_source=website&itm_medium=nav"
                      class="nav-link"
                      ><img src="/assets/images/nav/support-faqs.svg" /> Kong
                      University</a
                    >
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li
            id="menu-item-12504"
            class="one-col icn-sm nav1 menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-12504 navbar-item"
          >
            <a href="#" class="nav-link">Company</a>
            <ul class="sub-menu">
              <li
                class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-12505 navbar-item"
              >
                <a
                  href="https://konghq.com/about-kong-inc?itm_source=website&itm_medium=nav"
                  class="nav-link"
                  ><img src="/assets/images/nav/about.svg" /> About</a
                >
              </li>
              <li
                class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-12505 navbar-item"
              >
                <a
                  href="https://konghq.com/customers?itm_source=website&itm_medium=nav"
                  class="nav-link"
                  ><img src="/assets/images/nav/meetups.svg" /> Customers</a
                >
              </li>
              <li
                class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-12506 navbar-item"
              >
                <a
                  href="https://konghq.com/investors?itm_source=website&itm_medium=nav"
                  class="nav-link"
                  ><img src="/assets/images/nav/investors.svg" /> Investors</a
                >
              </li>
              <li
                class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-12507 navbar-item"
              >
                <a
                  href="https://konghq.com/careers?itm_source=website&itm_medium=nav"
                  class="nav-link"
                  ><img src="/assets/images/nav/careers.svg" /> Careers</a
                >
              </li>
              <li
                class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-12508 navbar-item"
              >
                <a
                  href="https://konghq.com/partners?itm_source=website&itm_medium=nav"
                  class="nav-link"
                  ><img src="/assets/images/nav/partners.svg" /> Partners</a
                >
              </li>
              <li
                class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-12509 navbar-item"
              >
                <a
                  href="https://konghq.com/press-room?itm_source=website&itm_medium=nav"
                  class="nav-link"
                  ><img src="/assets/images/nav/press.svg" /> Press</a
                >
              </li>
              <li
                class="nav2 menu-item menu-item-type-custom menu-item-object-custom menu-item-12510 navbar-item"
              >
                <a
                  href="https://konghq.com/contact?itm_source=website&itm_medium=nav"
                  class="nav-link"
                  ><img src="/assets/images/nav/contact.svg" /> Contact</a
                >
              </li>
            </ul>
          </li>
          <li
            class="demo-btn menu-item menu-item-type-custom menu-item-object-custom menu-item-12511 navbar-item"
          >
            <a
              href="https://konghq.com/get-started?itm_source=website&itm_medium=nav"
              class="nav-link"
              >Get Started</a
            >
          </li>
        </ul>
      </div>
    </nav>
  </div>
</header>


    <div class="page v2 ">
  <header class="page-header">
    <div class="page-header-bg"></div>
    <div class="container">
      <nav class="docs-navigation v2">
        <a href="/"  class="active" >Kong Gateway</a>
        <a href="/enterprise" >Kong Enterprise</a>
        <a href="/mesh" >Kong Mesh</a>
        <a href="/getting-started-guide/latest/overview" >Getting Started</a>

        <div class="header-actions">
          <div class="search-version-row">
            
            <div class="versions-dropdown dropdown no-right-border">
              <button class="page-header-btn" id="version-dropdown" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Version 2.1.x
                 <em>(latest)</em>
                <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="version-dropdown">
                
                
                <li  class="active" >
                <li  class="active" >
                  <a href="/2.1.x/loadbalancing/"
                     class="active" 
                    data-version-id="2.1.x"
                  >
                  2.1.x
                   <em>(latest)</em>
                  </a>
                </li>
                
                
                <li >
                <li >
                  <a href="/2.0.x/loadbalancing/"
                    
                    data-version-id="2.0.x"
                  >
                  2.0.x
                  
                  </a>
                </li>
                
                
                <li >
                <li >
                  <a href="/1.5.x/loadbalancing/"
                    
                    data-version-id="1.5.x"
                  >
                  1.5.x
                  
                  </a>
                </li>
                
                
                <li >
                <li >
                  <a href="/1.4.x/loadbalancing/"
                    
                    data-version-id="1.4.x"
                  >
                  1.4.x
                  
                  </a>
                </li>
                
                
                <li >
                <li >
                  <a href="/1.3.x/loadbalancing/"
                    
                    data-version-id="1.3.x"
                  >
                  1.3.x
                  
                  </a>
                </li>
                
                
                <li >
                <li >
                  <a href="/1.2.x/loadbalancing/"
                    
                    data-version-id="1.2.x"
                  >
                  1.2.x
                  
                  </a>
                </li>
                
                
                <li >
                <li >
                  <a href="/1.1.x/loadbalancing/"
                    
                    data-version-id="1.1.x"
                  >
                  1.1.x
                  
                  </a>
                </li>
                
                
                <li >
                <li >
                  <a href="/1.0.x/loadbalancing/"
                    
                    data-version-id="1.0.x"
                  >
                  1.0.x
                  
                  </a>
                </li>
                
                
                <li >
                <li >
                  <a href="/0.14.x/loadbalancing/"
                    
                    data-version-id="0.14.x"
                  >
                  0.14.x
                  
                  </a>
                </li>
                
                
                <li >
                <li >
                  <a href="/0.13.x/loadbalancing/"
                    
                    data-version-id="0.13.x"
                  >
                  0.13.x
                  
                  </a>
                </li>
                
                
                <li >
                <li >
                  <a href="/0.12.x/loadbalancing/"
                    
                    data-version-id="0.12.x"
                  >
                  0.12.x
                  
                  </a>
                </li>
                
                
                <li >
                <li >
                  <a href="/0.11.x/loadbalancing/"
                    
                    data-version-id="0.11.x"
                  >
                  0.11.x
                  
                  </a>
                </li>
                
                
                <li >
                <li >
                  <a href="/0.10.x/loadbalancing/"
                    
                    data-version-id="0.10.x"
                  >
                  0.10.x
                  
                  </a>
                </li>
                
                
                <li >
                <li >
                  <a href="/0.9.x"
                    
                    data-version-id="0.9.x"
                  >
                  0.9.x
                  
                  </a>
                </li>
                
                
                <li >
                <li >
                  <a href="/0.8.x"
                    
                    data-version-id="0.8.x"
                  >
                  0.8.x
                  
                  </a>
                </li>
                
                
                <li >
                <li >
                  <a href="/0.7.x"
                    
                    data-version-id="0.7.x"
                  >
                  0.7.x
                  
                  </a>
                </li>
                
                
                <li >
                <li >
                  <a href="/0.6.x"
                    
                    data-version-id="0.6.x"
                  >
                  0.6.x
                  
                  </a>
                </li>
                
                
                <li >
                <li >
                  <a href="/0.5.x"
                    
                    data-version-id="0.5.x"
                  >
                  0.5.x
                  
                  </a>
                </li>
                
                
                <li >
                <li >
                  <a href="/0.4.x"
                    
                    data-version-id="0.4.x"
                  >
                  0.4.x
                  
                  </a>
                </li>
                
                
                <li >
                <li >
                  <a href="/0.3.x"
                    
                    data-version-id="0.3.x"
                  >
                  0.3.x
                  
                  </a>
                </li>
                
                
                <li >
                <li >
                  <a href="/0.2.x"
                    
                    data-version-id="0.2.x"
                  >
                  0.2.x
                  
                  </a>
                </li>
                
              </ul>
            </div>
            
            
            <div class="dropdown" id="searchBar">
              <div id="getkong-algolia-search" class="search-input v2">
                <img class="icon" src="/assets/images/icons/icn-magnifying-glass.svg" alt="search">
                <input type="text" placeholder="Type to search" id="getkong-algolia-search-input" />
              </div>
            </div>
          </div>
          <img id="search-version-icon" src="/assets/images/icons/icn-magnifying-glass.svg" alt="search">
          
          <div class="edit-this-page v2">
            <a target="_blank" href="https://github.com/Kong/docs.konghq.com/tree/master/app/2.1.x/loadbalancing.md">
              <img src="/assets/images/logos/logo-github.svg" alt="github"/>
            </a>
          </div>
        </div>
      </nav>

      <div class="title-version-search-container">
        <div class="page-header-title">
          <h1>Loadbalancing reference</h1>
          <h2></h2>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <aside class="docs-sidebar">
  <i class="fa fa-times close-sidebar"></i>
  

  <ul class="accordion-container">
    
    





<li class="accordion-item">
  
  <input id="accordion-1" type="checkbox" />
  
  
  <label for="accordion-1">
    
    <img src="/assets/images/icons/documentation/icn-quickstart-color.svg" alt="icon">
    
    
    Getting Started
    
    
    <i class="fa fa-chevron-down"></i>
    
  </label>
  
  <div>
    
<ul class="items">
  
  
  
  
  
  <li>
    <a href="/2.1.x/../../getting-started-guide/latest/overview"  >
      Overview
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/../../getting-started-guide/latest/prepare"  >
      Prepare to Administer
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/../../getting-started-guide/latest/expose-services"  >
      Expose your Services
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/../../getting-started-guide/latest/protect-services"  >
      Protect your Services
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/../../getting-started-guide/latest/improve-performance"  >
      Improve Performance
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/../../getting-started-guide/latest/secure-services"  >
      Secure Services
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/../../getting-started-guide/latest/load-balancing"  >
      Set Up Intelligent Load Balancing
    </a>
  </li>
  
  
</ul>

  </div>
</li>


    
    





<li class="accordion-item">
  
  <input id="accordion-2" type="checkbox" />
  
  
  <label for="accordion-2">
    
    <img src="/assets/images/icons/documentation/icn-references-color.svg" alt="icon">
    
    
    Guides &amp; References
    
    
    <i class="fa fa-chevron-down"></i>
    
  </label>
  
  <div>
    
<ul class="items">
  
  
  
  
  
  <li>
    <a href="/2.1.x/getting-started/introduction"  >
      Quickstart Guide
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/getting-started/quickstart"  >
      Five-minute quickstart
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/getting-started/configuring-a-service"  >
      Configuring a Service
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/getting-started/configuring-a-grpc-service"  >
      Configuring a gRPC Service
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/getting-started/enabling-plugins"  >
      Enabling Plugins
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/getting-started/adding-consumers"  >
      Adding Consumers
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/configuration"  >
      Configuration reference
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/cli"  >
      CLI reference
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/proxy"  >
      Proxy reference
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/auth"  >
      Authentication reference
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/loadbalancing"  class="active">
      Load balancing reference
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/health-checks-circuit-breakers"  >
      Health checks and circuit breakers reference
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/hybrid-mode"  >
      Hybrid Mode
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/go"  >
      Go Plugins
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/clustering"  >
      Clustering reference
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/db-less-and-declarative-config"  >
      DB-less &amp; Declarative Configuration Format
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/sizing-guidelines"  >
      Resource Sizing Guidelines
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/logging"  >
      Logging reference
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/network"  >
      Network &amp; Firewall
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/secure-admin-api"  >
      Securing the Admin API
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/systemd"  >
      Control Kong Community Gateway through systemd
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/upgrading"  >
      Upgrade Guide
    </a>
  </li>
  
  
  
  
  





<li class="accordion-item">
  
  <input id="accordion-2-23" type="checkbox" />
  
  
  <label for="accordion-2-23">
    
    
    <a href="/2.1.x/plugin-development/">Plugin Development Guide</a>
    
    
    <i class="fa fa-chevron-down"></i>
    
  </label>
  
  <div>
    
<ul class="items">
  
  
  
  
  
  <li>
    <a href="/2.1.x/plugin-development"  >
      Introduction
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/plugin-development/file-structure"  >
      File structure
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/plugin-development/custom-logic"  >
      Implementing custom logic
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/plugin-development/plugin-configuration"  >
      Plugin configuration
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/plugin-development/access-the-datastore"  >
      Accessing the datastore
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/plugin-development/custom-entities"  >
      Storing custom entities
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/plugin-development/entities-cache"  >
      Caching custom entities
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/plugin-development/admin-api"  >
      Extending the Admin API
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/plugin-development/tests"  >
      Writing tests
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/plugin-development/distribution"  >
      (un)Installing your plugin
    </a>
  </li>
  
  
</ul>

  </div>
</li>


  
  
  
  
  





<li class="accordion-item">
  
  <input id="accordion-2-24" type="checkbox" />
  
  
  <label for="accordion-2-24">
    
    
    <a href="/2.1.x/pdk/">Plugin Development Kit</a>
    
    
    <i class="fa fa-chevron-down"></i>
    
  </label>
  
  <div>
    
<ul class="items">
  
  
  
  
  
  <li>
    <a href="/2.1.x/pdk/kong.client"  >
      kong.client
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/pdk/kong.client.tls"  >
      kong.client.tls
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/pdk/kong.ctx"  >
      kong.ctx
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/pdk/kong.ip"  >
      kong.ip
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/pdk/kong.log"  >
      kong.log
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/pdk/kong.nginx"  >
      kong.nginx
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/pdk/kong.node"  >
      kong.node
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/pdk/kong.request"  >
      kong.request
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/pdk/kong.response"  >
      kong.response
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/pdk/kong.router"  >
      kong.router
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/pdk/kong.service"  >
      kong.service
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/pdk/kong.service.request"  >
      kong.service.request
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/pdk/kong.service.response"  >
      kong.service.response
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/pdk/kong.table"  >
      kong.table
    </a>
  </li>
  
  
</ul>

  </div>
</li>


  
  
</ul>

  </div>
</li>


    
    





<li class="accordion-item">
  
  <input id="accordion-3" type="checkbox" />
  
  
  <label for="accordion-3">
    
    <img src="/assets/images/icons/documentation/icn-admin-api-color.svg" alt="icon">
    
    
    <a href="/2.1.x/admin-api/">Admin API</a>
    
    
    <i class="fa fa-chevron-down"></i>
    
  </label>
  
  <div>
    
<ul class="items">
  
  
  
  
  
  <li>
    <a href="/2.1.x/db-less-admin-api"  >
      DB-less
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/db-less-admin-api/#declarative-configuration"  >
      Declarative Configuration
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#supported-content-types"  >
      Supported Content Types
    </a>
  </li>
  
  
  
  
  





<li class="accordion-item">
  
  <input id="accordion-3-4" type="checkbox" />
  
  
  <label for="accordion-3-4">
    
    
    <a href="/2.1.x/admin-api/#information-routes">Information Routes</a>
    
    
    <i class="fa fa-chevron-down"></i>
    
  </label>
  
  <div>
    
<ul class="items">
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#retrieve-node-information"  >
      Retrieve Node Information
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#list-available-endpoints"  >
      List Available Endpoints
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#validate-a-configuration-against-a-schema"  >
      Validate A Configuration against A Schema
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#retrieve-entity-schema"  >
      Retrieve Entity Schema
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#retrieve-plugin-schema"  >
      Retrieve Plugin Schema
    </a>
  </li>
  
  
</ul>

  </div>
</li>


  
  
  
  
  





<li class="accordion-item">
  
  <input id="accordion-3-5" type="checkbox" />
  
  
  <label for="accordion-3-5">
    
    
    <a href="/2.1.x/admin-api/#health-routes">Health Routes</a>
    
    
    <i class="fa fa-chevron-down"></i>
    
  </label>
  
  <div>
    
<ul class="items">
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#retrieve-node-status"  >
      Retrieve Node Status
    </a>
  </li>
  
  
</ul>

  </div>
</li>


  
  
  
  
  





<li class="accordion-item">
  
  <input id="accordion-3-6" type="checkbox" />
  
  
  <label for="accordion-3-6">
    
    
    <a href="/2.1.x/admin-api/#tags">Tags</a>
    
    
    <i class="fa fa-chevron-down"></i>
    
  </label>
  
  <div>
    
<ul class="items">
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#list-all-tags"  >
      List All Tags
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#list-entity-ids-by-tag"  >
      List Entity Ids by Tag
    </a>
  </li>
  
  
</ul>

  </div>
</li>


  
  
  
  
  





<li class="accordion-item">
  
  <input id="accordion-3-7" type="checkbox" />
  
  
  <label for="accordion-3-7">
    
    
    <a href="/2.1.x/admin-api/#service-object">Service Object</a>
    
    
    <i class="fa fa-chevron-down"></i>
    
  </label>
  
  <div>
    
<ul class="items">
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#add-service"  >
      Add Service
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#list-services"  >
      List Services
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#retrieve-service"  >
      Retrieve Service
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#update-service"  >
      Update Service
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#update-or-create-service"  >
      Update Or Create Service
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#delete-service"  >
      Delete Service
    </a>
  </li>
  
  
</ul>

  </div>
</li>


  
  
  
  
  





<li class="accordion-item">
  
  <input id="accordion-3-8" type="checkbox" />
  
  
  <label for="accordion-3-8">
    
    
    <a href="/2.1.x/admin-api/#route-object">Route Object</a>
    
    
    <i class="fa fa-chevron-down"></i>
    
  </label>
  
  <div>
    
<ul class="items">
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#add-route"  >
      Add Route
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#list-routes"  >
      List Routes
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#retrieve-route"  >
      Retrieve Route
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#update-route"  >
      Update Route
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#update-or-create-route"  >
      Update Or Create Route
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#delete-route"  >
      Delete Route
    </a>
  </li>
  
  
</ul>

  </div>
</li>


  
  
  
  
  





<li class="accordion-item">
  
  <input id="accordion-3-9" type="checkbox" />
  
  
  <label for="accordion-3-9">
    
    
    <a href="/2.1.x/admin-api/#consumer-object">Consumer Object</a>
    
    
    <i class="fa fa-chevron-down"></i>
    
  </label>
  
  <div>
    
<ul class="items">
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#add-consumer"  >
      Add Consumer
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#list-consumers"  >
      List Consumers
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#retrieve-consumer"  >
      Retrieve Consumer
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#update-consumer"  >
      Update Consumer
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#update-or-create-consumer"  >
      Update Or Create Consumer
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#delete-consumer"  >
      Delete Consumer
    </a>
  </li>
  
  
</ul>

  </div>
</li>


  
  
  
  
  





<li class="accordion-item">
  
  <input id="accordion-3-10" type="checkbox" />
  
  
  <label for="accordion-3-10">
    
    
    <a href="/2.1.x/admin-api/#plugin-object">Plugin Object</a>
    
    
    <i class="fa fa-chevron-down"></i>
    
  </label>
  
  <div>
    
<ul class="items">
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#add-plugin"  >
      Add Plugin
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#list-plugins"  >
      List Plugins
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#retrieve-plugin"  >
      Retrieve Plugin
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#update-plugin"  >
      Update Plugin
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#update-or-create-plugin"  >
      Update Or Create Plugin
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#delete-plugin"  >
      Delete Plugin
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#retrieve-enabled-plugins"  >
      Retrieve Enabled Plugins
    </a>
  </li>
  
  
</ul>

  </div>
</li>


  
  
  
  
  





<li class="accordion-item">
  
  <input id="accordion-3-11" type="checkbox" />
  
  
  <label for="accordion-3-11">
    
    
    <a href="/2.1.x/admin-api/#certificate-object">Certificate Object</a>
    
    
    <i class="fa fa-chevron-down"></i>
    
  </label>
  
  <div>
    
<ul class="items">
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#add-certificate"  >
      Add Certificate
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#list-certificates"  >
      List Certificates
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#retrieve-certificate"  >
      Retrieve Certificate
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#update-certificate"  >
      Update Certificate
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#update-or-create-certificate"  >
      Update Or Create Certificate
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#delete-certificate"  >
      Delete Certificate
    </a>
  </li>
  
  
</ul>

  </div>
</li>


  
  
  
  
  





<li class="accordion-item">
  
  <input id="accordion-3-12" type="checkbox" />
  
  
  <label for="accordion-3-12">
    
    
    <a href="/2.1.x/admin-api/#ca-certificate-object">CA Certificate Object</a>
    
    
    <i class="fa fa-chevron-down"></i>
    
  </label>
  
  <div>
    
<ul class="items">
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#add-ca-certificate"  >
      Add CA Certificate
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#list-ca-certificates"  >
      List CA Certificates
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#retrieve-ca-certificate"  >
      Retrieve CA Certificate
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#update-ca-certificate"  >
      Update CA Certificate
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#update-or-create-ca-certificate"  >
      Update Or Create CA Certificate
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#delete-ca-certificate"  >
      Delete CA Certificate
    </a>
  </li>
  
  
</ul>

  </div>
</li>


  
  
  
  
  





<li class="accordion-item">
  
  <input id="accordion-3-13" type="checkbox" />
  
  
  <label for="accordion-3-13">
    
    
    <a href="/2.1.x/admin-api/#sni-object">SNI Object</a>
    
    
    <i class="fa fa-chevron-down"></i>
    
  </label>
  
  <div>
    
<ul class="items">
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#add-sni"  >
      Add SNI
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#list-snis"  >
      List SNIs
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#retrieve-sni"  >
      Retrieve SNI
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#update-sni"  >
      Update SNI
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#update-or-create-sni"  >
      Update Or Create SNI
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#delete-sni"  >
      Delete SNI
    </a>
  </li>
  
  
</ul>

  </div>
</li>


  
  
  
  
  





<li class="accordion-item">
  
  <input id="accordion-3-14" type="checkbox" />
  
  
  <label for="accordion-3-14">
    
    
    <a href="/2.1.x/admin-api/#upstream-object">Upstream Object</a>
    
    
    <i class="fa fa-chevron-down"></i>
    
  </label>
  
  <div>
    
<ul class="items">
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#add-upstream"  >
      Add Upstream
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#list-upstreams"  >
      List Upstreams
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#retrieve-upstream"  >
      Retrieve Upstream
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#update-upstream"  >
      Update Upstream
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#update-or-create-upstream"  >
      Update Or Create Upstream
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#delete-upstream"  >
      Delete Upstream
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#show-upstream-health-for-node"  >
      Show Upstream Health for Node
    </a>
  </li>
  
  
</ul>

  </div>
</li>


  
  
  
  
  





<li class="accordion-item">
  
  <input id="accordion-3-15" type="checkbox" />
  
  
  <label for="accordion-3-15">
    
    
    <a href="/2.1.x/admin-api/#target-object">Target Object</a>
    
    
    <i class="fa fa-chevron-down"></i>
    
  </label>
  
  <div>
    
<ul class="items">
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#add-target"  >
      Add Target
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#list-targets"  >
      List Targets
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#delete-target"  >
      Delete Target
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#set-target-address-as-healthy"  >
      Set Target Address As Healthy
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#set-target-address-as-unhealthy"  >
      Set Target Address As Unhealthy
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#set-target-as-healthy"  >
      Set Target As Healthy
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#set-target-as-unhealthy"  >
      Set Target As Unhealthy
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/admin-api/#list-all-targets"  >
      List All Targets
    </a>
  </li>
  
  
</ul>

  </div>
</li>


  
  
</ul>

  </div>
</li>


    
    





<li class="accordion-item">
  
  <input id="accordion-4" type="checkbox" />
  
  
  <label for="accordion-4">
    
    <img src="/assets/images/icons/documentation/icn-kubernetes-color.svg" alt="icon">
    
    
    <a href="/2.1.x/kong-for-kubernetes/">Kong for Kubernetes</a>
    
    
    <i class="fa fa-chevron-down"></i>
    
  </label>
  
  <div>
    
<ul class="items">
  
  
  
  
  
  <li>
    <a href="/2.1.x/kong-for-kubernetes/install"  >
      Install Kong for Kubernetes
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/kong-for-kubernetes/using-kong-for-kubernetes"  >
      Using Kong for Kubernetes
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/kong-for-kubernetes/changelog"  >
      Changelog
    </a>
  </li>
  
  
</ul>

  </div>
</li>


    
    





<li class="accordion-item">
  
  <input id="accordion-5" type="checkbox" />
  
  
  <label for="accordion-5">
    
    <img src="/assets/images/icons/documentation/icn-dev-portal-color.svg" alt="icon">
    
    
    decK
    
    
    <i class="fa fa-chevron-down"></i>
    
  </label>
  
  <div>
    
<ul class="items">
  
  
  
  





<li class="accordion-item">
  
  <input id="accordion-5-1" type="checkbox" />
  
  
  <label for="accordion-5-1">
    
    
    Introduction
    
    
    <i class="fa fa-chevron-down"></i>
    
  </label>
  
  <div>
    
<ul class="items">
  
  
  
  
  
  <li>
    <a href="/2.1.x/../../deck/overview"  >
      Overview
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/../../deck/terminology"  >
      Terminology
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/../../deck/design-architecture"  >
      Architecture
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/../../deck/compatibility-promise"  >
      Compatibility Promise
    </a>
  </li>
  
  
</ul>

  </div>
</li>


  
  
  
  
  
  
  <li>
    <a href="/2.1.x/../../deck/installation"  >
      Installation
    </a>
  </li>
  
  
  
  
  





<li class="accordion-item">
  
  <input id="accordion-5-3" type="checkbox" />
  
  
  <label for="accordion-5-3">
    
    
    Guides
    
    
    <i class="fa fa-chevron-down"></i>
    
  </label>
  
  <div>
    
<ul class="items">
  
  
  
  
  
  <li>
    <a href="/2.1.x/../../deck/guides/getting-started"  >
      Getting Started with decK
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/../../deck/guides/backup-restore"  >
      Backup and Restore
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/../../deck/guides/ci-driven-configuration"  >
      Configuration as Code and GitOps
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/../../deck/guides/distributed-configuration"  >
      Distributed Configuration
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/../../deck/guides/best-practices"  >
      Best Practices
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/../../deck/guides/kong-enterprise"  >
      Using decK with Kong Enterprise
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/../../deck/guides/multi-file-state"  >
      Using Multiple Files to Store Configuration
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/../../deck/guides/deduplicate-plugin-configuration"  >
      De-duplicate Plugin Configuration
    </a>
  </li>
  
  
</ul>

  </div>
</li>


  
  
  
  
  
  
  <li>
    <a href="/2.1.x/../../deck/commands"  >
      decK CLI Reference
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/2.1.x/../../deck/faqs"  >
      FAQ
    </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="https://github.com/kong/deck/blob/main/CHANGELOG.md"  >
      Changelog
    </a>
  </li>
  
  
</ul>

  </div>
</li>


    
  </ul>
</aside>


    
    <aside class="docs-toc">
      <i class="fa fa-times close-sidebar"></i>
      <i class="fa fa-chevron-right collapse-toc"></i>
      <i class="far fa-list-alt expand-toc"></i>
      <div class="docs-toc-title">On this page</div>
      <ul>
  <li><a href="#introduction" class="active scroll-to">Introduction</a></li>
  <li><a href="#dns-based-loadbalancing" class="scroll-to">DNS-based loadbalancing</a>
    <ul>
      <li><a href="#a-records" class="scroll-to">A records</a></li>
      <li><a href="#srv-records" class="scroll-to">SRV records</a></li>
      <li><a href="#dns-priorities" class="scroll-to">DNS priorities</a></li>
      <li><a href="#dns-caveats" class="scroll-to">DNS caveats</a></li>
    </ul>
  </li>
  <li><a href="#ring-balancer" class="scroll-to">Ring-balancer</a>
    <ul>
      <li><a href="#upstream" class="scroll-to">Upstream</a></li>
      <li><a href="#target" class="scroll-to">Target</a></li>
      <li><a href="#balancing-algorithms" class="scroll-to">Balancing algorithms</a></li>
      <li><a href="#balancing-caveats" class="scroll-to">Balancing caveats</a></li>
    </ul>
  </li>
</ul>

    </aside>
    

    <div class="page-content-container v2" id="documentation">
      <div class="toggles">
        <i class="fas fa-stream sidebar-toggle"></i>
        
        <i class="far fa-list-alt toc-sidebar-toggle"></i>
        
      </div>

      <div class="page-content">
        <div class="content show-anchor-links">
          
          <div class="alert alert-ee">
            Maybe you were looking for the <a href="/enterprise"><strong>Enterprise Documentation</strong></a>
            instead?
          </div>
          
          

          
          <span class="reading-time" title="Estimated reading time">
  Estimated reading time:
  
  
    15 minutes
  
</span>

          

          <h2 id="introduction">Introduction</h2>

<p>Kong provides multiple ways of load balancing requests to multiple backend
services: a straightforward DNS-based method, and a more dynamic ring-balancer
that also allows for service registry without needing a DNS server.</p>

<h2 id="dns-based-loadbalancing">DNS-based loadbalancing</h2>

<p>When using DNS-based load balancing, the registration of the backend services
is done outside of Kong, and Kong only receives updates from the DNS server.</p>

<p>Every Service that has been defined with a <code class="language-plaintext highlighter-rouge">host</code> containing a hostname
(instead of an IP address) will automatically use DNS-based load balancing
if the name resolves to multiple IP addresses, provided the hostname does not
resolve to an <code class="language-plaintext highlighter-rouge">upstream</code> name or a name in your DNS hostsfile.</p>

<p>The DNS record <code class="language-plaintext highlighter-rouge">ttl</code> setting (time to live) determines how often the information
is refreshed. When using a <code class="language-plaintext highlighter-rouge">ttl</code> of 0, every request will be resolved using its
own DNS query. Obviously this will have a performance penalty, but the latency of
updates/changes will be very low.</p>

<p><a href="#introduction">Back to top</a></p>

<h3 id="a-records">A records</h3>

<p>An A record contains one or more IP addresses. Hence, when a hostname
resolves to an A record, each backend service must have its own IP address.</p>

<p>Because there is no <code class="language-plaintext highlighter-rouge">weight</code> information, all entries will be treated as equally
weighted in the load balancer, and the balancer will do a straight forward
round-robin.</p>

<p><a href="#introduction">Back to top</a></p>

<h3 id="srv-records">SRV records</h3>

<p>An SRV record contains weight and port information for all of its IP addresses.
A backend service can be identified by a unique combination of IP address
and port number. Hence, a single IP address can host multiple instances of the
same service on different ports.</p>

<p>Because the <code class="language-plaintext highlighter-rouge">weight</code> information is available, each entry will get its own
weight in the load balancer and it will perform a weighted round-robin.</p>

<p>Similarly, any given port information will be overridden by the port information from
the DNS server. If a Service has attributes <code class="language-plaintext highlighter-rouge">host=myhost.com</code> and <code class="language-plaintext highlighter-rouge">port=123</code>,
and <code class="language-plaintext highlighter-rouge">myhost.com</code> resolves to an SRV record with <code class="language-plaintext highlighter-rouge">127.0.0.1:456</code>, then the request
will be proxied to <code class="language-plaintext highlighter-rouge">http://127.0.0.1:456/somepath</code>, as port <code class="language-plaintext highlighter-rouge">123</code> will be
overridden by <code class="language-plaintext highlighter-rouge">456</code>.</p>

<p><a href="#introduction">Back to top</a></p>

<h3 id="dns-priorities">DNS priorities</h3>

<p>The DNS resolver will start resolving the following record types in order:</p>

<ol>
  <li>The last successful type previously resolved</li>
  <li>SRV record</li>
  <li>A record</li>
  <li>CNAME record</li>
</ol>

<p>This order is configurable through the <a href="/2.1.x/configuration/#dns_order"><code class="language-plaintext highlighter-rouge">dns_order</code> configuration property</a>.</p>

<p><a href="#introduction">Back to top</a></p>

<h3 id="dns-caveats">DNS caveats</h3>

<ul>
  <li>
    <p>Whenever the DNS record is refreshed a list is generated to handle the
weighting properly. Try to keep the weights as multiples of each other to keep
the algorithm performant, e.g., 2 weights of 17 and 31 would result in a structure
with 527 entries, whereas weights 16 and 32 (or their smallest relative
counterparts 1 and 2) would result in a structure with merely 3 entries,
especially with a very small (or even 0) <code class="language-plaintext highlighter-rouge">ttl</code> value.</p>
  </li>
  <li>
    <p>DNS is carried over UDP with a default limit of 512 Bytes. If there are many entries
to be returned, a DNS Server will respond with partial data and set a truncate flag, 
indicating there are more entries unsent.
DNS clients, including Kong’s, will then make a second request over TCP to retrieve the full 
list of entries.</p>
  </li>
  <li>Some nameservers by default do not respond with the truncate flag, but trim the response
to be under 512 byte UDP size.
    <ul>
      <li>Consul is an example. Consul, in its default configuration, returns up to the first 
three entries only, and does not set the truncate flag to indicate there are remaining entries unsent. 
Consul includes an option to enable the truncate flag. Please refer to <a href="https://www.consul.io/docs/agent/options.html#enable_truncate">Consul documentation</a>
for more information.</li>
    </ul>
  </li>
  <li>
    <p>If a deployed nameserver does not provide the truncate flag, the pool 
of upstream instances might be loaded inconsistently. The Kong node is effectively 
unaware of some of the instances, due to the limited information provided by the nameserver. 
To mitigate this, use a different nameserver, use IP addresses instead of names, or make sure 
you use enough Kong nodes to still keep all upstream services in use.</p>
  </li>
  <li>
    <p>When the nameserver returns a <code class="language-plaintext highlighter-rouge">3 name error</code>, then that is a valid response
for Kong. If this is unexpected, first validate the correct name is being
queried for, and second check your nameserver configuration.</p>
  </li>
  <li>The initial pick of an IP address from a DNS record (A or SRV) is not
randomized. So when using records with a <code class="language-plaintext highlighter-rouge">ttl</code> of 0, the nameserver is
expected to randomize the record entries.</li>
</ul>

<p><a href="#introduction">Back to top</a></p>

<h2 id="ring-balancer">Ring-balancer</h2>

<p>When using the ring-balancer, the adding and removing of backend services will
be handled by Kong, and no DNS updates will be necessary. Kong will act as the
service registry. Nodes can be added/deleted with a single HTTP request and
will instantly start/stop receiving traffic.</p>

<p>Configuring the ring-balancer is done through the <code class="language-plaintext highlighter-rouge">upstream</code> and <code class="language-plaintext highlighter-rouge">target</code>
entities.</p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">target</code>: an IP address or hostname with a port number where a backend
service resides, eg. “192.168.100.12:80”. Each target gets an additional
<code class="language-plaintext highlighter-rouge">weight</code> to indicate the relative load it gets. IP addresses can be
in both IPv4 and IPv6 format.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">upstream</code>: a ‘virtual hostname’ which can be used in a Route <code class="language-plaintext highlighter-rouge">host</code>
field, e.g., an upstream named <code class="language-plaintext highlighter-rouge">weather.v2.service</code> would get all requests
from a Service with <code class="language-plaintext highlighter-rouge">host=weather.v2.service</code>.</p>
  </li>
</ul>

<p><a href="#introduction">Back to top</a></p>

<h3 id="upstream">Upstream</h3>

<p>Each upstream gets its own ring-balancer. Each <code class="language-plaintext highlighter-rouge">upstream</code> can have many
<code class="language-plaintext highlighter-rouge">target</code> entries attached to it, and requests proxied to the ‘virtual hostname’
(which can be overwritten before proxying, using <code class="language-plaintext highlighter-rouge">upstream</code>’s property
<code class="language-plaintext highlighter-rouge">host_header</code>) will be load balanced over the targets. A ring-balancer has a
pre-defined number of slots, and based on the target weights the slots get
assigned to the targets of the upstream.</p>

<p>Adding and removing targets can be done with a simple HTTP request on the
Admin API. This operation is relatively cheap. Changing the upstream
itself is more expensive as the balancer will need to be rebuilt when the
number of slots change for example.</p>

<p>The only occurrence where the balancer will be rebuilt automatically is when
the target history is cleaned; other than that, it will only rebuild upon changes.</p>

<p>Within the balancer there are the positions (from 1 to <code class="language-plaintext highlighter-rouge">slots</code>),
which are <strong>randomly distributed</strong> on the ring.
The randomness is required to make invoking the ring-balancer cheap at
runtime. A simple round-robin over the wheel (the positions) will do to
provide a well distributed weighted round-robin over the <code class="language-plaintext highlighter-rouge">targets</code>, whilst
also having cheap operations when inserting/deleting targets.</p>

<p>The number of slots to use per target should (at least) be around 100 to make
sure the slots are properly distributed. Eg. for an expected maximum of 8
targets, the <code class="language-plaintext highlighter-rouge">upstream</code> should be defined with at least <code class="language-plaintext highlighter-rouge">slots=800</code>, even if
the initial setup only features 2 targets.</p>

<p>The tradeoff here is that the higher the number of slots, the better the random
distribution, but the more expensive the changes are (add/removing targets)</p>

<p>Detailed information on adding and manipulating
upstreams is available in the <code class="language-plaintext highlighter-rouge">upstream</code> section of the
<a href="/2.1.x/admin-api#upstream-object">Admin API reference</a>.</p>

<p><a href="#introduction">Back to top</a></p>

<h3 id="target">Target</h3>

<p>Because the <code class="language-plaintext highlighter-rouge">upstream</code> maintains a history of changes, targets can only be
added, not modified nor deleted. To change a target, just add a new entry for
the target, and change the <code class="language-plaintext highlighter-rouge">weight</code> value. The last entry is the one that will
be used. As such setting <code class="language-plaintext highlighter-rouge">weight=0</code> will disable a target, effectively
deleting it from the balancer. Detailed information on adding and manipulating
targets is available in the <code class="language-plaintext highlighter-rouge">target</code> section of the
<a href="/2.1.x/admin-api#target-object">Admin API reference</a>.</p>

<p>The targets will be automatically cleaned when there are 10x more inactive
entries than active ones. Cleaning will involve rebuilding the balancer, and
hence is more expensive than just adding a target entry.</p>

<p>A <code class="language-plaintext highlighter-rouge">target</code> can also have a hostname instead of an IP address. In that case
the name will be resolved and all entries found will individually be added to
the ring balancer, e.g., adding <code class="language-plaintext highlighter-rouge">api.host.com:123</code> with <code class="language-plaintext highlighter-rouge">weight=100</code>. The
name ‘api.host.com’ resolves to an A record with 2 IP addresses. Then both
ip addresses will be added as target, each getting <code class="language-plaintext highlighter-rouge">weight=100</code> and port 123.
<strong>NOTE</strong>: the weight is used for the individual entries, not for the whole!</p>

<p>Would it resolve to an SRV record, then also the <code class="language-plaintext highlighter-rouge">port</code> and <code class="language-plaintext highlighter-rouge">weight</code> fields
from the DNS record would be picked up, and would overrule the given port <code class="language-plaintext highlighter-rouge">123</code>
and <code class="language-plaintext highlighter-rouge">weight=100</code>.</p>

<p>The balancer will honor the DNS record’s <code class="language-plaintext highlighter-rouge">ttl</code> setting and requery and update
the balancer when it expires.</p>

<p><strong>Exception</strong>: When a DNS record has <code class="language-plaintext highlighter-rouge">ttl=0</code>, the hostname will be added
as a single target, with the specified weight. Upon every proxied request
to this target it will query the nameserver again.</p>

<p><a href="#introduction">Back to top</a></p>

<h3 id="balancing-algorithms">Balancing algorithms</h3>

<p>The ring-balancer supports the following load balancing algorithms: <code class="language-plaintext highlighter-rouge">round-robin</code>,
<code class="language-plaintext highlighter-rouge">consistent-hashing</code>, and <code class="language-plaintext highlighter-rouge">least-connections</code>. By default, a ring-balancer
uses the <code class="language-plaintext highlighter-rouge">round-robin</code> algorithm, which provides a well-distributed weighted
round-robin over the targets.</p>

<p>When using the <code class="language-plaintext highlighter-rouge">consistent-hashing</code> algorithm, the input for the hash can be either
<code class="language-plaintext highlighter-rouge">none</code>, <code class="language-plaintext highlighter-rouge">consumer</code>, <code class="language-plaintext highlighter-rouge">ip</code>, <code class="language-plaintext highlighter-rouge">header</code>, or <code class="language-plaintext highlighter-rouge">cookie</code>. When set to <code class="language-plaintext highlighter-rouge">none</code>, the
<code class="language-plaintext highlighter-rouge">round-robin</code> scheme will be used, and hashing will be disabled. The <code class="language-plaintext highlighter-rouge">consistent-hashing</code>
algorithm supports a primary and a fallback hashing attribute; in case the primary
fails (e.g., if the primary is set to <code class="language-plaintext highlighter-rouge">consumer</code>, but no Consumer is authenticated),
the fallback attribute is used.</p>

<p>Supported hashing attributes are:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">none</code>: Do not use <code class="language-plaintext highlighter-rouge">consistent-hashing</code>; use <code class="language-plaintext highlighter-rouge">round-robin</code> instead (default).</li>
  <li><code class="language-plaintext highlighter-rouge">consumer</code>: Use the Consumer ID as the hash input. If no Consumer ID is available,
it will fall back on the Credential ID (for example, in case of an external authentication mechanism like LDAP).</li>
  <li><code class="language-plaintext highlighter-rouge">ip</code>: Use the originating IP address as the hash input. Review the configuration
settings for <a href="/2.1.x/configuration/#real_ip_header">determining the real IP</a> when using this.</li>
  <li><code class="language-plaintext highlighter-rouge">header</code>: Use a specified header as the hash input. The header name is
specified in either <code class="language-plaintext highlighter-rouge">hash_on_header</code> or <code class="language-plaintext highlighter-rouge">hash_fallback_header</code>, depending on whether
<code class="language-plaintext highlighter-rouge">header</code> is a primary or fallback attribute, respectively.</li>
  <li><code class="language-plaintext highlighter-rouge">cookie</code>: Use a specified cookie with a specified path as the hash input.
The cookie name is specified in the <code class="language-plaintext highlighter-rouge">hash_on_cookie</code> field and the path is
specified in the <code class="language-plaintext highlighter-rouge">hash_on_cookie_path</code> field. If the specified cookie is not
present in the request, it will be set by the response. Hence, the <code class="language-plaintext highlighter-rouge">hash_fallback</code>
setting is invalid if <code class="language-plaintext highlighter-rouge">cookie</code> is the primary hashing mechanism.</li>
</ul>

<p>The <code class="language-plaintext highlighter-rouge">consistent-hashing</code> algorithm is based on <em>Consistent Hashing</em> (or the
<em>Ketama Principle</em>), which ensures that when the balancer gets modified by
a change in its targets (adding, removing, failing, or changing weights), only
the minimum number of hashing losses occur. This maximizes upstream cache hits.</p>

<p>The ring-balancer also supports the <code class="language-plaintext highlighter-rouge">least-connections</code> algorithm, which selects
the target with the lowest number of connections, weighted by the Target’s
<code class="language-plaintext highlighter-rouge">weight</code> attribute.</p>

<p>For more information on the exact settings see the <code class="language-plaintext highlighter-rouge">upstream</code> section of the
<a href="/2.1.x/admin-api#upstream-object">Admin API reference</a>.</p>

<p><a href="#introduction">Back to top</a></p>

<h3 id="balancing-caveats">Balancing caveats</h3>

<p>The ring-balancer is designed to work both with a single node as well as in a cluster.
For the weighted-round-robin algorithm there isn’t much difference, but when using
the hash based algorithm it is important that all nodes build the exact same
ring-balancer to make sure they all work identical. To do this the balancer
must be build in a deterministic way.</p>

<ul>
  <li>
    <p>Do not use hostnames in the balancer as the
balancers might/will slowly diverge because the DNS ttl has only second precision
and renewal is determined by when a name is actually requested. On top of this is
the issue with some nameservers not returning all entries, which exacerbates
this problem. So when using the hashing approach in a Kong cluster, add <code class="language-plaintext highlighter-rouge">target</code>
entities only by their IP address, and never by name.</p>
  </li>
  <li>
    <p>When picking your hash input make sure the input has enough variance to get
to a well distributed hash. Hashes will be calculated using the CRC-32 digest.
So for example, if your system has thousands of users, but only a few consumers, defined
per platform (eg. 3 consumers: Web, iOS and Android) then picking the <code class="language-plaintext highlighter-rouge">consumer</code>
hash input will not suffice, using the remote IP address by setting the hash to
<code class="language-plaintext highlighter-rouge">ip</code> would provide more variance in the input and hence a better distribution
in the hash output. However, if many clients will be behind the same NAT gateway (e.g. in
call center), <code class="language-plaintext highlighter-rouge">cookie</code> will provide a better distribution than <code class="language-plaintext highlighter-rouge">ip</code>.</p>
  </li>
</ul>

<p><a href="#introduction">Back to top</a></p>

<h1 id="blue-green-deployments">Blue-Green Deployments</h1>

<p>Using the ring-balancer a <a href="http://blog.christianposta.com/deploy/blue-green-deployments-a-b-testing-and-canary-releases/">blue-green deployment</a> can be easily orchestrated for
a Service. Switching target infrastructure only requires a <code class="language-plaintext highlighter-rouge">PATCH</code> request on a
Service, to change its <code class="language-plaintext highlighter-rouge">host</code> value.</p>

<p>Set up the “Blue” environment, running version 1 of the address service:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># create an upstream</span>
<span class="nv">$ </span>curl <span class="nt">-X</span> POST http://kong:8001/upstreams <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"name=address.v1.service"</span>

<span class="c"># add two targets to the upstream</span>
<span class="nv">$ </span>curl <span class="nt">-X</span> POST http://kong:8001/upstreams/address.v1.service/targets <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"target=192.168.34.15:80"</span>
    <span class="nt">--data</span> <span class="s2">"weight=100"</span>
<span class="nv">$ </span>curl <span class="nt">-X</span> POST http://kong:8001/upstreams/address.v1.service/targets <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"target=192.168.34.16:80"</span>
    <span class="nt">--data</span> <span class="s2">"weight=50"</span>

<span class="c"># create a Service targeting the Blue upstream</span>
<span class="nv">$ </span>curl <span class="nt">-X</span> POST http://kong:8001/services/ <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"name=address-service"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"host=address.v1.service"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"path=/address"</span>

<span class="c"># finally, add a Route as an entry-point into the Service</span>
<span class="nv">$ </span>curl <span class="nt">-X</span> POST http://kong:8001/services/address-service/routes/ <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"hosts[]=address.mydomain.com"</span>
</code></pre></div></div>

<p>Requests with host header set to <code class="language-plaintext highlighter-rouge">address.mydomain.com</code> will now be proxied
by Kong to the two defined targets; 2/3 of the requests will go to
<code class="language-plaintext highlighter-rouge">http://192.168.34.15:80/address</code> (<code class="language-plaintext highlighter-rouge">weight=100</code>), and 1/3 will go to
<code class="language-plaintext highlighter-rouge">http://192.168.34.16:80/address</code> (<code class="language-plaintext highlighter-rouge">weight=50</code>).</p>

<p>Before deploying version 2 of the address service, set up the “Green”
environment:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># create a new Green upstream for address service v2</span>
<span class="nv">$ </span>curl <span class="nt">-X</span> POST http://kong:8001/upstreams <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"name=address.v2.service"</span>

<span class="c"># add targets to the upstream</span>
<span class="nv">$ </span>curl <span class="nt">-X</span> POST http://kong:8001/upstreams/address.v2.service/targets <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"target=192.168.34.17:80"</span>
    <span class="nt">--data</span> <span class="s2">"weight=100"</span>
<span class="nv">$ </span>curl <span class="nt">-X</span> POST http://kong:8001/upstreams/address.v2.service/targets <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"target=192.168.34.18:80"</span>
    <span class="nt">--data</span> <span class="s2">"weight=100"</span>
</code></pre></div></div>

<p>To activate the Blue/Green switch, we now only need to update the Service:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Switch the Service from Blue to Green upstream, v1 -&gt; v2</span>
<span class="nv">$ </span>curl <span class="nt">-X</span> PATCH http://kong:8001/services/address-service <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"host=address.v2.service"</span>
</code></pre></div></div>

<p>Incoming requests with host header set to <code class="language-plaintext highlighter-rouge">address.mydomain.com</code> will now be
proxied by Kong to the new targets; 1/2 of the requests will go to
<code class="language-plaintext highlighter-rouge">http://192.168.34.17:80/address</code> (<code class="language-plaintext highlighter-rouge">weight=100</code>), and the other 1/2 will go to
<code class="language-plaintext highlighter-rouge">http://192.168.34.18:80/address</code> (<code class="language-plaintext highlighter-rouge">weight=100</code>).</p>

<p>As always, the changes through the Kong Admin API are dynamic and will take
effect immediately. No reload or restart is required, and no in progress
requests will be dropped.</p>

<p><a href="#introduction">Back to top</a></p>

<h1 id="canary-releases">Canary Releases</h1>

<p>Using the ring-balancer, target weights can be adjusted granularly, allowing
for a smooth, controlled <a href="http://blog.christianposta.com/deploy/blue-green-deployments-a-b-testing-and-canary-releases/">canary release</a>.</p>

<p>Using a very simple 2 target example:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># first target at 1000</span>
<span class="nv">$ </span>curl <span class="nt">-X</span> POST http://kong:8001/upstreams/address.v2.service/targets <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"target=192.168.34.17:80"</span>
    <span class="nt">--data</span> <span class="s2">"weight=1000"</span>

<span class="c"># second target at 0</span>
<span class="nv">$ </span>curl <span class="nt">-X</span> POST http://kong:8001/upstreams/address.v2.service/targets <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"target=192.168.34.18:80"</span>
    <span class="nt">--data</span> <span class="s2">"weight=0"</span>
</code></pre></div></div>

<p>By repeating the requests, but altering the weights each time, traffic will
slowly be routed towards the other target. For example, set it at 10%:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># first target at 900</span>
<span class="nv">$ </span>curl <span class="nt">-X</span> POST http://kong:8001/upstreams/address.v2.service/targets <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"target=192.168.34.17:80"</span>
    <span class="nt">--data</span> <span class="s2">"weight=900"</span>

<span class="c"># second target at 100</span>
<span class="nv">$ </span>curl <span class="nt">-X</span> POST http://kong:8001/upstreams/address.v2.service/targets <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"target=192.168.34.18:80"</span>
    <span class="nt">--data</span> <span class="s2">"weight=100"</span>
</code></pre></div></div>

<p>The changes through the Kong Admin API are dynamic and will take
effect immediately. No reload or restart is required, and no in progress
requests will be dropped.</p>

<p><a href="#introduction">Back to top</a></p>



          
        </div>
      </div>
    </div>
  </div>
  <div id="scroll-to-top-button">
    <i class="fas fa-chevron-up"></i>
  </div>
  
  <div class="feedback-widget-container">
  <input id="feedback-widget-checkbox" type="checkbox">
  <label for="feedback-widget-checkbox">
    <i class="fas fa-thumbs-up"></i>
  </label>
  <div class="feedback-container">
    <div class="feedback-thankyou">
      Thank you for your feedback.
    </div>
    <div class="feedback-comment">
      <textarea id="feedback-comment-text" rows="3" placeholder="Please let us know what we can improve on this page..."></textarea>
      <div class="feedback-comment-buttons">
        <button id="feedback-comment-button-back">Back</button>
        <button id="feedback-comment-button-submit" class="button-primary">Submit</button>
      </div>
    </div>
    <div class="feedback-options">
      <div class="feedback-options-title">Was this page useful?</div>
      <div class="feedback-options-buttons">
        <i data-feedback-result="yes" class="feedback-options-button far fa-thumbs-up"></i>
        <i data-feedback-result="no" class="feedback-options-button far fa-thumbs-down"></i>
      </div>
    </div>
  </div>
</div>

  
</div>
<style>
  @media (max-width: 768px) {
    .algolia-docsearch-suggestion--subcategory-column{
      display: none !important;
    }
  }
</style>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>


<script type="text/javascript">
  docsearch({
    apiKey: '691286ef280379144076a4f8df47a1d1',
    indexName: 'getkong',
    inputSelector: '#getkong-algolia-search-input',
    algoliaOptions: {
      hitsPerPage: 5,
      'facetFilters': ["version: 2.1.x"]
    },
    // Override selected event to allow for local environment navigation
    handleSelected: function (input, event, suggestion) {
      input.setVal('');
      window.location.href = window.location.protocol + "//" + window.location.host + suggestion.url.split(
        "docs.konghq.com")[1]
    }
    // ,debug: true // Set debug to true if you want to inspect the dropdown
  });
</script>




<div id="image-modal" data-image-expand-disabled="">
  <div class="image-modal-backdrop"></div>
  <div class="image-container">
    <img src="" alt="image">
    <i class="fa fa-times"></i>
  </div>
</div>



    <footer class="marketing-footer--light-gray">
  <section>
    <ul class="newsletter">
      <li class="logo-wrapper">
        <div class="logo">
          <img src="/assets/images/KogoBlue.svg" alt="Kong" />
        </div>
        <h5>THE CLOUD CONNECTIVITY COMPANY</h5>
        <p>
          Kong powers reliable digital connections across APIs, hybrid and
          multi-cloud environments.
        </p>
        <div class="form">
          <iframe
            src="https://go.konghq.com/l/392112/2019-02-14/bhxq9c"
            width="100%"
            height="60"
            type="text/html"
            frameborder="0"
            allowTransparency="true"
            scrolling="no"
            style="overflow: hidden; border: 0"
          ></iframe>
        </div>
        <nav>
          <ul>
            <li>
              <a
                href="http://konghq.com/about-kong-inc/?itm_source=website&itm_medium=footer-nav"
                >Company</a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/customers/?itm_source=website&itm_medium=footer-nav"
                >Customers</a
              >
            </li>

            <li>
              <a
                href="http://konghq.com/events/?itm_source=website&itm_medium=footer-nav"
                >Events</a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/investors/?itm_source=website&itm_medium=footer-nav"
                >Investors</a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/careers/?itm_source=website&itm_medium=footer-nav"
                >Careers <span>Hiring!</span></a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/partners/?itm_source=website&itm_medium=footer-nav"
                >Partners</a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/press-room/?itm_source=website&itm_medium=footer-nav"
                >Press</a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/contact/?itm_source=website&itm_medium=footer-nav"
                >Contact</a
              >
            </li>
          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h5>Products</h5>
          <ul>
            <li>
              <a
                href="http://konghq.com/kong/?itm_source=website&itm_medium=footer-nav"
                >Kong Gateway</a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/kong-enterprise/?itm_source=website&itm_medium=footer-nav"
                >Kong Enterprise</a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/get-started/?itm_source=website&itm_medium=footer-nav"
                >Get Started</a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/subscriptions/?itm_source=website&itm_medium=footer-nav"
                >Subscriptions</a
              >
            </li>
          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h5>Resources</h5>
          <ul>
            <li>
              <a
                href="https://konghq.com/resources/?content=ebooks&itm_source=website&itm_medium=footer-nav"
                target="blank"
                >eBooks</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/resources/?content=webinarss&itm_source=website&itm_medium=footer-nav"
                >Webinars</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/resources/?content=whitepaper,datasheet,case-studies&itm_source=website&itm_medium=footer-nav"
                >Briefs</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/blog/?itm_source=website&itm_medium=footer-nav"
                >Blog</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/learning-center/api-gateway/?itm_source=website&itm_medium=footer-nav"
                >API Gateway</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/learning-center/microservices/?itm_source=website&itm_medium=footer-nav"
                >Microservices</a
              >
            </li>
          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h5>Open Source</h5>
          <ul>
            <li>
              <a
                href="https://konghq.com/get-started#install?itm_source=website&itm_medium=footer-nav"
                >Install Kong Gateway</a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/community/?itm_source=website&itm_medium=footer-nav"
                >Kong Community</a
              >
            </li>
            <li>
              <a
                href="https://github.com/Kong/kubernetes-ingress-controller/?itm_source=website&itm_medium=footer-nav"
                >Kubernetes Ingress</a
              >
            </li>
            <li>
              <a
                href="https://kuma.io/?itm_source=website&itm_medium=footer-nav"
                >Kuma</a
              >
            </li>
            <li>
              <a
                href="https://insomnia.rest/?itm_source=website&itm_medium=footer-nav"
                >Insomnia</a
              >
            </li>
          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h5>Solutions</h5>
          <ul>
            <li>
              <a
                href="https://konghq.com/solutions/use-cases/decentralize-applications-and-services/?itm_source=website&itm_medium=footer-nav"
                >Decentralize</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/solutions/use-cases/secure-and-govern-apis-and-services/?itm_source=website&itm_medium=footer-nav"
                >Secure & Govern</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/solutions/use-cases/create-a-developer-platform/?itm_source=website&itm_medium=footer-nav"
                >Create a Dev Platform</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/solutions/gateway/?itm_source=website&itm_medium=footer-nav"
                >API Gateway</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/solutions/kubernetes-ingress/?itm_source=website&itm_medium=footer-nav"
                >Kubernetes</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/products/kong-enterprise/kong-mesh/?itm_source=website&itm_medium=footer-nav"
                >Service Mesh</a
              >
            </li>
          </ul>
        </nav>
      </li>
    </ul>
  </section>

  <section class="legal">
    <div class="container d-flex">
      <div class="social">
        <div class="social-link">
          <a href="https://www.facebook.com/konghq/" title="Facebook"
            ><i
              aria-label="Facebook"
              class="fa fa-facebook-official"
              aria-hidden="true"
            ></i
          ></a>
        </div>
        <div class="social-link">
          <a href="https://twitter.com/thekonginc" title="Twitter"
            ><i
              aria-label="Twitter"
              class="fa fa-twitter"
              aria-hidden="true"
            ></i
          ></a>
        </div>
        <div class="social-link">
          <a href="https://www.meetup.com/topics/kong/all/" title="Meetup"
            ><i aria-label="Meetup" class="fa fa-meetup" aria-hidden="true"></i
          ></a>
        </div>
        <div class="social-link">
          <a href="https://linkedin.com/company/278819" title="LinkedIn"
            ><i
              aria-label="GitHub"
              class="fa fa-linkedin"
              aria-hidden="true"
            ></i
          ></a>
        </div>
        <div class="social-link">
          <a href="https://github.com/kong/kong" target="blank" class="btn-gh">
            <i class="fa fa-github" aria-hidden="true" aria-label="GitHub"></i>
            Star
          </a>
        </div>
      </div>
      <ul>
        <li>
          <span class="mashape-footer-content">
            <a href="http://konghq.com/terms/">Terms</a><b>•</b
            ><a href="http://konghq.com/privacy/">Privacy</a></span
          >
        </li>
      </ul>
      <div>
        <span>&copy; Kong Inc. 2020 &nbsp;</span>
      </div>
    </div>
  </section>

  <script type="text/javascript">
    function onSubmit(response) {
      document.getElementById("subscription_form").submit();
      document.getElementById("follow_up_subscription_form").submit();
      if (response.length == 0) {
        alert("reCaptcha verification failed");
      }
    }
  </script>
</footer>
 <script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = "#" + id;
    anchor.innerHTML = "<span class=\"sr-only\">Permalink</span><i class=\"fa fa-link\"></i>";
    anchor.title = "Permalink";
    return anchor;
  };

  document.onreadystatechange = function () {
    if (this.readyState === "complete") {
      var className =
        ".show-anchor-links h1, .show-anchor-links h2, .show-anchor-links h3, " +
        ".show-anchor-links h4, .show-anchor-links h5, .show-anchor-links h6";
      var headers = document.querySelectorAll(className);

      for (var i = 0; i < headers.length; i++) {
        var header = headers[i];
        if (typeof header.id !== "undefined" && header.id !== "") {
          header.prepend(anchorForId(header.id));
        }
      }
    }
  };
</script>


    <script src="/assets/app.js?v=1601569374"></script>

    <div id="fb-root"></div>

    <script
      src="https://2tjosk2rxzc21medji3nfn1g-wpengine.netdna-ssl.com/wp-content/themes/konghq/assets/js/vendor/bootstrap.min.js"
      async
      defer
    ></script>

    <script
      id="github-bjs"
      src="https://buttons.github.io/buttons.js"
      async
      defer
    ></script>
    <script
      id="twitter-wjs"
      type="text/javascript"
      src="https://platform.twitter.com/widgets.js"
      async
      defer
    ></script>
    <script
      id="facebook-jssdk"
      type="text/javascript"
      src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.3&appId=842731852424506"
      async
      defer
    ></script>

    <script type="text/javascript">
      piAId = '393112';
      piCId = '48375';

      (function() {
        function async_load() {
          var s = document.createElement('script');
          s.type = 'text/javascript';
          s.src =
            ('https:' == document.location.protocol
              ? 'https://pi'
              : 'http://cdn') + '.pardot.com/pd.js';
          var c = document.getElementsByTagName('script')[0];
          c.parentNode.insertBefore(s, c);
        }
        if (window.attachEvent) {
          window.attachEvent('onload', async_load);
        } else {
          window.addEventListener('load', async_load, false);
        }
      })();
    </script>

    <script type="text/javascript">
      var _vwo_code = (function() {
        var account_id = 125292,
          settings_tolerance = 2000,
          library_tolerance = 2500,
          use_existing_jquery = true,
          // DO NOT EDIT BELOW THIS LINE
          f = false,
          d = document;
        return {
          use_existing_jquery: function() {
            return use_existing_jquery;
          },
          library_tolerance: function() {
            return library_tolerance;
          },
          finish: function() {
            if (!f) {
              f = true;
              var a = d.getElementById('_vis_opt_path_hides');
              if (a) a.parentNode.removeChild(a);
            }
          },
          finished: function() {
            return f;
          },
          load: function(a) {
            var b = d.createElement('script');
            b.src = a;
            b.type = 'text/javascript';
            b.innerText;
            b.onerror = function() {
              _vwo_code.finish();
            };
            d.getElementsByTagName('head')[0].appendChild(b);
          },
          init: function() {
            settings_timer = setTimeout(
              '_vwo_code.finish()',
              settings_tolerance
            );
            this.load(
              '//dev.visualwebsiteoptimizer.com/j.php?a=' +
                account_id +
                '&u=' +
                encodeURIComponent(d.URL) +
                '&r=' +
                Math.random()
            );
            var a = d.createElement('style'),
              b = '',
              h = d.getElementsByTagName('head')[0];
            a.setAttribute('id', '_vis_opt_path_hides');
            a.setAttribute('type', 'text/css');
            if (a.styleSheet) a.styleSheet.cssText = b;
            else a.appendChild(d.createTextNode(b));
            h.appendChild(a);
            return settings_timer;
          }
        };
      })();
      _vwo_settings_timer = _vwo_code.init();
    </script>

    <script type="text/javascript">
      !(function() {
        var analytics = (window.analytics = window.analytics || []);
        if (!analytics.initialize)
          if (analytics.invoked)
            window.console &&
              console.error &&
              console.error('Segment snippet included twice.');
          else {
            analytics.invoked = !0;
            analytics.methods = [
              'trackSubmit',
              'trackClick',
              'trackLink',
              'trackForm',
              'pageview',
              'identify',
              'group',
              'track',
              'ready',
              'alias',
              'page',
              'once',
              'off',
              'on'
            ];
            analytics.factory = function(t) {
              return function() {
                var e = Array.prototype.slice.call(arguments);
                e.unshift(t);
                analytics.push(e);
                return analytics;
              };
            };
            for (var t = 0; t < analytics.methods.length; t++) {
              var e = analytics.methods[t];
              analytics[e] = analytics.factory(e);
            }
            analytics.load = function(t) {
              var e = document.createElement('script');
              e.type = 'text/javascript';
              e.async = !0;
              e.src =
                ('https:' === document.location.protocol
                  ? 'https://'
                  : 'http://') +
                'cdn.segment.com/analytics.js/v1/' +
                t +
                '/analytics.min.js';
              var n = document.getElementsByTagName('script')[0];
              n.parentNode.insertBefore(e, n);
            };
            analytics.SNIPPET_VERSION = '3.0.1';
            analytics.load('WDj0nSS7hpyxwL3evgbOzK755s0NUye6');
            analytics.page();
          }
      })();
    </script>

    <script>
      // Collapse Toggler
      $('button[data-toggle="kong-expand"]').on('click', function(e) {
        e.stopPropagation();
        var $this = $(this);
        $('#oss_subnav.expand').toggleClass('slideup');
        $($this.data('target')).toggleClass('kong-navbar-collapse--expand');
        $('nav.navbar.full-width').toggleClass('kong-navbar-collapse--expand');
        $this.toggleClass('active').attr('aria-expanded', true);
        $('.kong-navbar-collapse_section').removeClass('shift');
        $('.subnav, .trigger, .remove').removeClass('active');
        setTimeout(function() {
          $('#menu-primary-nav li').removeClass('active');
          $('.active-tab').removeClass('active-tab');
        }, 100);
      });

      var $window = $(window);

      function checkWidth() {
        var windowsize = $window.width();
        if (windowsize > 1080) {
          $('.navbar').removeClass('mobile-triggers');
          $('#menu-primary-nav li').removeClass('active');
          $('.active-tab').removeClass('active-tab');
        } else {
          $('.navbar').addClass('mobile-triggers');
        }
      }
      // Execute on load
      checkWidth();
      // Bind event listener
      $(window).resize(checkWidth);

      $('#menu-primary-nav .nav1 > a').click(function() {
        if ($('nav.navbar').hasClass('mobile-triggers')) {
          event.preventDefault();
          $('.nav3').removeClass('active');
          var position = $(this)
            .parent()
            .position();
          $(this)
            .parent()
            .toggleClass('active');
          $('body')
            .get(0)
            .style.setProperty(
              '--navPosition',
              (position.top - 75) * -1 + 'px'
            );
          $(this)
            .parent()
            .parent()
            .toggleClass('active-tab');
        }
      });

      $('#menu-primary-nav .nav3 > a').click(function() {
        if ($('nav.navbar').hasClass('mobile-triggers')) {
          event.preventDefault();
          $(this)
            .parent()
            .toggleClass('active');
        }
      });
    </script>
  </body>

  
</html>
